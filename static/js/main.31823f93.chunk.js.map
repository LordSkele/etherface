{"version":3,"sources":["assets/images/thegraph.jpg","../node_modules/encoding/lib sync","theme.js","Notifications.js","helpers.js","contexts/AppTemplateContext.js","lib/thegraph.ts","lib/localstorage.js","actions.js","components/Interface/NewPage.js","constants.js","components/Interface/Components/NewComponent.js","components/Controls/SelectField.js","lib/web3.js","components/Interface/Components/Web3Transaction/NewWeb3Transaction.js","contexts/Web3Context.js","components/Controls/ErrorMsg.js","components/Controls/Spinner.js","components/Interface/Components/Web3Transaction/ShowWeb3Transaction.js","components/Interface/Components/Web3Transaction/index.js","components/Interface/Components/Web3Transaction/EditWeb3Transaction.js","components/Interface/Components/Web3Transaction/PreviewWeb3Transaction.js","components/Interface/Components/Web3Call/NewWeb3Call.js","components/Interface/Components/Web3Call/ShowWeb3Call.js","components/Interface/Components/Web3Call/index.js","components/Interface/Components/Web3Call/EditWeb3Call.js","components/Interface/Components/Web3Call/PreviewWeb3Call.js","lib/graphql.js","components/Interface/Components/Datatable/NewDatatable.js","components/Interface/Components/Datatable/Query.js","components/Interface/Components/Datatable/TablePaginationActions.js","components/Interface/Components/Datatable/ShowDatatable.js","components/Interface/Components/Datatable/index.js","components/Interface/Components/Datatable/EditDatatable.js","components/Interface/Components/Datatable/PreviewDatatable.js","components/Interface/Components/Datatable/GraphQLComponent.js","components/Interface/Components/Markdown/ShowMarkdown.js","components/Interface/Components/index.js","components/Interface/Components/Markdown/index.js","components/Interface/Components/Markdown/NewMarkdown.js","components/Interface/Components/Markdown/EditMarkdown.js","components/Interface/Components/Markdown/PreviewMarkdown.js","components/Interface/EditButton.js","components/Controls/Confirm.js","components/Interface/EditPage.js","components/Interface/Page.js","components/Interface/Tab.js","components/Settings/SettingsMain.js","components/Controls/Identicon.js","components/Controls/FileUploader.js","lib/etherscan.js","components/Settings/NewAddress.js","components/Settings/Addresses.js","components/Settings/AddressABI.js","components/Settings/EditAddress.js","components/Settings/NewIntegration.js","components/Settings/Integrations.js","components/Settings/NewTab.js","components/Controls/EmojiPicker.js","components/Settings/EditTab.js","components/Settings/Tabs.js","components/Settings/JsonView.js","components/Settings/Settings.js","Routes.js","Web3Status.js","Layout.js","Loading.js","App.js","lib/storage/HttpStorageOptions.js","index.js","lib/storage/http.js","lib/storage/LocalstorageOptions.js","lib/storage/browser.js"],"names":["module","exports","webpackEmptyContext","req","e","Error","code","keys","resolve","id","theme","createMuiTheme","palette","primary","main","secondary","error","red","A400","background","default","Alert","props","elevation","variant","CustomToast","appearance","children","autoDismissTimeout","React","useState","open","setOpen","handleClose","event","reason","Snackbar","autoHideDuration","onClose","severity","maxId","objs","max","Object","forEach","key","__id","nextId","length","filter","obj","predicate","reduce","res","AppTemplateStore","createContext","initialState","settings","__loaded","reducer","state","action","type","addresses","tabs","pages","components","integrations","payload","template","storage","tab","tabId","page","pageId","__tab_id","component","componentId","__page_id","integration","integrationKey","__connected","name","__version","__source","console","log","firstPage","title","t","undefined","integrationId","i","c","map","address","network","a","setting","value","AppTemplateProvider","useReducer","dispatch","addToast","useToasts","useMemo","autosave","exportedTemplate","serializeTemplate","save","apperance","autoDismiss","autoSave","Provider","useAppTemplate","useContext","useContractAddresses","abi","useAddress","find","useComponentsByPageId","p","useSettings","filterInternalFields","copy","assign","substr","serializedTemplate","tabKey","tab_pages","pageKey","page_components","f","componentKey","push","addressKey","templateVersion","useRemoteSchema","endpoint","cachedSchemas","setCachedSchemas","useEffect","JSON","fetchGraphqlSchema","schema","parse","data","__schema","OPTIONS","optionsKey","opt","options","optionVal","localStorage","getItem","val","setItem","stringify","ajv","Ajv","allErrors","addSchema","useActions","loadAppTemplate","editTemplate","addTab","slug","slugify","validate","$ref","errorText","errorsText","toLowerCase","editTab","deleteTab","addPage","editPage","addIntegration","deleteIntegration","connectIntegration","__instance","uri","cache","InMemoryCache","httpLink","HttpLink","credentials","ApolloClient","link","ApolloLink","from","onError","graphQLErrors","networkError","connectTheGraph","addComponent","editComponent","deleteComponent","addAddress","deleteAddress","editAddress","loadSettings","localstorage","setSetting","NewPage","tab_id","useForm","fields","label","submit","values","get","form","Typography","TextField","autoFocus","Button","color","onClick","NETWORKS","chainId","NewComponent","page_id","row","column","preSave","componentType","setComponentType","existingComponents","EditComponent","componentForType","onCancel","onCreate","layout","defaultLayout","maxRow","existingRow","Card","CardHeader","CardContent","Grid","container","COMPONENT_TYPES","item","spacing","SelectField","helperText","fullWidth","rest","FormControl","InputLabel","Select","option","MenuItem","FormHelperText","injected","InjectedConnector","supportedChainIds","n","useContractByAddress","addressRecord","useWeb3React","library","account","active","provider","UncheckedJsonRpcSigner","getSigner","ethers","getDefaultProvider","Contract","useHasSigner","err","signer","utils","defineReadOnly","this","getAddress","transaction","sendUncheckedTransaction","then","hash","nonce","gasLimit","gasPrice","confirmations","wait","waitForTransaction","message","signMessage","Signer","SelectFunction","contract","queries","interface","functions","queryFuncs","q","indexOf","signature","addField","function","Web3Context","transactions","blockNumber","_checkedBlock","receipt","Web3ContextProvider","addTx","tx","setTxBlockNumber","setTxReceipt","useCallback","setBlockNumber","useWeb3Context","useTransactions","BlockNumberWatcher","stale","updateBlockNumber","getBlockNumber","catch","on","removeListener","TransactionStatusWatcher","useBlockNumber","getTransactionReceipt","useStyles","makeStyles","success","backgroundColor","green","dark","info","warning","amber","icon","fontSize","iconVariant","opacity","marginRight","display","alignItems","ErrorMsg","classes","Portal","anchorOrigin","vertical","horizontal","SnackbarContent","className","clsx","aria-describedby","IconButton","aria-label","root","width","marginTop","Spinner","SpinnerComponent","CircularProgress","LinearProgress","backdrop","zIndex","drawer","Web3TxResult","result","toString","size","new","addressOptions","optional","description","buttonText","addressesExist","Array","isArray","addAddressLink","to","Form","disabled","CardActions","show","hasSigner","setResult","resultLoading","setResultLoading","setError","func","funcFields","inputs","args","fieldKey","signerRequired","networkMismatch","warningText","reset","Box","flex","edit","onSave","initialValues","fromJS","formValues","preview","nework","Web3CallResult","displayResult","typeNameToQuerySingle","typeName","field","types","kind","normalizeFieldType","ofType","ModelSelect","onNext","selectedModel","setSelectedModel","models","queryType","subscriptionType","List","dense","model","ListItem","selected","ListItemText","FieldsSelect","selectedFields","setSelectedFields","includes","toggleSelected","fakelink","cursor","textDecoration","Query","graph_client","setSelectedQuery","expandLists","setExpandLists","query","gql","join","useQuery","client","loading","renderCell","__typename","rows","k","m","Table","TableBody","rowName","TableRow","TableCell","flexShrink","marginLeft","TablePaginationActions","count","pageCount","rowsPerPage","onChangePage","useTheme","direction","submitButton","PER_PAGE_OPTS","ShowDatatable","setPage","perPage","setPerPage","queryFields","enabled","skip","listQuery","cols","r","TableContainer","table","TableHead","kk","colName","TableFooter","TablePagination","rowsPerPageOptions","colSpan","SelectProps","inputProps","native","evt","onChangeRowsPerPage","parseInt","target","ActionsComponent","componentFields","initialChecked","checked","setChecked","gutterBottom","button","currentIndex","newChecked","splice","ListItemIcon","Checkbox","edge","tabIndex","disableRipple","ListItemSecondaryAction","newComponent","dataLink","remoteSchema","singleQuery","typeNameToQueryMany","order","newField","data_source","useIntegration","selectedQuery","needSchema","content","multiline","rowsMax","contentByLine","split","previewContent","slice","Math","min","source","datatableComponents","web3TransactionComponents","web3CallComponents","componentRecord","componentsByColumn","colNumber","sort","b","fab","position","top","left","margin","bottom","right","EditButton","isDesktop","useMediaQuery","breakpoints","up","defaultMatches","Fab","Transition","forwardRef","ref","Slide","Confirm","onConfirm","handleClickOpen","Dialog","TransitionComponent","keepMounted","aria-labelledby","DialogTitle","DialogContent","DialogContentText","DialogActions","startIcon","Children","child","cloneElement","StyledSlider","withStyles","Slider","sliderPositionsToColumnWidths","sliderPositions","remainder","columnWidths","EditPage","pageColumns","pageColumnPositions","setEditComponent","showAddComponent","setShowAddComponent","useHistory","columns","columnCount","setColumnCount","x","columnWithdsToSliderPositions","setSliderPositions","changesMade","setChangesMade","required","componentLayout","componentGrid","colSize","colNum","actualColNum","rowComponents","xs","PreviewComponent","componentPreview","style","textAlign","updateColumnCount","newSliderPositions","saveLayoutChanges","ButtonGroup","marks","onChange","my","NewComponentModal","fullScreen","down","Container","fixed","Page","editMode","setEditMode","AlertTitle","lg","ShowComponent","Tab","usePagesByTabId","SettingsMain","SettingsOptions","settingsComponent","errMsg","vairant","getIsPristine","Link","formatted","fileDownload","identicon","Identicon","pixelWidth","useRef","current","innerHTML","appendChild","Jazzicon","FileUploader","accept","onFileUpload","file","setFile","setLoading","handleFileSelect","useFileInput","files","multiple","reader","FileReader","onloadstart","onloadend","onload","readAsText","ETHERSCAN_NETWORKS","etherscanApiHost","etherscanNetwork","fetchAbi","fetch","json","status","etherscanUrl","EtherscanTxLink","prefix","href","rel","shortenTxHash","validateAddress","startsWith","avatar","blue","NewAddress","fetching","setFetching","deployedOptions","setDeployedOptions","networkOptions","fetchabi","onSelect","networkId","setValue","FormControlLabel","control","Collapse","in","truffleJson","deployedNetworks","networks","contractName","NetworkOptionsSelector","networkRecord","ListItemAvatar","Avatar","height","Addresses","noAddresses","Chip","onDelete","AddressABI","calls","callFns","txFns","events","callFn","txFn","underline","EditAddress","useParams","history","NewIntegration","flexDirection","nameForIntegraion","integrationType","Integrations","showNewIntegration","setShowNewIntegration","src","thegraphLogo","alt","NewTab","InputProps","endAdornment","InputAdornment","EmojiPicker","onRemove","set","EditTab","showSelectIcon","setShowSelectIcon","selectIcon","emoji","newTab","iconText","byId","Tabs","selectIconTabId","setSelectIconTabId","selectedEditTab","setSelectedEditTab","md","JsonView","Settings","exact","path","Routes","appTemplate","defaultTab","render","chip","snacks","Web3Status","preventDuplicate","Web3TransactionList","useSnackbar","enqueueSnackbar","closeSnackbar","persist","drawerPaper","flexGrow","padding","navlist","white","divider","nav","marginBottom","paddingTop","paddingBottom","settingsItem","text","justifyContent","textTransform","letterSpacing","fontWeight","typography","fontWeightMedium","NavLinkWithRef","innerRef","settingsSubNavs","route","SettingsIcon","Layout","location","useLocation","pathname","openSidebar","setOpenSidebar","toggleSidebar","showSubSettings","window","document","body","disableGutters","activeClassName","list","Divider","s","subitem","Hidden","smUp","implementation","Drawer","anchor","paper","ModalProps","xsDown","Loading","settingsLoaded","setSettingsLoaded","loadingError","setLoadingError","activate","triedWeb3Existing","tried","setTried","isAuthorized","warn","useWeb3ConnectExisting","load","savedTemplate","exampleTemplate","integrationKeys","createBrowserHistory","getLibrary","Web3Provider","pollingInterval","App","ThemeProvider","CssBaseline","Toast","HttpStorageOptions","httpLocation","canSave","LocalstorageOptions","delete","localstoragePrefix","templateJSON","removeItem","REACT_APP_ETHERFACE_STORAGE","HttpStorage","REACT_APP_ETHERFACE_TEMPLATE_URL","BrowserStorage","ReactDOM","querySelector"],"mappings":"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","file":"static/js/main.31823f93.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/thegraph.03df70d0.jpg\";","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 521;","import { red } from '@material-ui/core/colors';\nimport { createMuiTheme } from '@material-ui/core/styles';\n\n// A custom theme for this app\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#556cd6',\n    },\n    secondary: {\n      main: '#19857b',\n    },\n    error: {\n      main: red.A400,\n    },\n    background: {\n      default: '#fff',\n    },\n  },\n});\n\nexport default theme;\n","import React from 'react';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport MuiAlert from '@material-ui/lab/Alert';\n\nfunction Alert(props) {\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n}\n\nexport const CustomToast = ({ appearance, children, autoDismissTimeout }) => {\n  const [open, setOpen] = React.useState(true);\n\n  const handleClose = (event, reason) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n    setOpen(false);\n  };\n\n  return (\n      <Snackbar open={open} autoHideDuration={autoDismissTimeout} onClose={handleClose}>\n        <Alert onClose={handleClose} severity={appearance}>\n          { children }\n        </Alert>\n      </Snackbar>\n  );\n};\n","Object.filter = (obj = {}, predicate) =>\n  Object.keys(obj)\n    .filter( key => predicate(obj[key]) )\n    .reduce( (res, key) => (res[key] = obj[key], res), {} );\n\nfunction maxId(objs) {\n  let max = 0;\n  Object.keys(objs).forEach(key => {\n    if (objs[key].__id > max) { max = objs[key].__id; }\n  });\n  return max;\n}\n\nexport function nextId(objs = {}) {\n  if (Object.keys(objs).length === 0) { return 0; }\n  return maxId(objs) + 1;\n};\n","import React, { useMemo } from 'react';\nimport { useToasts } from 'react-toast-notifications'\nimport { nextId } from '../helpers';\n\nexport const AppTemplateStore = React.createContext();\n\nconst FILE_FORMAT_VERSION = '0';\n\nconst initialState = {\n  settings: {},\n  __loaded: false,\n};\n\nexport function reducer(state, action) {\n  switch (action.type) {\n    case 'LOAD_TEMPLATE':\n      // TODO: validate JSON\n      let tabs = {};\n      let pages = {};\n      let components = {};\n      let integrations = {};\n      let addresses = [];\n      const { template, storage } = action.payload;\n\n      // Flatten components, pages and tabs\n      template.tabs && template.tabs.forEach((tab) => {\n        const tabId = nextId(tabs);\n        tabs[tabId] = {...tab, __id: tabId};\n        tab.pages.forEach((page)  => {\n          const pageId = nextId(pages);\n          pages[pageId] = {...page, __id: pageId, __tab_id: tabId};\n          page.components.forEach((component) => {\n            const componentId = nextId(components);\n            components[componentId] = {...component, __id: componentId, __page_id: pageId};\n          });\n          delete pages[pageId].components;\n        });\n        delete tabs[tabId].pages;\n      });\n\n      template.integrations && template.integrations.forEach((integration, integrationKey) =>\n        integrations[integrationKey] = {\n          ...integration,\n          __id: integrationKey,\n          __connected: false,\n        }\n      );\n\n      addresses = template.addresses || [];\n\n      return {\n        ...state,\n        name: template.name,\n        tabs,\n        pages,\n        components,\n        integrations,\n        addresses,\n        __loaded: true,\n        __version: 0,\n        __source: storage,\n      };\n\n    case 'EDIT_TEMPLATE':\n      console.log('EDIT TEMPLATE:: ', action.payload);\n      return {\n        ...state,\n        ...action.payload,\n        __version: state.__version + 1,\n      };\n\n    case 'ADD_TAB': {\n      const tabId = nextId(state.tabs);\n\n      // Create a first page for the tab\n      const pageId = nextId(state.pages);\n      const firstPage = {\n        __id: pageId,\n        __tab_id: tabId,\n        title: action.payload.title,\n      };\n\n      return {\n        ...state,\n        tabs: {\n          ...state.tabs,\n          [tabId]: {\n            ...action.payload,\n            __id: tabId,\n          },\n        },\n        pages: {\n          ...state.pages,\n          [pageId]: firstPage,\n        },\n        __version: state.__version + 1,\n      };\n    }\n\n    case 'EDIT_TAB':\n      return {\n        ...state,\n        tabs: {\n          ...state.tabs,\n          [action.payload.__id]: {\n            ...state.tabs[action.payload.__id],\n            ...action.payload,\n          },\n        },\n        __version: state.__version + 1,\n      };\n\n    case 'DELETE_TAB':\n      // TODO: Need to delete Pages and Tabs also\n      return {\n        ...state,\n        tabs: Object.filter(state.tabs, t => t.__id !== action.payload.__id),\n        __version: state.__version + 1,\n      };\n\n    case 'ADD_PAGE': {\n      if (action.payload.__tab_id === undefined) { throw new Error('page requires tab id'); }\n      const pageId = nextId(state.pages);\n\n      return {\n        ...state,\n        pages: {\n          ...state.pages,\n          [pageId]: {\n            ...action.payload,\n            __id: pageId,\n          },\n        },\n        __version: state.__version + 1,\n      };\n    }\n\n    case 'EDIT_PAGE':\n      return {\n        ...state,\n        pages: {\n          ...state.pages,\n          [action.payload.__id]: {\n            ...state.pages[action.payload.__id],\n            ...action.payload,\n          },\n        },\n        __version: state.__version + 1,\n      };\n\n    case 'ADD_INTEGRATION':\n      const integrationId = nextId(state.integrations);\n      return {\n        ...state,\n        integrations: {\n          ...state.integrations,\n          [integrationId]: {\n            ...action.payload,\n            __id: integrationId,\n          },\n        },\n        __version: state.__version + 1,\n      };\n\n    case 'DELETE_INTEGRATION':\n      return {\n        ...state,\n        integrations: Object.filter(state.integrations, i => i.__id !== action.payload.__id),\n        __version: state.__version + 1,\n      };\n\n    case 'CONNECT_INTEGRATION':\n      return {\n        ...state,\n        integrations: {\n          ...state.integrations,\n          [action.payload.__id]: {\n            ...action.payload,\n            __connected: true,\n          },\n        },\n      };\n\n    case 'ADD_COMPONENT':\n      //TODO: move valiation to action creator\n      if (action.payload.__page_id === undefined) { throw new Error('Page id required on component'); }\n      // TODO: ensure page_id actually exists also??\n      const componentId = nextId(state.components);\n      return {\n        ...state,\n        components: {\n          ...state.components,\n          [componentId]: {\n            ...action.payload,\n            __id: componentId,\n          },\n        },\n        __version: state.__version + 1,\n      };\n\n    case 'EDIT_COMPONENT':\n      return {\n        ...state,\n        components: {\n          ...state.components,\n          [action.payload.__id]: {\n            ...state.components[action.payload.__id],\n            ...action.payload,\n          },\n        },\n        __version: state.__version + 1,\n      };\n\n    case 'DELETE_COMPONENT':\n      return {\n        ...state,\n        components: Object.filter(state.components, c => c.__id !== action.payload.__id),\n        __version: state.__version + 1,\n      };\n\n    case 'ADD_ADDRESS':\n      return {\n        ...state,\n        // TODO:: Ensure address doesn't already exist\n        addresses: [...state.addresses, action.payload],\n        __version: state.__version + 1,\n      };\n\n    case 'EDIT_ADDRESS':\n      return {\n        ...state,\n        addresses: state.addresses.map((address) => {\n          if (address.address !== action.payload.address && address.network !== action.payload.network) {\n            return address;\n          }\n          return {\n            ...address,\n            ...action.payload,\n          };\n        }),\n        __version: state.__version + 1,\n      };\n\n    case 'DELETE_ADDRESS':\n      return {\n        ...state,\n        addresses: state.addresses.filter(a => (a.address !== action.payload.address && a.network !== action.payload.network)),\n        __version: state.__version + 1,\n      };\n\n    case 'LOAD_SETTINGS':\n      return {\n        ...state,\n        settings: action.payload,\n      };\n\n    case 'SET_SETTING':\n      return {\n        ...state,\n        settings: {\n          ...state.settings,\n          [action.payload.setting]: action.payload.value,\n        },\n      };\n\n    default:\n      return state;\n  }\n\n}\n\nexport const AppTemplateProvider = ({ children, storage }) => {\n  const [state, dispatch] = React.useReducer(reducer, initialState);\n  const { addToast } = useToasts();\n\n  // TODO: React warning about updating during state transition\n  function autoSave() {\n    const exportedTemplate = serializeTemplate(state);\n    storage.save(exportedTemplate);\n    addToast(`Autosaved to ${storage.name}`, {apperance: 'success', autoDismiss: true, autoDismissTimeout: 3000});\n  }\n\n  // Autosave on changes to template\n  useMemo(() => {\n    if (state.__version && state.__version > 0) {\n      if (state.settings.autosave) {\n        autoSave();\n      }\n    }\n  }, [state.__version]);\n\n  return <AppTemplateStore.Provider value={{state, dispatch}}>\n    { children }\n  </AppTemplateStore.Provider>;\n};\n\nexport const useAppTemplate = () => {\n  const { state } = React.useContext(AppTemplateStore);\n  return state;\n};\n\nexport const useAddresses = () => {\n  const { state } = React.useContext(AppTemplateStore);\n  return state.addresses;\n};\n\nexport const useContractAddresses = () => {\n  const { state } = React.useContext(AppTemplateStore);\n  return state.addresses.filter(a => !!a.abi);\n};\n\nexport const useAddress = (address, network) => {\n  const { state } = React.useContext(AppTemplateStore);\n  return state.addresses.find(a => a.address === address && a.network === network);\n};\n\nexport const usePagesByTabId = (tabId) => {\n  const { state } = React.useContext(AppTemplateStore);\n  const { pages } = state;\n  return Object.filter(pages, p => p.__tab_id === tabId);\n};\n\nexport const useComponentsByPageId = (pageId) => {\n  const { state } = React.useContext(AppTemplateStore);\n  const { components } = state;\n  return Object.filter(components, p => p.__page_id === pageId);\n};\n\n//export const useDebugState = () => {\n//const { state } = React.useContext(AppTemplateStore);\n//console.log('DATA STATE: ', state);\n//};\n\nexport const useIntegration = (type, endpoint) => {\n  const { state } = React.useContext(AppTemplateStore);\n  const { integrations } = state;\n\n  const integration = integrations[Object.keys(Object.filter(integrations, i => i.type === type && i.endpoint === endpoint))[0]];\n  if (!integration || !integration.__connected) { return; }\n\n  return integration;\n};\n\nexport const useSettings = () => {\n  const { state } = React.useContext(AppTemplateStore);\n  return state.settings;\n};\n\nexport const useStorage = () => {\n  const { state } = React.useContext(AppTemplateStore);\n  return state.__source;\n};\n\nfunction filterInternalFields(obj) {\n  let copy = Object.assign({}, obj);\n  Object.keys(obj).forEach(key => {\n    if (key.substr(0,2) === '__') {\n      delete copy[key];\n    }\n  });\n  return copy;\n}\n\nexport function serializeTemplate(template) {\n  let serializedTemplate = {tabs: [], integrations: [], addresses: []};\n  Object.keys(template.tabs).forEach(tabKey => {\n    let tab = {...template.tabs[tabKey], pages: []};\n    let tab_pages = Object.filter(template.pages, p => p.__tab_id === tab.__id);\n    Object.keys(tab_pages).forEach(pageKey => {\n      let page = tab_pages[pageKey];\n      page.components = [];\n      let page_components = Object.filter(template.components, f => f.__page_id === page.__id);\n      Object.keys(page_components).forEach(componentKey => {\n        page.components.push(filterInternalFields(template.components[componentKey]));\n      });\n      tab.pages.push(filterInternalFields(page));\n    });\n    serializedTemplate.tabs.push(filterInternalFields(tab));\n  });\n\n  Object.keys(template.integrations).forEach(integrationKey => {\n    serializedTemplate.integrations.push(filterInternalFields(template.integrations[integrationKey]))\n  });\n\n  serializedTemplate.addresses = Object.keys(template.addresses).map(addressKey  => template.addresses[addressKey]);\n\n  // Extra properties\n  serializedTemplate.name = template.name;\n  serializedTemplate.templateVersion = FILE_FORMAT_VERSION;\n\n  return serializedTemplate;\n}\n","import { useState, useEffect } from 'react';\nimport {\n  InMemoryCache,\n  NormalizedCacheObject,\n} from \"apollo-cache-inmemory\";\nimport { ApolloClient } from \"apollo-client\";\nimport { ApolloLink } from \"apollo-link\";\nimport { onError } from \"apollo-link-error\";\nimport { HttpLink } from \"apollo-link-http\";\n//import { WebSocketLink } from \"apollo-link-ws\";\n//import { getMainDefinition } from \"apollo-utilities\";\n//import { SubscriptionClient } from \"subscriptions-transport-ws\";\n\nimport  fetchGraphqlSchema from 'fetch-graphql-schema';\n\nexport function connectTheGraph(uri: string): ApolloClient<NormalizedCacheObject> {\n  // Create the cache first, which we'll share across Apollo tooling.\n  // This is an in-memory cache. Since we'll be calling `createClient` on\n  // universally, the cache will survive until the HTTP request is\n  // responded to (on the server) or for the whole of the user's visit (in\n  // the browser)\n  const cache = new InMemoryCache();\n\n  // Create a HTTP client (both server/client). It takes the GraphQL\n  // server from the `GRAPHQL` environment variable, which by default is\n  // set to an external playground at https://graphqlhub.com/graphql\n  const httpLink = new HttpLink({\n    credentials: \"same-origin\",\n    uri,\n  });\n\n  // Return a new Apollo Client back, with the cache we've just created,\n  // and an array of 'links' (Apollo parlance for GraphQL middleware)\n  // to tell Apollo how to handle GraphQL requests\n  return new ApolloClient({\n    cache,\n    link: ApolloLink.from([\n      // General error handler, to log errors back to the console.\n      // Replace this in production with whatever makes sense in your\n      // environment. Remember you can use the global `SERVER` variable to\n      // determine whether you're running on the server, and record errors\n      // out to third-party services, etc\n      onError(({ graphQLErrors, networkError }) => {\n        console.error(graphQLErrors, networkError);\n      }),\n\n        // Split on HTTP and WebSockets\n        //split(\n          //({ query }) => {\n            //const definition = getMainDefinition(query);\n            //return (\n              //definition.kind === \"OperationDefinition\" &&\n              //definition.operation === \"subscription\"\n            //);\n          //},\n          // Use WebSockets for subscriptions\n          //new WebSocketLink(\n            // Replace http(s) with `ws` for connecting via WebSockts\n            //new SubscriptionClient(uri.replace(/^https?/, \"ws\"), {\n              //reconnect: true // <-- automatically redirect as needed\n            //})\n          //),\n          // ... fall-back to HTTP for everything else\n          httpLink\n        //)\n      ]),\n    });\n  }\n\nexport const useRemoteSchema = (endpoint: string): string | undefined => {\n  const [cachedSchemas, setCachedSchemas] = useState<{[key: string]:string}>({});\n\n  useEffect(() => {\n    (async () => {\n      if (!endpoint || cachedSchemas[endpoint]) { return; }\n      const schema = JSON.parse((await fetchGraphqlSchema(endpoint)));\n      setCachedSchemas({...cachedSchemas, [endpoint]: schema.data.__schema});\n    })();\n  }, [cachedSchemas, endpoint]);\n\n  return endpoint ? cachedSchemas[endpoint] : undefined;\n};\n","const OPTIONS = {\n  autosave: {default: true},\n};\n\nconst localstorageKey = 'etherface-setting';\n\nconst optionsKey = (key, opt) => `${key}.options.${opt}`;\n\nexport const loadSettings = () => {\n  let options = {};\n  Object.keys(OPTIONS).forEach(opt => {\n    const optionVal = localStorage.getItem(optionsKey(opt, localstorageKey));\n    if (optionVal === null && OPTIONS[opt].default !== undefined) {\n      options[opt] = OPTIONS[opt].default;\n    } else {\n      options[opt] = JSON.parse(optionVal);\n    }\n  });\n  return options;\n};\n\nexport const setSetting = (setting, val) => {\n  localStorage.setItem(optionsKey(setting, localstorageKey), JSON.stringify(val));\n};\n\nexport default {\n  loadSettings,\n  setSetting,\n};\n","import React from 'react';\nimport Ajv from 'ajv';\nimport slugify from 'slugify';\n\nimport { default as schema } from 'types/Template.json';\n\nimport { nextId } from './helpers';\nimport { AppTemplateStore } from './contexts/AppTemplateContext';\n\nimport { connectTheGraph } from './lib/thegraph';\nimport localstorage from './lib/localstorage';\n\n\nconst ajv = new Ajv({ allErrors: true });\najv.addSchema(schema, 'template');\n\nexport const useActions = () => {\n  const { dispatch, state } = React.useContext(AppTemplateStore);\n\n  function loadAppTemplate(template, storage) {\n    dispatch({ type: 'LOAD_TEMPLATE', payload: {template, storage} });\n  }\n\n  function editTemplate(template) {\n    dispatch({ type: 'EDIT_TEMPLATE', payload: template});\n  }\n\n  function addTab(tab){\n    if (!tab.slug) {\n      tab.slug = slugify(tab.name);\n    }\n\n    // validations\n    const valid = ajv.validate({ $ref: 'template#/definitions/Tab' }, tab);\n    if (!valid) {\n      const errorText =\n        ajv.errorsText() && ajv.errorsText().toLowerCase() !== \"no errors\"\n        ? ajv.errorsText()\n        : \"\";\n      throw new Error(errorText);\n    }\n    const existingBySlug = Object.filter(state.tabs, t => t.slug === tab.slug);\n\n    dispatch({ type: 'ADD_TAB', payload: tab });\n  }\n\n  function editTab(tab) {\n    dispatch({ type: 'EDIT_TAB', payload: tab});\n  }\n\n  function deleteTab(tab){\n    dispatch({ type: 'DELETE_TAB', payload: tab });\n  }\n\n  function addPage(page){\n    dispatch({ type: 'ADD_PAGE', payload: page });\n  }\n\n  function editPage(page) {\n    dispatch({ type: 'EDIT_PAGE', payload: page});\n  }\n\n  function addIntegration(integration) {\n    dispatch({ type: 'ADD_INTEGRATION', payload: integration });\n  }\n\n  function deleteIntegration(integration) {\n    dispatch({ type: 'DELETE_INTEGRATION', payload: integration });\n  }\n\n  function connectIntegration(integration) {\n    const __instance = ((type) => {\n      switch (type) {\n        case 'thegraph':\n          return connectTheGraph(integration.endpoint);\n        default:\n          throw new Error ('Unsupported integration type: ', type);\n      }\n    })(integration.type);\n    dispatch({ type: 'CONNECT_INTEGRATION', payload: {...integration, __instance}});\n  }\n\n  function addComponent(component) {\n    dispatch({ type: 'ADD_COMPONENT', payload: component });\n  }\n\n  function editComponent(component) {\n    dispatch({ type: 'EDIT_COMPONENT', payload: component});\n  }\n\n  function deleteComponent(component) {\n    dispatch({ type: 'DELETE_COMPONENT', payload: component});\n  }\n\n  function addAddress(address) {\n    dispatch({ type: 'ADD_ADDRESS', payload: address});\n  }\n\n  function editAddress(address) {\n    dispatch({ type: 'EDIT_ADDRESS', payload: address});\n  }\n\n  function deleteAddress(address) {\n    dispatch({ type: 'DELETE_ADDRESS', payload: address});\n  }\n\n  function loadSettings() {\n    const settings = localstorage.loadSettings();\n    dispatch({ type: 'LOAD_SETTINGS', payload: settings});\n  };\n\n  function setSetting(setting, value) {\n    localstorage.setSetting(setting, value);\n    dispatch({ type: 'SET_SETTING', payload: {setting, value}});\n  }\n\n  return {\n    loadAppTemplate,\n    editTemplate,\n    addTab,\n    editTab,\n    deleteTab,\n    addPage,\n    editPage,\n    addIntegration,\n    deleteIntegration,\n    connectIntegration,\n    addComponent,\n    editComponent,\n    deleteComponent,\n    addAddress,\n    deleteAddress,\n    editAddress,\n    loadSettings,\n    setSetting,\n  };\n};\n","import React from 'react';\nimport {\n  Button,\n  TextField,\n  Typography,\n} from '@material-ui/core';\n\nimport { useForm } from 'react-hooks-useform';\n\nimport { useActions } from '../../actions';\n\nexport const NewPage = ({ tab_id }) => {\n  const { addPage } = useActions();\n\n  const [fields, form] = useForm({\n    fields: [\n      { name: 'title', label: 'title' },\n    ],\n    submit: values => { addPage({title: values.get('title'), __tab_id: tab_id}); }\n  });\n\n\n  return (\n    <div>\n\n      <Typography>Add page</Typography>\n\n      <TextField {...fields.title } autoFocus />\n\n      <br />\n\n      <Button color=\"primary\" onClick={form.submit}>Add Page</Button>\n\n    </div>\n  );\n}\n\n","export const GRID_COLS = 12; // Number of columns in the grid\n\nexport const NETWORKS = [\n  {\n    chainId: 1,\n    id: 'mainnet',\n    name: 'Mainnet',\n  },\n  {\n    chainId: 3,\n    id: 'ropsten',\n    name: 'Ropsten',\n  },\n  {\n    chainId: 4,\n    id: 'rinkeby',\n    name: 'Rinkeby',\n  },\n  {\n    chainId: 5,\n    id: 'goerli',\n    name: 'Goerli',\n  },\n  {\n    chainId: 42,\n    id: 'kovan',\n    name: 'Kovan',\n  },\n  {\n    chainId: 1337,\n    id: 'private',\n    name: 'Private chain',\n  },\n  {\n    chainId: 5777,\n    id: 'ganache',\n    name: 'Ganache',\n  },\n];\n","import React, { useState } from 'react';\nimport {\n  Button,\n  Card,\n  CardContent,\n  CardHeader,\n  Grid,\n} from '@material-ui/core';\n\nimport { useActions } from '../../../actions';\nimport { useComponentsByPageId } from '../../../contexts/AppTemplateContext';\n\nimport { COMPONENT_TYPES, componentForType } from '.';\nimport { defaultLayout } from '../Page';\n\nexport const NewComponent = ({page_id, row, column, preSave}) => {\n  const [componentType, setComponentType] = useState();\n  const { addComponent } = useActions();\n  const existingComponents = useComponentsByPageId(page_id);\n\n  const onCancel = () => { setComponentType(undefined); }\n\n  const onCreate = (component) => {\n    let layout = Object.assign({}, defaultLayout);\n    if (row) {\n      layout.row = row;\n    } else {\n      let maxRow = 0;\n      Object.keys(existingComponents).forEach(componentKey => {\n        const existingRow = (existingComponents[componentKey].layout || defaultLayout).row;\n        if (existingRow > maxRow) {\n          maxRow = existingRow;\n        }\n      });\n      layout.row = maxRow + 1;\n    }\n    layout.column = column || 1;\n    if (preSave) { preSave(); }\n    addComponent({...component, __page_id: page_id, layout });\n  }\n\n  if (componentType) {\n    const EditComponent = componentForType(componentType, 'new');\n    return <EditComponent onCancel={onCancel} onCreate={onCreate} />;\n  }\n\n  return (\n    <div>\n      <Card>\n        <CardHeader title=\"New Component\" />\n        <CardContent>\n\n        <Grid container>\n          { COMPONENT_TYPES.map(componentType => (\n            <Grid item key={componentType.value} spacing={3}>\n              <Card >\n                <CardContent>\n                  <Button onClick={() => setComponentType(componentType.value)}>{ componentType.label }</Button>\n                </CardContent>\n              </Card>\n            </Grid>\n          )) }\n        </Grid>\n      </CardContent>\n    </Card>\n\n    </div>\n  );\n};\n","import React from 'react';\nimport {\n  FormControl,\n  FormHelperText,\n  InputLabel,\n  MenuItem,\n  Select,\n} from '@material-ui/core';\n\nexport const SelectField = ({\n  label,\n  error,\n  value,\n  helperText,\n  children,\n  options,\n  fullWidth,\n  ...rest\n}) => {\n\n  return (\n    <FormControl fullWidth={fullWidth}>\n      {label && <InputLabel error={error}>{label}</InputLabel>}\n      <Select\n        value={value}\n        {...rest}\n        error={error}\n      >\n        {options.map((option) => {\n          return <MenuItem key={option.value} value={option.value}>{option.label}</MenuItem>\n        })}\n      </Select>\n      <FormHelperText error={error}>{helperText}</FormHelperText>\n    </FormControl>\n  );\n}\n","import { useMemo, useState, useEffect } from 'react';\n\nimport { useWeb3React } from '@web3-react/core'\nimport { InjectedConnector } from '@web3-react/injected-connector'\nimport { ethers } from 'ethers';\n\nimport { NETWORKS } from '../constants';\nimport { useAddress } from '../contexts/AppTemplateContext';\n\nexport const injected = new InjectedConnector({ supportedChainIds: NETWORKS.map(n => n.chainId) })\n\nexport const shortenTxHash = (hash) =>\n  `${hash.substr(0,6)}...${hash.substr(62,4)}`;\n\nexport const useContractByAddress = (address, network) => {\n  const addressRecord = useAddress(address, network);\n  const { library, account, active } = useWeb3React();\n\n  const { abi } = addressRecord;\n\n  return useMemo(() => {\n    if (!abi) { return; }\n    const provider = active ?  new UncheckedJsonRpcSigner(library.getSigner(account)) : ethers.getDefaultProvider();\n    return new ethers.Contract(address, abi, provider);\n  }, [address, network, account, library, active]);\n};\n\nexport const useHasSigner = () => {\n  const { library, account, active } = useWeb3React();\n\n  try {\n    const provider = new UncheckedJsonRpcSigner(library.getSigner(account));\n    return provider !== undefined;\n  } catch (err) {\n    return false;\n  }\n};\n\nexport const useWeb3ConnectExisting = () => {\n  const { activate, active, chainId,library } = useWeb3React();\n  const [tried, setTried] = useState(false);\n\n  useEffect(() => {\n    injected.isAuthorized().then((isAuthorized) => {\n      if (isAuthorized) {\n        activate(injected, undefined, true).catch((err) => {\n          // TODO: Push this error to UI?  Can be \"unsupported chain Id\"..\n          console.warn(err);\n          setTried(true);\n        })\n      } else {\n        setTried(true)\n      }\n    })\n  }, []);\n\n  useEffect(() => {\n    if (!tried && active) {\n      setTried(true)\n    }\n  }, [tried, active]);\n\n    return tried;\n};\n\n\nclass UncheckedJsonRpcSigner extends ethers.Signer {\n  //  /*readonly*/ signer: ethers.providers.JsonRpcSigner;\n\n  constructor(signer/*: ethers.providers.JsonRpcSigner*/) {\n    super();\n    ethers.utils.defineReadOnly(this, 'signer', signer);\n    ethers.utils.defineReadOnly(this, 'provider', signer.provider);\n  }\n\n  getAddress()/*: Promise<string> */ {\n    return this.signer.getAddress();\n  }\n\n  sendTransaction(transaction/*:TransactionRequest*/) /*: Promise<TransactionResponse> */ {\n    return this.signer.sendUncheckedTransaction(transaction).then((hash) => {\n      return {\n        hash: hash,\n        nonce: null,\n        gasLimit: null,\n        gasPrice: null,\n        data: null,\n        value: null,\n        chainId: null,\n        confirmations: 0,\n        from: null,\n        wait: (confirmations/*?: number*/) => { return this.provider.waitForTransaction(hash, confirmations); }\n      };\n    });\n  }\n\n  signMessage(message/*: string | ethers.utils.Arrayish*/)/*: Promise<string> */ {\n    return this.signer.signMessage(message);\n  }\n}\n","import React, { useEffect } from 'react';\nimport {\n  Button,\n  Card,\n  CardActions,\n  CardContent,\n  CardHeader,\n  TextField,\n} from '@material-ui/core';\nimport Alert from '@material-ui/lab/Alert';\nimport { useForm } from 'react-hooks-useform';\nimport { Link } from 'react-router-dom';\n\nimport { useContractAddresses } from '../../../../contexts/AppTemplateContext';\nimport { SelectField } from '../../../../components/Controls/SelectField';\n\nimport { useContractByAddress } from '../../../../lib/web3';\n\nexport const NewWeb3Transaction = ({ onCreate, onCancel }) => {\n  const addresses = useContractAddresses();\n\n  const addressOptions = (addresses || []).map(a => ({value: {network: a.network, address: a.address}, label: `${a.name || ''} ${a.address} (${a.network}) `}));\n\n  const [fields, form] = useForm({\n    fields: [\n      {name: 'title', label: 'Title', optional: true},\n      {name: 'description', label: 'Description', optional: true},\n      {name: 'address', label: 'Address', type: 'select', options: addressOptions},\n      {name: 'buttonText', label: 'Button text', optional: true},\n    ],\n    submit: values => {\n      const { address, network } = values.get('address');\n      onCreate({\n        type: 'web3transaction',\n        address,\n        network,\n        signature: values.get('function'),\n        title: values.get('title'),\n        description: values.get('description'),\n        buttonText: values.get('buttonText'),\n      });\n      onCancel();\n    },\n  });\n\n  const addressesExist = addresses && Array.isArray(addresses) && addresses.length === 0;\n  const addAddressLink =  addressesExist ? <Alert severity=\"warning\">\n    <Link to=\"/_/addresses\">\n      Add an Ethereum contract to the address book in order to interact with it.\n    </Link>\n  </Alert> : undefined;\n\n  return (\n    <div>\n      <form.Form disabled={!addressesExist}>\n        <Card>\n          <CardHeader title=\"New Web3 Transaction\" />\n          <CardContent>\n            { addAddressLink }\n\n            <TextField fullWidth {...fields.title} />\n\n            <TextField fullWidth {...fields.description} />\n\n            <SelectField fullWidth {...fields.address} />\n\n            { fields.address.value !== '' ?\n                <SelectFunction {...fields.function } address={fields.address.value.address} network={fields.address.value.network} form={form} fields={fields} />\n                :\n                undefined\n            }\n\n            <TextField fullWidth {...fields.buttonText} />\n\n          </CardContent>\n\n          <CardActions>\n            <Button variant=\"outlined\" color=\"primary\" onClick={form.submit}>Save</Button>\n            <Button variant=\"outlined\" onClick={onCancel}>Cancel</Button>\n          </CardActions>\n\n        </Card>\n      </form.Form>\n    </div>\n  )\n\n};\n\nconst SelectFunction = ({ address, network, form, fields, ...rest }) => {\n  const contract = useContractByAddress(address, network);\n\n  const queries = Object.filter(\n    contract.interface.functions,\n    i => i.type === 'transaction' || i.type === 'call'\n  );\n\n  let queryFuncs = [];\n  Object.keys(queries).forEach(q => {\n    if (q.indexOf('(') > 0) {\n      queryFuncs.push({value: queries[q].signature, label: queries[q].signature});\n    }\n  });\n\n  useEffect(() => {\n    form.addField(\n      {name: 'function', label: 'Function', type: 'select', options: queryFuncs}\n    );\n  }, []);\n\n  if (!fields.function) { return null; }\n\n  return <SelectField {...fields.function } {...rest} />\n};\n","import React, { createContext, useReducer, useContext, useMemo, useEffect, useCallback } from 'react';\nimport { useWeb3React } from '@web3-react/core'\n\n\n// Track transactions\n\nconst Web3Context = createContext();\n\nconst initialState = {\n  transactions: [],\n  blockNumber: {},\n};\n\nconst ADD_TX = 'ADD_TX';\nconst SET_TX_BLOCK_NUM = 'SET_TX_BLOCK_NUM';\nconst SET_TX_RECEIPT = 'SET_TX_RECEIPT';\nconst SET_BLOCK_NUMBER = 'SET_BLOCK_NUMBER';\n\nfunction reducer(state, action) {\n  switch(action.type) {\n\n    case ADD_TX:\n      return {\n        ...state,\n        transactions: {\n          ...state.transactions,\n          [action.payload.hash]: action.payload,\n        },\n      };\n\n    case SET_BLOCK_NUMBER:\n      return {\n        ...state,\n        blockNumber: {\n          ...state.blockNumber,\n          [action.payload.chainId]: action.payload.blockNumber,\n        },\n      };\n\n    case SET_TX_BLOCK_NUM: {\n      const { hash, chainId, blockNumber } = action.payload;\n      // TODO: Actually deal with chainId\n      return {\n        ...state,\n        transactions: {\n          ...state.transactions,\n          [hash]: {\n            ...state.transactions[hash],\n            _checkedBlock: blockNumber,\n          },\n        },\n      };\n    }\n\n    case SET_TX_RECEIPT: {\n      const { hash, chainId, receipt } = action.payload;\n      // TODO: Actually deal with chainId\n      return {\n        ...state,\n        transactions: {\n          ...state.transactions,\n          [hash]: {\n            ...state.transactions[hash],\n            receipt,\n          },\n        },\n      };\n    }\n\n    default:\n      return state;\n  }\n}\n\nexport const Web3ContextProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  const addTx = (tx) => {\n    dispatch({type: ADD_TX, payload: tx});\n  };\n\n  const setTxBlockNumber = (hash, chainId, blockNumber) => {\n    dispatch({type: SET_TX_BLOCK_NUM, payload: {hash, chainId, blockNumber}});\n  };\n\n  const setTxReceipt = useCallback((hash, chainId, receipt) => {\n    dispatch({type: SET_TX_RECEIPT, payload: {hash, chainId, receipt}});\n  }, []);\n\n  const setBlockNumber = useCallback((chainId, blockNumber) => {\n    dispatch({type: SET_BLOCK_NUMBER, payload: {chainId, blockNumber}});\n  }, []);\n\n\n  return (\n    <Web3Context.Provider value={useMemo(() => [state, { addTx, setTxBlockNumber, setTxReceipt, setBlockNumber }], [state, addTx, setTxBlockNumber, setTxReceipt, setBlockNumber])}>\n      { children }\n    </Web3Context.Provider>\n  );\n}\n\nexport const useWeb3Context = () => {\n  return useContext(Web3Context);\n}\n\nexport const useTransactions = () => {\n  const [state] = useWeb3Context();\n  const { transactions } = state;\n  return transactions;\n};\n\nexport const useBlockNumber = (chainId) => {\n  const [state] = useWeb3Context();\n  const { blockNumber } = state;\n  return blockNumber[chainId] || 0;\n};\n\nexport function BlockNumberWatcher() {\n  const { library, chainId } = useWeb3React()\n  const [, { setBlockNumber }] = useWeb3Context();\n\n  // update block number\n  useEffect(() => {\n    if (library) {\n      let stale = false;\n\n      function updateBlockNumber() {\n        library\n          .getBlockNumber()\n          .then(blockNumber => {\n            if (!stale) {\n              setBlockNumber(chainId, blockNumber);\n            }\n          })\n          .catch(() => {\n            if (!stale) {\n              setBlockNumber(chainId, null);\n            }\n          });\n      }\n\n      updateBlockNumber();\n      library.on('block', updateBlockNumber);\n\n      return () => {\n        stale = true;\n        library.removeListener('block', updateBlockNumber);\n      }\n    }\n  }, [chainId, library, setBlockNumber])\n\n  return null;\n}\n\n\nexport function TransactionStatusWatcher() {\n  const { chainId, library } = useWeb3React();\n  const [, { setTxBlockNumber, setTxReceipt }] = useWeb3Context();\n\n  const blockNumber = useBlockNumber(chainId);\n  const transactions = useTransactions();\n\n  useEffect(() => {\n    if ((chainId || chainId === 0) && library) {\n      let stale = false;\n\n      Object.keys(transactions).forEach(hash => {\n        const tx = transactions[hash];\n        if (tx.chainId !== chainId) {\n          // TODO: Support multiple connections to multiple chains\n          return;\n        }\n        if (!!tx.receipt) { return; }\n        if (tx._checkedBlock === blockNumber) { return; }\n\n        library\n          .getTransactionReceipt(hash)\n          .then(receipt => {\n            if (!stale) {\n              if (!receipt) {\n                setTxBlockNumber(hash, chainId, blockNumber);\n              } else {\n                setTxReceipt(hash, chainId, receipt);\n              }\n            }\n          })\n          .catch(() => {\n            setTxBlockNumber(hash, chainId, blockNumber);\n          });\n      });\n\n      return () => {\n        stale = true;\n      }\n    }\n  }, [chainId, library, transactions, blockNumber, setTxBlockNumber, setTxReceipt]);\n\n  return null;\n};\n","import React, { useState } from \"react\";\n\nimport clsx from \"clsx\";\nimport Portal from \"@material-ui/core/Portal\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport ErrorIcon from \"@material-ui/icons/Error\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport SnackbarContent from \"@material-ui/core/SnackbarContent\";\nimport { amber, green } from \"@material-ui/core/colors\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\n  const useStyles = makeStyles(theme => ({\n    success: {\n      backgroundColor: green[600]\n    },\n    error: {\n      backgroundColor: theme.palette.error.dark\n    },\n    info: {\n      backgroundColor: theme.palette.primary.main\n    },\n    warning: {\n      backgroundColor: amber[700]\n    },\n    icon: {\n      fontSize: 20\n    },\n    iconVariant: {\n      opacity: 0.9,\n      marginRight: theme.spacing(1)\n    },\n    message: {\n      display: \"flex\",\n      alignItems: \"center\"\n    }\n  }));\n\nexport const ErrorMsg = ({ message }) => {\n  const variant = \"error\";\n  const [open, setOpen] = useState(true);\n\n  const classes = useStyles();\n\n  const handleClose = (event, reason) => {\n    if (reason === \"clickaway\") {\n      return;\n    }\n\n    setOpen(false);\n  };\n\n  if (!open) {\n    return null;\n  }\n\n  return (\n    <Portal>\n      <Snackbar\n        anchorOrigin={{\n          vertical: \"top\",\n          horizontal: \"center\"\n        }}\n        open={open}\n        onClose={handleClose}\n      >\n        <SnackbarContent\n          className={clsx(classes[variant])}\n          aria-describedby=\"client-snackbar\"\n          message={\n            <span id=\"client-snackbar\">\n              <ErrorIcon className={clsx(classes.icon, classes.iconVariant)} />\n              {message}\n            </span>\n          }\n          action={[\n            <IconButton\n              key=\"close\"\n              aria-label=\"close\"\n              color=\"inherit\"\n              onClick={handleClose}\n            >\n              <CloseIcon className={classes.icon} />\n            </IconButton>\n          ]}\n          onClose={handleClose}\n        />\n      </Snackbar>\n    </Portal>\n  );\n};\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: \"100%\",\n    \"& > * + *\": {\n      marginTop: theme.spacing(2)\n    }\n  }\n}));\n\nexport const Spinner = props => {\n  const { variant, ...rest } = props;\n  const classes = useStyles();\n\n  const SpinnerComponent =\n    variant === \"circle\" ? CircularProgress : LinearProgress;\n\n  return (\n    <div className={classes.root}>\n      <SpinnerComponent {...rest} />\n    </div>\n  );\n};\n","import React, { useState } from \"react\";\nimport {\n  Box,\n  Button,\n  FormHelperText,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport { makeStyles } from \"@material-ui/styles\";\nimport { useForm } from 'react-hooks-useform';\nimport { useWeb3React } from '@web3-react/core'\n\nimport { useWeb3Context } from '../../../../contexts/Web3Context';\n\nimport { NETWORKS } from '../../../../constants';\nimport { useContractByAddress, useHasSigner } from '../../../../lib/web3';\nimport { ErrorMsg } from '../../../../components/Controls/ErrorMsg';\nimport { Spinner } from '../../../../components/Controls/Spinner';\n\n\nconst useStyles = makeStyles(theme => ({\n  root: {},\n    backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: '#fff',\n  },\n}));\n\nexport const ShowWeb3Transaction = ({ component }) => {\n  const classes = useStyles();\n  const contract = useContractByAddress(component.address, component.network);\n  const hasSigner = useHasSigner();\n  const { chainId } = useWeb3React();\n  const [,{ addTx }] = useWeb3Context();\n\n  const [result, setResult] = useState();\n  const [resultLoading, setResultLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const func = contract ? contract.interface.functions[component.signature] : undefined;\n  const funcFields = func ? func.inputs.map(i => ({name: i.name, label: i.name, type: 'text'})) : [];\n  const [fields, form] = useForm({\n    fields: funcFields,\n    submit: async (values) => {\n      if (func.type === 'call') {\n\n        const args = Object.keys(fields).map(fieldKey => values.get(fieldKey));\n        setResultLoading(true);\n        const result = await contract[component.signature](...args);\n        setResult(result);\n        setResultLoading(false);\n\n      } else if (func.type === 'transaction') {\n\n        const args = Object.keys(fields).map(fieldKey => values.get(fieldKey));\n        setResultLoading(true);\n        try {\n          const result = await contract[component.signature](...args);\n          addTx({...result, chainId});\n          setResult(result.hash);\n          setResultLoading(false);\n        } catch (err) {\n          setError(err.toString());\n          setResultLoading(false);\n        }\n      }\n    },\n  });\n\n  const clearForm = () => {\n    form.reset();\n    setResult(undefined);\n  };\n\n  const signerRequired = func.type === 'transaction';\n  const componentNetworkId = NETWORKS.find(n => n.id === component.network).chainId;\n  const networkMismatch = componentNetworkId !== chainId ? `Connect your wallet to ${component.network}` : undefined;\n  const warningText = signerRequired && !hasSigner ? 'Web3 wallet required' : undefined;\n  const disabled = !!(!contract || (signerRequired && !hasSigner) || networkMismatch || warningText);\n\n  if (resultLoading) {\n    return <Spinner />;\n  }\n\n  if (result) {\n    return <Web3TxResult signature={component.signature} result={result} onCancel={clearForm} />;\n  }\n\n  return (\n    <Box className={classes.root}>\n\n      { error ? <ErrorMsg message={error} /> : undefined }\n\n      <Typography variant=\"h5\">{ component.title || '' }</Typography>\n      <Typography>{ component.description || '' }</Typography>\n\n      <form.Form>\n      <Box flex=\"rows\">\n        { Object.keys(fields).map(fieldKey =>\n          <TextField {...fields[fieldKey] } disabled={disabled} key={fieldKey} />\n        ) }\n        <Button color=\"primary\" type=\"submit\" onClick={form.submit} disabled={disabled}>{ component.buttonText || 'Send' }</Button>\n\n        <FormHelperText>\n          { warningText }\n          { networkMismatch }\n        </FormHelperText>\n        </Box>\n      </form.Form>\n\n    </Box>\n  );\n};\n\nconst Web3TxResult = ({ result, onCancel }) => {\n\n  return (\n    <div>\n      Result: { result.toString() }\n\n      <br />\n\n      <Button size=\"small\" onClick={onCancel}>Clear</Button>\n    </div>\n  );\n}\n","import { NewWeb3Transaction } from './NewWeb3Transaction';\nimport { ShowWeb3Transaction } from './ShowWeb3Transaction';\nimport { EditWeb3Transaction } from './EditWeb3Transaction';\nimport { PreviewWeb3Transaction } from './PreviewWeb3Transaction';\n\nexport default {\n  new: NewWeb3Transaction,\n  show: ShowWeb3Transaction,\n  edit: EditWeb3Transaction,\n  preview: PreviewWeb3Transaction,\n}\n","import React from 'react';\nimport {\n  Button,\n  Card,\n  CardActions,\n  CardContent,\n  CardHeader,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport { useForm } from 'react-hooks-useform';\nimport { fromJS } from 'immutable';\n\nimport { useActions } from '../../../../actions';\n\n\nexport const EditWeb3Transaction = ({ component, onCancel, onSave }) => {\n  const { editComponent } = useActions();\n  const initialValues = fromJS({\n    description: component.description,\n    buttonText: component.buttonText,\n  });\n  const [fields, form] = useForm({\n    fields: [\n      {name: 'description', label: 'Description', type: 'text', optional: true},\n      {name: 'buttonText', label: 'Button text', type: 'text', optional: true},\n    ],\n    initialValues,\n    submit: values => {\n      let formValues = {};\n      Array.from(values, ([key, value]) => formValues[key] = value);\n      editComponent({\n        ...component,\n        ...formValues,\n      });\n      onSave();\n    },\n  });\n\n  return (\n    <div>\n      <form.Form>\n        <Card>\n          <CardHeader title=\"Edit Web3 component\" />\n          <CardContent>\n\n            <Typography>Address: { component.address }</Typography>\n\n            <br />\n\n            <Typography>Function: { component.signature }</Typography>\n\n            <br />\n\n            <TextField {...fields.description } />\n\n            <br />\n\n            <TextField {...fields.buttonText } />\n\n          </CardContent>\n\n          <CardActions>\n            <Button color=\"primary\" variant=\"outlined\" onClick={form.submit}>Save</Button>\n\n            <Button variant=\"outlined\" onClick={onCancel}>Cancel</Button>\n          </CardActions>\n        </Card>\n      </form.Form>\n    </div>\n  );\n}\n","import React from 'react';\n\nimport {\n  Typography,\n} from '@material-ui/core';\n\nexport const PreviewWeb3Transaction = ({ component }) => {\n\n  return (\n    <div>\n      <Typography><strong>{ component.title }</strong></Typography>\n      <Typography>{ component.nework } { component.address } { component.signature }</Typography>\n    </div>\n  );\n}\n","import React, { useEffect } from 'react';\nimport {\n  Button,\n  Card,\n  CardActions,\n  CardContent,\n  CardHeader,\n  TextField,\n} from '@material-ui/core';\nimport Alert from '@material-ui/lab/Alert';\nimport { useForm } from 'react-hooks-useform';\nimport { Link } from 'react-router-dom';\n\nimport { useContractAddresses } from '../../../../contexts/AppTemplateContext';\nimport { SelectField } from '../../../../components/Controls/SelectField';\n\nimport { useContractByAddress } from '../../../../lib/web3';\n\nexport const NewWeb3Call = ({ onCreate, onCancel }) => {\n  const addresses = useContractAddresses();\n\n  const addressOptions = (addresses || []).map(a => ({value: {network: a.network, address: a.address}, label: `${a.name || ''} ${a.address} (${a.network}) `}));\n\n  const [fields, form] = useForm({\n    fields: [\n      {name: 'title', label: 'Title', optional: true},\n      {name: 'description', label: 'Description', optional: true},\n      {name: 'address', label: 'Address', type: 'select', options: addressOptions},\n      {name: 'buttonText', label: 'Button text', optional: true},\n    ],\n    submit: values => {\n      const { address, network } = values.get('address');\n      onCreate({\n        type: 'web3call',\n        address,\n        network,\n        signature: values.get('function'),\n        title: values.get('title'),\n        description: values.get('description'),\n      });\n      onCancel();\n    },\n  });\n\n  const addressesExist = addresses && Array.isArray(addresses) && addresses.length === 0;\n  const addAddressLink =  addressesExist ? <Alert severity=\"warning\">\n    <Link to=\"/_/addresses\">\n      Add an Ethereum contract to the address book in order to interact with it.\n    </Link>\n  </Alert> : undefined;\n\n  return (\n    <div>\n      <form.Form disabled={!addressesExist}>\n        <Card>\n          <CardHeader title=\"New Web3 Call\" />\n          <CardContent>\n            { addAddressLink }\n\n            <TextField fullWidth {...fields.title} />\n\n            <TextField fullWidth {...fields.description} />\n\n            <SelectField fullWidth {...fields.address} />\n\n            { fields.address.value !== '' ?\n                <SelectFunction {...fields.function } address={fields.address.value.address} network={fields.address.value.network} form={form} fields={fields} />\n                :\n                undefined\n            }\n\n          </CardContent>\n\n          <CardActions>\n            <Button variant=\"outlined\" color=\"primary\" onClick={form.submit}>Save</Button>\n            <Button variant=\"outlined\" onClick={onCancel}>Cancel</Button>\n          </CardActions>\n\n        </Card>\n      </form.Form>\n    </div>\n  )\n\n};\n\nconst SelectFunction = ({ address, network, form, fields, ...rest }) => {\n  const contract = useContractByAddress(address, network);\n\n  const queries = Object.filter(\n    contract.interface.functions,\n    i => i.type === 'call'\n  );\n\n  let queryFuncs = [];\n  Object.keys(queries).forEach(q => {\n    if (q.indexOf('(') > 0) {\n      queryFuncs.push({value: queries[q].signature, label: queries[q].signature});\n    }\n  });\n\n  useEffect(() => {\n    form.addField(\n      {name: 'function', label: 'Function', type: 'select', options: queryFuncs}\n    );\n  }, []);\n\n  if (!fields.function) { return null; }\n\n  return <SelectField {...fields.function } {...rest} />\n};\n","import React, { useState, useEffect } from \"react\";\nimport {\n  Box,\n  Button,\n  FormHelperText,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport { makeStyles } from \"@material-ui/styles\";\nimport { useForm } from 'react-hooks-useform';\nimport { useWeb3React } from '@web3-react/core'\n\nimport { useWeb3Context } from '../../../../contexts/Web3Context';\n\nimport { NETWORKS } from '../../../../constants';\nimport { useContractByAddress, useHasSigner } from '../../../../lib/web3';\nimport { ErrorMsg } from '../../../../components/Controls/ErrorMsg';\nimport { Spinner } from '../../../../components/Controls/Spinner';\n\n\nconst useStyles = makeStyles(theme => ({\n  root: {},\n    backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: '#fff',\n  },\n}));\n\nexport const ShowWeb3Call = ({ component }) => {\n  const classes = useStyles();\n  const contract = useContractByAddress(component.address, component.network);\n  const hasSigner = useHasSigner();\n  const { chainId } = useWeb3React();\n\n  const [result, setResult] = useState();\n  const [resultLoading, setResultLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  const func = contract ? contract.interface.functions[component.signature] : undefined;\n\n  useEffect(() => {\n    (async () => {\n      const args = []; // TODO: component can have default args\n        const result = await contract[component.signature](...args);\n        setResult(result);\n        setResultLoading(false);\n    })();\n  }, []);\n\n  const componentNetworkId = NETWORKS.find(n => n.id === component.network).chainId;\n  const disabled = !!(!contract);\n  const displayResult = result ? <Web3CallResult result={result} /> : null;\n\n  return (\n    <Box className={classes.root}>\n\n      { error ? <ErrorMsg message={error} /> : undefined }\n\n      <Typography variant=\"h5\">{ component.title || '' }</Typography>\n      <Typography>{ component.description || '' }</Typography>\n\n      <Box flex=\"rows\">\n        { displayResult }\n      </Box>\n\n    </Box>\n  );\n};\n\nconst Web3CallResult = ({ result }) => {\n\n  return (\n    <div>\n      { result.toString() }\n    </div>\n  );\n}\n","import { NewWeb3Call } from './NewWeb3Call';\nimport { ShowWeb3Call } from './ShowWeb3Call';\nimport { EditWeb3Call } from './EditWeb3Call';\nimport { PreviewWeb3Call } from './PreviewWeb3Call';\n\nexport default {\n  new: NewWeb3Call,\n  show: ShowWeb3Call,\n  edit: EditWeb3Call,\n  preview: PreviewWeb3Call,\n}\n","import React from 'react';\nimport {\n  Button,\n  Card,\n  CardActions,\n  CardContent,\n  CardHeader,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport { useForm } from 'react-hooks-useform';\nimport { fromJS } from 'immutable';\n\nimport { useActions } from '../../../../actions';\n\n\nexport const EditWeb3Call = ({ component, onCancel, onSave }) => {\n  const { editComponent } = useActions();\n  const initialValues = fromJS({\n    description: component.description,\n    buttonText: component.buttonText,\n  });\n  const [fields, form] = useForm({\n    fields: [\n      {name: 'description', label: 'Description', type: 'text', optional: true},\n      {name: 'buttonText', label: 'Button text', type: 'text', optional: true},\n    ],\n    initialValues,\n    submit: values => {\n      let formValues = {};\n      Array.from(values, ([key, value]) => formValues[key] = value);\n      editComponent({\n        ...component,\n        ...formValues,\n      });\n      onSave();\n    },\n  });\n\n  return (\n    <div>\n      <form.Form>\n        <Card>\n          <CardHeader title=\"Edit Web3 component\" />\n          <CardContent>\n\n            <Typography>Address: { component.address }</Typography>\n\n            <br />\n\n            <Typography>Function: { component.signature }</Typography>\n\n            <br />\n\n            <TextField {...fields.description } />\n\n            <br />\n\n            <TextField {...fields.buttonText } />\n\n          </CardContent>\n\n          <CardActions>\n            <Button color=\"primary\" variant=\"outlined\" onClick={form.submit}>Save</Button>\n\n            <Button variant=\"outlined\" onClick={onCancel}>Cancel</Button>\n          </CardActions>\n        </Card>\n      </form.Form>\n    </div>\n  );\n}\n","import React from 'react';\n\nimport {\n  Typography,\n} from '@material-ui/core';\n\nexport const PreviewWeb3Call = ({ component }) => {\n\n  return (\n    <div>\n      <Typography><strong>{ component.title }</strong></Typography>\n      <Typography>{ component.nework } { component.address } { component.signature }</Typography>\n    </div>\n  );\n}\n","// graphql helpers\n\nexport function typeNameToQueryMany(typeName, schema) {\n  const queryType = schema.types.find(t => t.kind === 'OBJECT' && t.name === 'Query');\n  const field = queryType.fields.find(f =>\n    f.type.kind === 'NON_NULL' &&\n    f.type.ofType &&\n    f.type.ofType.kind === 'LIST' &&\n    f.type.ofType.ofType.kind === 'NON_NULL' &&\n    f.type.ofType.ofType.ofType.kind === 'OBJECT' &&\n    f.type.ofType.ofType.ofType.name === typeName\n  );\n  return field ? field.name : undefined;\n};\n\nexport function typeNameToQuerySingle(typeName, schema) {\n  const queryType = schema.types.find(t => t.kind === 'OBJECT' && t.name === 'Query');\n  const field = queryType.fields.find(f =>\n    f.type.kind === 'OBJECT' &&\n    f.type.name === typeName\n  );\n  return field ? field.name : undefined;\n};\n\nexport function fieldsForTypeName(typeName, schema) {\n  const type = schema.types.find(t => t.kind === 'OBJECT' && t.name === typeName);\n  const fields = type.fields.map(f => normalizeFieldType(f));\n  return fields;\n};\n\nexport function normalizeFieldType(field) {\n  // LIST of Objects\n  if (field.type.ofType && field.type.ofType.kind === 'LIST' && field.type.ofType.ofType.ofType.kind === 'OBJECT') {\n    return {\n      name: field.name,\n      kind: 'LIST',\n      type: field.type.ofType.ofType.ofType.name,\n    };\n  }\n\n  // LIST of SCALARS\n  if (field.type.ofType && field.type.ofType.kind === 'LIST' && field.type.ofType.ofType.ofType.kind === 'SCALAR') {\n    return {\n      name: field.name,\n      kind: 'SCALAR',\n      type: field.type.ofType.ofType.ofType.name,\n    };\n  }\n\n  // NON_NULL\n  if (field.type.kind === 'NON_NULL') {\n    return {\n      name: field.name,\n      kind: field.type.ofType.kind,\n      type: field.type.ofType.name,\n    };\n  }\n\n  // ID or Object or Scalar\n  return {\n    name: field.name,\n    kind: field.type.kind,\n    type: field.type.name,\n  };\n}\n","import React, { useState } from 'react';\nimport {\n  Button,\n  Card,\n  CardActions,\n  CardContent,\n  CardHeader,\n  List,\n  ListItem,\n  ListItemText,\n  Typography,\n} from '@material-ui/core';\n\nimport { useAppTemplate } from '../../../../contexts/AppTemplateContext';\nimport { useRemoteSchema } from '../../../../lib/thegraph';\nimport { typeNameToQueryMany, typeNameToQuerySingle, normalizeFieldType } from '../../../../lib/graphql';\nimport { Spinner } from '../../../../components/Controls/Spinner';\n\nexport const NewDatatable = ({ onCreate, onCancel }) => {\n  const appTemplate = useAppTemplate();\n  const { integrations } = appTemplate;\n  const [selectedModel, setSelectedModel] = useState();\n  const [selectedFields, setSelectedFields] = useState();\n\n  // TODO: Select Graph datalink if multiple\n  const thegraphLinks = Object.filter(integrations, i => i.type === 'thegraph');\n\n  const dataLink = thegraphLinks[0];\n  const remoteSchema = useRemoteSchema(dataLink.endpoint);\n\n  if (!remoteSchema) {\n    return <Spinner />;\n  }\n\n  const handleOnCreate = () => {\n    // determine field types\n    const model = remoteSchema.types.find(\n      t => t.kind === 'OBJECT' &&\n      t.name === selectedModel);\n\n    const singleQuery = typeNameToQuerySingle(selectedModel, remoteSchema);\n    const listQuery = typeNameToQueryMany(selectedModel, remoteSchema);\n\n    const fields = model.fields.map((field, order) => {\n      const { description, name } = field;\n      const enabled = selectedFields.includes(field.name);\n\n      let newField = normalizeFieldType(field);\n      newField.description = description;\n      newField.name = name;\n      newField.order = order;\n      newField.enabled = enabled;\n\n      return newField;\n    });\n\n    onCreate({\n      type: 'datatable',\n      options: { typeName: selectedModel, fields, singleQuery, listQuery },\n      data_source: {type: dataLink.type, endpoint: dataLink.endpoint },\n    });\n  };\n\n  return (\n    <Card>\n      <CardHeader title=\"Adding Data Table\" />\n      <CardContent>\n\n        <Typography gutterBottom>Selected data link: { dataLink.endpoint }</Typography>\n\n        <br />\n\n        { selectedModel ?\n            <Typography gutterBottom>Selected model: { selectedModel }</Typography>\n            :\n            <ModelSelect schema={remoteSchema} onNext={setSelectedModel} />\n        }\n\n        { selectedFields ?\n            <Typography gutterBottom>Selected fields: { selectedFields.join(', ') }</Typography>\n            :\n            <FieldsSelect schema={remoteSchema} model={selectedModel} onNext={setSelectedFields} />\n        }\n\n      </CardContent>\n      <CardActions>\n        <Button disabled={!selectedModel || !selectedFields} onClick={handleOnCreate}>Create Data Table</Button>\n        <Button onClick={onCancel}>Cancel</Button>\n      </CardActions>\n\n    </Card>\n  );\n};\n\nconst ModelSelect = ({ schema, onNext }) => {\n  const [selectedModel, setSelectedModel] = useState();\n\n  if (!schema) {\n    return <Spinner />;\n  }\n\n  const models = schema.types.filter(\n    t => t.kind === 'OBJECT' &&\n    t.name.substr(0, 2) !== '__' &&\n    t.name !== schema.queryType.name && t.name !== schema.subscriptionType.name\n  );\n\n  return (\n    <div>\n      <Typography>Select model:</Typography>\n      <Button disabled={selectedModel === undefined} variant=\"outlined\" color=\"primary\" onClick={() => onNext(selectedModel)}>Next</Button>\n      <List dense={true}>\n        {  models.map(model => (\n          <ListItem key={model.name}\n            selected={model.name === selectedModel}\n            onClick={() => model.name === selectedModel ? setSelectedModel(undefined) : setSelectedModel(model.name)}\n          >\n            <ListItemText\n              primary={model.name}\n              secondary={model.description}\n            />\n          </ListItem>\n        )) }\n      </List>\n\n    </div>\n  );\n}\n\nconst FieldsSelect = ({ schema, model, onNext }) => {\n  const [selectedFields, setSelectedFields] = useState([]);\n\n  if (!model) {\n    return <div></div>;\n  }\n\n  const fields = schema.types.find(t => t.name === model).fields;\n\n  const toggleSelected = (field) => {\n    if (selectedFields.includes(field)) {\n      setSelectedFields(selectedFields.filter(f => f !== field));\n    } else {\n      setSelectedFields([field, ...selectedFields]);\n    }\n  };\n\n  const selectAll = () => {\n    setSelectedFields(fields.map(f => f.name));\n  };\n\n  return (\n    <div>\n      <Typography>Select fields:</Typography>\n      <Button disabled={selectedFields.length === 0} variant=\"outlined\" color=\"primary\" onClick={() => onNext(selectedFields)}>Next</Button>\n      <Typography onClick={selectAll}>Select All</Typography>\n      <List dense={true}>\n        {  fields.map(field => (\n          <ListItem key={field.name}\n            selected={selectedFields.includes(field.name)}\n            onClick={() => toggleSelected(field.name)}\n          >\n            <ListItemText\n              primary={field.name}\n              secondary={field.description}\n            />\n          </ListItem>\n        )) }\n      </List>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport { makeStyles } from \"@material-ui/styles\";\nimport {\n  Button,\n  Table,\n  TableBody,\n  TableCell,\n  TableRow,\n  Typography,\n} from '@material-ui/core';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\n\nimport gql from \"graphql-tag\";\nimport { useQuery } from \"@apollo/react-hooks\";\n\nimport { Spinner } from \"../../../../components/Controls/Spinner\";\n\nconst useStyles = makeStyles(theme => ({\n  fakelink: {\n    cursor: 'pointer',\n    textDecoration: 'underline',\n  },\n}));\n\nexport const Query = ({ graph_client, model, id, fields, onCancel, setSelectedQuery }) => {\n  const classes = useStyles();\n  const [expandLists, setExpandLists] = useState({});\n\n  if (!model) { throw new Error('Model name required'); }\n\n  const toggleExpand = (field) => {\n    if (expandLists[field]) {\n      setExpandLists({...expandLists, [field]: false});\n    } else {\n      setExpandLists({...expandLists, [field]: true});\n    }\n  };\n\n  const fieldQuery = field => {\n    if (field.kind === 'LIST' || field.kind === 'OBJECT') {\n      return `${field.name} { id }`;\n    } else {\n      return field.name;\n    }\n  };\n\n  const query = gql`\n    query Query {\n      ${model}(id: \"${id}\") {\n        ${fields.map(fieldQuery).join('\\n')}\n      }\n    }\n  `;\n\n  const { loading, error, data } = useQuery(query, {\n    client: graph_client,\n  });\n\n  if (loading) {\n    return <Spinner />;\n  }\n\n  if (error) {\n    return <div>Error: {error.toString()}</div>;\n  }\n\n  const renderCell = (value) => {\n    if (value === null) { return value; }\n    if (typeof(value) === 'string') { return value; }\n    if (typeof(value) === 'object' && !!value.id && !!value.__typename) {\n      return <div\n        className={classes.fakelink}\n        onClick={() => setSelectedQuery({model: value.__typename, id: value.id})}\n      >\n        { value.__typename} - { value.id }\n      </div>;\n    }\n\n    return value;\n  }\n\n  const rows = Object.keys(data[model]).filter(k => k.substr(0,2) !== '__');\n  const m = data[model];\n\n  return (\n    <div>\n      <Typography variant=\"h5\">\n        {model}\n      </Typography>\n      <Typography variant=\"h6\">\n        {id}\n      </Typography>\n      <Table>\n        <TableBody>\n          { rows.map(rowName =>\n            <>\n            <TableRow>\n              <TableCell>\n                <strong>{rowName}</strong>\n              </TableCell>\n              <TableCell>\n                { Array.isArray(m[rowName]) ?\n                    <div className={classes.fakelink} onClick={() => toggleExpand(rowName)}>\n                      { m[rowName].length } { m[rowName].length > 0 ? m[rowName][0].__typename ? m[rowName][0].__typename : 'record' : undefined}{m[rowName].length > 1 ? 's' : undefined}\n                      { expandLists[rowName] ? <KeyboardArrowDownIcon /> : <ChevronRightIcon /> }\n                    </div>\n                    : renderCell(data[model][rowName])\n                }\n              </TableCell>\n            </TableRow>\n            { Array.isArray(m[rowName]) && expandLists[rowName] ?\n                m[rowName].map((row, k) =>\n                <TableRow key={`${row}-${k}`}>\n                <TableCell></TableCell>\n                <TableCell>\n                  { renderCell(row) }\n                </TableCell>\n                  </TableRow>\n                )\n                : undefined }\n            </>\n\n            ) }\n\n          </TableBody>\n        </Table>\n\n        <br />\n\n        <Button variant=\"outlined\" onClick={onCancel}>Back</Button>\n      </div>\n  );\n}\n","import React from 'react';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport {\n  IconButton,\n} from '@material-ui/core';\nimport FirstPageIcon from '@material-ui/icons/FirstPage';\nimport KeyboardArrowLeft from '@material-ui/icons/KeyboardArrowLeft';\nimport KeyboardArrowRight from '@material-ui/icons/KeyboardArrowRight';\nimport LastPageIcon from '@material-ui/icons/LastPage';\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexShrink: 0,\n    marginLeft: theme.spacing(2.5),\n  },\n}));\n\nexport const TablePaginationActions = ({ count, page, pageCount, rowsPerPage, onChangePage }) => {\n  const classes = useStyles();\n  const theme = useTheme();\n\n  const handleFirstPageButtonClick = (event) => {\n    onChangePage(event, 0);\n  };\n\n  const handleBackButtonClick = (event) => {\n    onChangePage(event, page - 1);\n  };\n\n  const handleNextButtonClick = (event) => {\n    onChangePage(event, page + 1);\n  };\n\n  // TODO: Need  count\n  //const handleLastPageButtonClick = (event) => {\n    //onChangePage(event, Math.max(0, Math.ceil(count / rowsPerPage) - 1));\n  //};\n\n  return (\n    <div className={classes.root}>\n      <IconButton\n        onClick={handleFirstPageButtonClick}\n        disabled={page === 0}\n        aria-label=\"first page\"\n      >\n        {theme.direction === 'rtl' ? <LastPageIcon /> : <FirstPageIcon />}\n      </IconButton>\n      <IconButton onClick={handleBackButtonClick} disabled={page === 0} aria-label=\"previous page\">\n        {theme.direction === 'rtl' ? <KeyboardArrowRight /> : <KeyboardArrowLeft />}\n      </IconButton>\n      <IconButton\n        onClick={handleNextButtonClick}\n        disabled={pageCount < rowsPerPage}\n        aria-label=\"next page\"\n      >\n        {theme.direction === 'rtl' ? <KeyboardArrowLeft /> : <KeyboardArrowRight />}\n      </IconButton>\n      <IconButton\n        disabled={true /*page >= Math.ceil(count / rowsPerPage) - 1 */}\n        aria-label=\"last page\"\n      >\n        {theme.direction === 'rtl' ? <FirstPageIcon /> : <LastPageIcon />}\n      </IconButton>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableFooter,\n  TablePagination,\n  TableHead,\n  TableRow,\n} from \"@material-ui/core\";\n\nimport { TablePaginationActions } from './TablePaginationActions';\nimport { Spinner } from \"../../../../components/Controls/Spinner\";\n\nimport gql from \"graphql-tag\";\nimport { useQuery } from \"@apollo/react-hooks\";\n\n\nconst useStyles = makeStyles(theme => ({\n  root: {},\n  submitButton: {},\n  error: {\n    color: \"red\"\n  },\n  fakelink: {\n    cursor: 'pointer',\n    textDecoration: 'underline',\n  },\n}));\n\nconst PER_PAGE_OPTS = [10, 25, 50];\n\nexport const ShowDatatable = ({ component, setSelectedQuery, graph_client }) => {\n  const classes = useStyles();\n  const { fields } = component.options;\n  const [page, setPage] = useState(0);\n  const [perPage, setPerPage] = useState(PER_PAGE_OPTS[0]);\n\n  const queryFields = fields.filter(f => f.type === 'ID' || (f.enabled && f.kind !== 'LIST'));\n  const skip = page * perPage;\n\n  const query = gql`\n      query Query {\n        ${component.options.listQuery}(first: ${perPage}, skip: ${skip}) {\n          ${queryFields.map(f => f.name).join('\\n')}\n        }\n      }\n    `;\n\n  const { loading, error, data } = useQuery(query, {\n    client: graph_client,\n  });\n\n  if (loading) {\n    return <Spinner />;\n  }\n\n  if (error) {\n    return <div>Error: {error.toString()}</div>;\n  }\n\n  // hacky\n  const rows = data[Object.keys(data)[0]];\n\n  if (rows.length < 1) {\n    return <div>No data</div>;\n  }\n\n  const cols = Object.keys(rows[0]).filter(r => r.substr(0, 2) !== \"__\");\n\n  function renderCell(value, colName, type) {\n    if (colName === 'id') {\n      return <div className={classes.fakelink} onClick={() => setSelectedQuery({model: type, id: value})}>{ value }</div>\n    }\n\n    return value;\n  }\n\n  const handleChangePage = (evt, page) => {\n    setPage(page);\n  };\n\n  const handleChangeRowsPerPage = (evt => {\n    setPerPage(parseInt(evt.target.value));\n  });\n\n  return (\n    <div className={classes.root}>\n      <TableContainer>\n        <Table className={classes.table} aria-label=\"table\">\n          <TableHead>\n            <TableRow>\n              {cols.map((c, k) => (\n                <TableCell key={`col-${k}`}>\n                  {c}\n                </TableCell>\n              ))}\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {rows.map((r, k) => (\n              <TableRow key={`row-${k}`}>\n                {cols.map((c, kk) => (\n                  <TableCell key={`cell-${k}-${kk}`}>\n                    { renderCell(r[c], c, r.__typename) }\n                  </TableCell>\n                ))}\n              </TableRow>\n            ))}\n          </TableBody>\n\n          <TableFooter>\n            <TableRow>\n              <TablePagination\n                rowsPerPageOptions={PER_PAGE_OPTS}\n                count={-1}\n                colSpan={3}\n                rowsPerPage={perPage}\n                page={page}\n                SelectProps={{\n                  inputProps: { 'aria-label': 'rows per page' },\n                  native: true,\n                }}\n                onChangePage={handleChangePage}\n                onChangeRowsPerPage={handleChangeRowsPerPage}\n                ActionsComponent={TablePaginationActions}\n              />\n            </TableRow>\n          </TableFooter>\n\n        </Table>\n      </TableContainer>\n    </div>\n  );\n};\n","import { EditDatatable } from './EditDatatable';\nimport { NewDatatable } from './NewDatatable';\nimport { PreviewDatatable } from './PreviewDatatable';\nimport { GraphQLComponent } from './GraphQLComponent';\n\nexport default {\n  edit: EditDatatable,\n  new: NewDatatable,\n  preview: PreviewDatatable,\n  show: GraphQLComponent,\n}\n","import React, { useState } from 'react';\nimport {\n  Button,\n  Card,\n  CardActions,\n  CardContent,\n  CardHeader,\n  Checkbox,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemSecondaryAction,\n  ListItemText,\n  Typography,\n} from '@material-ui/core';\n\nimport { useActions } from '../../../../actions';\n\nexport const EditDatatable = ({ component, onCancel, onSave }) => {\n  const { editComponent } = useActions();\n\n  const componentFields = component.options.fields;\n  const initialChecked = componentFields.map((f,k) => f.enabled ? k : undefined).filter(f => !!f);\n  const [checked, setChecked] = useState(initialChecked);\n\n  const handleToggle = (value) => () => {\n    const currentIndex = checked.indexOf(value);\n    const newChecked = [...checked];\n    if (currentIndex === -1) {\n      newChecked.push(value);\n    } else {\n      newChecked.splice(currentIndex, 1);\n    }\n    setChecked(newChecked);\n  };\n\n  const handleSubmit = () => {\n    let newComponent = Object.assign({}, component);\n    // apply checks\n    newComponent.options.fields.forEach((f,k) => {\n      newComponent.options.fields[k].enabled = checked.includes(k);\n    });\n    editComponent(newComponent);\n    onSave();\n  }\n\n  return (\n    <div>\n      <Card>\n        <CardHeader title=\"Editing component\" />\n        <CardContent>\n          <Typography gutterBottom>Fields</Typography>\n          <List dense={false}>\n            { componentFields && componentFields.map((field,k) => (\n              <ListItem key={k} value={k} button onClick={handleToggle(k)}>\n                <ListItemIcon>\n                  <Checkbox\n                    edge=\"start\"\n                    checked={checked.indexOf(k) !== -1}\n                    tabIndex={-1}\n                    disableRipple\n                    inputProps={{ 'aria-labelledby': 'checkbox-list-label-' }}\n                  />\n                </ListItemIcon>\n                <ListItemText\n                  primary={field.name}\n                  secondary={field.type}\n                />\n                <ListItemSecondaryAction>\n                </ListItemSecondaryAction>\n              </ListItem>\n            )) }\n          </List>\n        </CardContent>\n\n        <CardActions>\n          <Button variant=\"outlined\" color=\"primary\" onClick={handleSubmit}>Save</Button>\n          <Button variant=\"outlined\" onClick={onCancel}>Cancel</Button>\n        </CardActions>\n      </Card>\n    </div>\n  );\n};\n","import React from 'react';\nimport {\n  Typography,\n} from '@material-ui/core';\n\nexport const PreviewDatatable = ({ component }) => {\n\n  return (\n    <div>\n      <Typography>Data source: { component.data_source.endpoint }</Typography>\n      <Typography>Type: { component.options.typeName }</Typography>\n      <Typography>Fields: { component.options.fields.map(f => f.name).join(' ') }</Typography>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\n\nimport { Query } from \"./Query\";\nimport { ShowDatatable } from './ShowDatatable';\nimport { useIntegration } from '../../../../contexts/AppTemplateContext';\nimport { useRemoteSchema } from '../../../../lib/thegraph';\nimport { typeNameToQuerySingle, fieldsForTypeName } from '../../../../lib/graphql';\nimport { Spinner } from '../../../../components/Controls/Spinner';\n\nexport const GraphQLComponent = ({ component }) => {\n  const integration = useIntegration(component.data_source.type, component.data_source.endpoint);\n  const [selectedQuery, setSelectedQuery] = useState();\n  const needSchema = selectedQuery !== undefined && selectedQuery.model !== component.options.typeName;\n  const remoteSchema = useRemoteSchema(needSchema ? integration.endpoint : undefined);\n\n  const onCancel = () => {\n    setSelectedQuery(undefined);\n  };\n\n  if (selectedQuery) {\n\n    if (!remoteSchema && needSchema) {\n      return <Spinner />;\n    }\n\n    const model = needSchema ? typeNameToQuerySingle(selectedQuery.model, remoteSchema) : component.options.singleQuery;\n    const fields = needSchema ? fieldsForTypeName(selectedQuery.model, remoteSchema) : component.options.fields;\n    return <Query\n      model={model}\n      id={selectedQuery.id}\n      fields={fields}\n      graph_client={integration.__instance}\n      schema={remoteSchema}\n      onCancel={onCancel}\n      setSelectedQuery={setSelectedQuery}\n    />;\n  }\n\n  return <ShowDatatable\n    component={component}\n    setSelectedQuery={setSelectedQuery}\n    graph_client={integration.__instance}\n  />\n}\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport ReactMarkdown from \"react-markdown\";\n\nconst useStyles = makeStyles(theme => ({\n  root: {}\n}));\n\nexport const ShowMarkdown = ({ component }) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n\n      <ReactMarkdown source={component.content} />\n    </div>\n  );\n};\n","import { NewComponent } from './NewComponent';\nimport web3TransactionComponents from './Web3Transaction';\nimport web3CallComponents from './Web3Call';\nimport datatableComponents from './Datatable';\nimport markdownComponents from './Markdown';\n\nimport { defaultLayout } from '../../../components/Interface/Page'\n\nconst COMPONENT_TYPES = [\n  { value: 'markdown', label: 'Text', components: markdownComponents },\n  { value: 'datatable', label: 'TheGraph data table', components: datatableComponents },\n  { value: 'web3transaction', label: 'Web3 Transaction', components: web3TransactionComponents },\n  { value: 'web3call', label: 'Web3 Call', components: web3CallComponents },\n];\n\nfunction componentForType(type, componentType) {\n  const componentRecord = COMPONENT_TYPES.find(t => t.value === type);\n  if (!componentRecord) { throw new Error('Unknown component type'); }\n  const component = componentRecord.components[componentType];\n  if (!component) { throw new Error(`No component for \"${type}\" \"${componentType}\"`); }\n  return component;\n}\n\nfunction componentsByColumn(components, colNumber) {\n  let res = [];\n  Object.keys(components).forEach(componentKey => {\n    const component = components[componentKey];\n    const layout = component.layout || defaultLayout;\n    const column = layout.column || 1;\n    if (column === colNumber) {\n      res.push(component);\n    }\n  });\n  const sorted = res.sort((a,b) => (a.layout ? a.layout.row || 0 : 0) - (b.layout ? b.layout.row || 0 : 0));\n  return sorted;\n}\n\nexport {\n  COMPONENT_TYPES,\n  componentForType,\n  componentsByColumn,\n  NewComponent,\n};\n","import { NewMarkdown } from './NewMarkdown';\nimport { EditMarkdown } from './EditMarkdown';\nimport { PreviewMarkdown } from './PreviewMarkdown';\nimport { ShowMarkdown } from './ShowMarkdown';\n\nexport default {\n  new: NewMarkdown,\n  edit: EditMarkdown,\n  preview: PreviewMarkdown,\n  show: ShowMarkdown,\n}\n","import React from 'react';\nimport {\n  Button,\n  Card,\n  CardActions,\n  CardContent,\n  CardHeader,\n  TextField,\n} from '@material-ui/core';\nimport { useForm } from 'react-hooks-useform';\n\n\nexport const NewMarkdown = ({ component, onCancel, onCreate }) => {\n  const [fields, form] = useForm({\n    fields: [\n      { name: 'content', label: 'Content' },\n    ],\n    submit: values => {\n      onCreate({\n        type: 'markdown',\n        content: values.get('content'),\n      });\n      onCancel();\n    },\n  });\n\n  return (\n    <div>\n      <Card>\n        <CardHeader title=\"Add text component\" />\n        <CardContent>\n\n        <TextField {...fields.content} multiline rowsMax=\"20\" />\n\n      </CardContent>\n\n      <CardActions>\n        <Button variant=\"outlined\" color=\"primary\" onClick={form.submit}>Save</Button>\n        <Button variant=\"outlined\" onClick={onCancel}>Cancel</Button>\n      </CardActions>\n\n    </Card>\n    </div>\n  );\n};\n","import React from 'react';\nimport {\n  Button,\n  Card,\n  CardActions,\n  CardContent,\n  CardHeader,\n  TextField,\n} from '@material-ui/core';\nimport { useForm } from 'react-hooks-useform';\nimport { fromJS } from 'immutable';\n\nimport { useActions } from '../../../../actions';\n\n\nexport const EditMarkdown = ({ component, onCancel, onSave }) => {\n  const { editComponent } = useActions();\n  const initialValues = fromJS({content: component.content});\n  const [fields, form] = useForm({\n    fields: [\n      { name: 'content', label: 'Content' },\n    ],\n    initialValues,\n    submit: values => {\n      editComponent({__id: component.__id, content: values.get('content')});\n      onSave();\n    },\n  });\n\n  return (\n    <div>\n      <Card>\n        <CardHeader title=\"Editing component\" />\n\n        <CardContent>\n\n        <TextField {...fields.content} multiline fullWidth rowsMax=\"20\" />\n\n      </CardContent>\n\n      <CardActions>\n        <Button variant=\"outlined\" color=\"primary\" onClick={form.submit}>Save</Button><Button variant=\"outlined\" onClick={onCancel}>Cancel</Button>\n      </CardActions>\n\n    </Card>\n    </div>\n\n  );\n\n\n};\n","import React from 'react';\nimport ReactMarkdown from \"react-markdown\";\n\nimport {\n  Typography,\n} from '@material-ui/core';\n\nconst PREVIEW_LINES = 5;\n\nexport const PreviewMarkdown = ({ component }) => {\n\n  const contentByLine = component.content.split('\\n');\n  const previewContent = contentByLine.slice(0, Math.min(contentByLine.length, PREVIEW_LINES)).join('\\n');\n\n  return (\n    <div>\n      <Typography><strong>{ component.title }</strong></Typography>\n      <ReactMarkdown source={previewContent} />\n      <Typography><strong>...</strong></Typography>\n    </div>\n  );\n}\n","import React from 'react';\nimport {\n  useMediaQuery,\n  Fab,\n} from '@material-ui/core';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { makeStyles, useTheme } from \"@material-ui/styles\";\n\n\nconst useStyles = makeStyles(theme => ({\n  fab: {\n    position: 'fixed',\n    top: 'auto',\n    left: 'auto',\n    margin: 0,\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n  },\n}));\n\nexport const EditButton = ({ onClick }) => {\n  const classes = useStyles();\n  const theme = useTheme();\n  const isDesktop = useMediaQuery(theme.breakpoints.up(\"lg\"), {\n    defaultMatches: true\n  });\n\n  return <Fab className={classes.fab} size={isDesktop ? 'large' : 'small'} onClick={onClick}><EditIcon /></Fab>;\n};\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Slide from '@material-ui/core/Slide';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nconst useStyles = makeStyles((theme) => ({\n  button: {\n    margin: theme.spacing(1),\n  },\n}));\n\nexport const Confirm = ({ onConfirm, title, description, children }) => {\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const onOk = () => {\n    onConfirm();\n    handleClose();\n  };\n\n  if (!open) {\n    const childrenWithProps = React.Children.map(children, child =>\n      React.cloneElement(child, { onClick: handleClickOpen })\n    );\n    return childrenWithProps;\n  }\n\n  return (\n    <div>\n      <Dialog\n        open={open}\n        TransitionComponent={Transition}\n        keepMounted\n        onClose={handleClose}\n        aria-labelledby=\"alert-dialog-slide-title\"\n        aria-describedby=\"alert-dialog-slide-description\"\n      >\n        <DialogTitle id=\"alert-dialog-slide-title\">\n          { title }\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-slide-description\">\n            { description }\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={onOk} variant=\"outlined\" color=\"secondary\" startIcon={<DeleteIcon />} className={classes.button}>\n            Delete\n          </Button>\n          <Button onClick={handleClose} variant=\"outlined\">\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {\n  useMediaQuery,\n  Box,\n  Button,\n  ButtonGroup,\n  Card,\n  CardActions,\n  CardContent,\n  CardHeader,\n  Container,\n  Dialog,\n  Grid,\n  IconButton,\n  Slider,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport { useTheme, withStyles } from '@material-ui/core/styles';\nimport AddIcon from '@material-ui/icons/Add';\nimport EditIcon from '@material-ui/icons/Edit';\nimport DeleteIcon from '@material-ui/icons/Delete';\n\nimport { fromJS } from 'immutable';\nimport { useForm } from 'react-hooks-useform';\n\nimport { useComponentsByPageId } from '../../contexts/AppTemplateContext';\nimport { useActions } from '../../actions';\nimport { Confirm } from '../../components/Controls/Confirm';\nimport { GRID_COLS } from '../../constants';\nimport { defaultLayout } from './Page';\nimport { NewComponent, componentForType, componentsByColumn } from './Components';\n\n\nconst StyledSlider = withStyles({\n  //track: {\n    //width: '100% !important',\n  //},\n})(Slider);\n\nfunction componentPreview(component, deleteComponent, setEditComponent) {\n  const PreviewComponent = componentForType(component.type, 'preview');\n\n  return (\n    <Card variant=\"outlined\">\n      <CardHeader title={component.name || component.type} />\n\n      <CardContent>\n        <PreviewComponent component={component} />\n      </CardContent>\n\n      <CardActions>\n        <Button size=\"small\" startIcon={<EditIcon />} onClick={() => setEditComponent(component)}>Edit</Button>\n        <Confirm onConfirm={() => deleteComponent(component)} title=\"Delete Component\" description=\"Delete this component?\">\n          <IconButton edge=\"end\" aria-label=\"delete\">\n            <DeleteIcon />\n          </IconButton>\n        </Confirm>\n\n      </CardActions>\n\n    </Card>\n  );\n}\n\nconst columnWithdsToSliderPositions = (columnWidths) => {\n  let sliderPositions = [];\n  if (!columnWidths || columnWidths.length === 1) {\n    sliderPositions = [GRID_COLS];\n  } else {\n    for (let x = 1; x < columnWidths.length; x++) {\n      sliderPositions.push(GRID_COLS - columnWidths[x]);\n    }\n  }\n  return sliderPositions;\n};\n\nconst sliderPositionsToColumnWidths = (sliderPositions) => {\n  let remainder = 0;\n  let columnWidths = [];\n  sliderPositions.forEach(c => {\n    columnWidths.push(c - remainder);\n    remainder = remainder + (c - remainder);\n  });\n  if (remainder < GRID_COLS) { columnWidths.push(GRID_COLS - remainder); }\n\n  return columnWidths;\n};\n\nexport const EditPage = ({ page, onCancel }) => {\n  const { editPage, deleteComponent } = useActions();\n  const components = useComponentsByPageId(page.__id);\n  const [editComponent, setEditComponent] = useState();\n  const [showAddComponent, setShowAddComponent] = useState(false);\n  const history = useHistory();\n\n  let pageColumns;\n  let pageColumnPositions;\n  if (page.layout && page.layout.columns && Array.isArray(page.layout.columns)) {\n    pageColumns = page.layout.columns.length;\n    pageColumnPositions = page.layout.columns;\n  } else {\n    pageColumns = 1;\n    pageColumnPositions = [GRID_COLS];\n  }\n  const [columnCount, setColumnCount] = useState(pageColumns);\n  const [sliderPositions, setSliderPositions] = useState(columnWithdsToSliderPositions(pageColumnPositions));\n  const [changesMade, setChangesMade] = useState(false);\n\n  const initialValues = fromJS(page);\n  const [fields, form] = useForm({\n    fields: [\n      { name: 'title', label: 'title', required: false },\n    ],\n    initialValues,\n    submit: values => {\n      editPage({\n        ...page,\n        title: values.get('title'),\n      });\n      onCancel();\n    }\n  });\n\n  const returnToPage = () => {\n    onCancel();\n  };\n\n  if (editComponent !== undefined) {\n    const component = components[editComponent.__id];\n    const EditComponent = componentForType(component.type, 'edit');\n    return <EditComponent component={component} onCancel={() => setEditComponent(undefined)} onSave={returnToPage} />;\n  }\n\n  let maxRow = 1;\n  Object.keys(components).forEach(componentKey => {\n    const component = components[componentKey];\n    const componentLayout = component.layout || defaultLayout;\n    if (componentLayout.row > maxRow) { maxRow = componentLayout.row; }\n  });\n\n  const columnWidths = sliderPositionsToColumnWidths(sliderPositions);\n  let componentGrid = (\n    <Grid container spacing={1}>\n      { columnWidths.map((colSize,colNum) => {\n        const actualColNum = colNum + 1; // columns are 1 based\n        const rowComponents = componentsByColumn(components, actualColNum);\n        return <Grid item xs={colSize} key={`col-${actualColNum}`}>\n          <Grid container spacing={1}>\n            { rowComponents.map(component =>\n              <Grid item xs={GRID_COLS} key={`component-${component.__id}`}>\n                { componentPreview(component, deleteComponent, setEditComponent) }\n              </Grid>\n            )}\n            <Grid item xs={GRID_COLS} style={{textAlign: 'center'}}>\n              <Card>\n                <CardContent>\n                  <Button color=\"primary\" aria-label=\"Add component in new row\"\n                    component=\"span\" startIcon={<AddIcon />}\n                    onClick={() => setShowAddComponent({column: actualColNum, row: rowComponents.length + 1})}>\n                    Add Component Here\n                  </Button>\n                </CardContent>\n              </Card>\n            </Grid>\n          </Grid>\n        </Grid>\n      })}\n    </Grid>\n  );\n\n  const marks = [\n    {value: 1, label: '1'},\n    {value: 2, label: '2'},\n    {value: 3, label: '3'},\n    {value: 4, label: '4'},\n    {value: 5, label: '5'},\n    {value: 6, label: '6'},\n    {value: 7, label: '7'},\n    {value: 8, label: '8'},\n    {value: 9, label: '9'},\n    {value: 10, label: '10'},\n    {value: 11, label: '11'},\n    {value: 12, label: '12'},\n  ];\n\n  const updateColumnCount = (c) => {\n    let newSliderPositions = [];\n    if (c == 1) {\n      newSliderPositions.push(GRID_COLS);\n    } else {\n      for (let x=1; x <= (c - 1); x++) {\n        newSliderPositions.push((GRID_COLS / c) * x);\n      }\n    }\n    setColumnCount(c);\n    setSliderPositions(newSliderPositions.sort());\n    setChangesMade(true);\n  }\n\n  const saveLayoutChanges = () => {\n    const columns = sliderPositionsToColumnWidths(sliderPositions);\n    editPage({\n      ...page,\n      layout: {\n        ...page.layout,\n        columns,\n      },\n    });\n    onCancel();\n  };\n\n  const updateSliderPositions = (positions) => {\n    setSliderPositions(positions);\n    setChangesMade(true);\n  };\n\n  return (\n    <div>\n      { showAddComponent ? <NewComponentModal page_id={page.__id} column={showAddComponent.column} row={showAddComponent.row} preSave={saveLayoutChanges} onCancel={() => setShowAddComponent(false)} /> : undefined }\n      <Card>\n        <CardHeader title=\"Page properties\" />\n        <CardContent>\n\n          <TextField {...fields.title} />\n\n        </CardContent>\n\n        <CardActions>\n          <Button color=\"primary\" variant=\"outlined\" onClick={form.submit}>Save</Button>\n        </CardActions>\n\n      </Card>\n\n      <Card>\n        <CardHeader title=\"Layout\" />\n        <CardContent>\n          <Grid container>\n            <Grid item xs={4}>\n              { /* TODO: ButtonGroup should not be inside Typography */ }\n              <Typography>\n                Columns\n                { ' ' }\n                <ButtonGroup size=\"large\" color=\"primary\" aria-label=\"large outlined primary button group\">\n                  <Button variant=\"outlined\" color={columnCount === 1 ? 'primary' : 'default'} onClick={() => updateColumnCount(1)}>One</Button>\n                  <Button variant=\"outlined\" color={columnCount === 2 ? 'primary' : 'default'} onClick={() => updateColumnCount(2)}>Two</Button>\n                  <Button variant=\"outlined\" color={columnCount === 3 ? 'primary' : 'default'} onClick={() => updateColumnCount(3)}>Three</Button>\n                </ButtonGroup>\n              </Typography>\n            </Grid>\n\n            <Grid item xs={8}>\n              <StyledSlider marks={marks} min={1} max={GRID_COLS} value={sliderPositions} disabled={columnCount === 1} onChange={(evt,val) => updateSliderPositions(val)} />\n            </Grid>\n\n          </Grid>\n\n          { componentGrid }\n\n        </CardContent>\n\n      </Card>\n\n      <Box my={4}>\n        <Button variant=\"outlined\" onClick={onCancel}>Return to Page</Button>\n        { ' ' }\n        <Button color=\"primary\" variant=\"outlined\" disabled={!changesMade} onClick={saveLayoutChanges}>Save Layout</Button>\n      </Box>\n    </div>\n  );\n}\n\n\nconst NewComponentModal = ({page_id, row, column, onCancel, preSave}) => {\n  const theme = useTheme();\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'));\n\n  return (\n    <Dialog fullScreen={fullScreen} open={true}>\n      <Container fixed>\n        <NewComponent page_id={page_id} row={row} column={column} preSave={preSave} />\n        <Button variant=\"outlined\" onClick={onCancel}>Cancel</Button>\n      </Container>\n    </Dialog>\n  );\n}\n","import React, { useState } from 'react';\nimport {\n  Grid,\n  Typography,\n} from '@material-ui/core';\nimport { Alert, AlertTitle } from '@material-ui/lab';\n\nimport { useComponentsByPageId } from '../../contexts/AppTemplateContext';\n\nimport { GRID_COLS } from '../../constants';\nimport { NewComponent, componentForType, componentsByColumn } from './Components';\nimport { EditButton } from './EditButton';\nimport { EditPage } from './EditPage';\n\nexport const defaultLayout = {row: 1, column: 1};\n\n\nexport const Page = ({ page }) => {\n  const components = useComponentsByPageId(page.__id);\n  const [editMode, setEditMode] = useState(false);\n\n  if (editMode) {\n    return <EditPage page={page} onCancel={() => setEditMode(false)} />\n  }\n\n  if (Object.keys(components).length === 0) {\n    return (\n    <div>\n      <Alert severity=\"warning\">\n        <AlertTitle>Page has no components</AlertTitle>\n      </Alert>\n      <NewComponent page_id={page.__id} />\n    </div>\n    );\n  }\n\n  const columnWidths = page.layout && page.layout.columns ? page.layout.columns : [GRID_COLS];\n  let componentGrid = (\n    <Grid container spacing={1}>\n      { columnWidths.map((colSize,colNum) => {\n        const actualColNum = colNum + 1; // columns are 1 based\n        const rowComponents = componentsByColumn(components, actualColNum);\n        return <Grid item xs={12} lg={colSize} key={`col-${actualColNum}`}>\n          <Grid container spacing={1}>\n            { rowComponents.map(component => {\n              const ShowComponent = componentForType(component.type, 'show');\n              return <Grid item xs={GRID_COLS} key={`component-${component.__id}`}>\n                <ShowComponent component={component} />\n              </Grid>;\n            })}\n          </Grid>\n        </Grid>\n      })}\n    </Grid>\n  );\n\n  return (\n    <div>\n      <Typography variant=\"h4\"> { page.title }</Typography>\n      <div>\n        { componentGrid }\n        <EditButton onClick={() => setEditMode(true)} />\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\n\nimport { usePagesByTabId } from '../../contexts/AppTemplateContext';\nimport { NewPage } from './NewPage';\nimport { Page } from './Page';\n\nexport const Tab = ({ tab }) => {\n  const pages = usePagesByTabId(tab.__id);\n\n  // Just render first page for now\n  const page = pages && Object.keys(pages).length > 0 ? pages[Object.keys(pages)[0]] : undefined;\n\n  if (!page) {\n    return <NewPage tab_id={tab.__id} />;\n  }\n\n  return <Page page={page} />;\n}\n","import React, { useState } from 'react';\nimport {\n  Button,\n  Card,\n  CardActions,\n  CardHeader,\n  CardContent,\n  Checkbox,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport CodeIcon from '@material-ui/icons/Code';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport { Link } from 'react-router-dom';\nimport fileDownload from 'js-file-download';\nimport { useForm } from 'react-hooks-useform';\nimport { useToasts } from 'react-toast-notifications'\nimport { fromJS } from 'immutable';\n\nimport { useActions } from '../../actions';\nimport { ErrorMsg } from '../../components/Controls/ErrorMsg';\nimport { useAppTemplate, useSettings, serializeTemplate } from '../../contexts/AppTemplateContext';\n\n\nexport const SettingsMain = () => {\n  const template = useAppTemplate();\n  const { editTemplate } = useActions();\n  const { addToast } = useToasts();\n  const [error, setError] = useState(null);\n\n  const initialValues = fromJS({\n    name: template.name,\n  });\n  const [fields, form] = useForm({\n    fields: [\n      { name: 'name', label: 'Name' },\n    ],\n    initialValues,\n    submit: values => {\n      try {\n        editTemplate({\n          name: values.get('name'),\n        });\n      } catch (err) {\n        setError(err.toString());\n      }\n    }\n  });\n\n  const SettingsOptions = template.__source.settingsComponent;\n\n  const download = () => {\n    const exportedTemplate = serializeTemplate(template);\n    const formatted = JSON.stringify(exportedTemplate, 1, '  ');\n    fileDownload(formatted, 'template.json');\n  };\n\n  const errMsg = error ? <ErrorMsg message={error} /> : undefined;\n\n  return (\n    <div>\n      { errMsg }\n      <Typography variant=\"h4\" gutterBottom>\n        Settings\n      </Typography>\n\n      <Card>\n          <form.Form>\n        <CardHeader title=\"App Template\" />\n\n        <CardContent>\n          <List>\n            <ListItem>\n              <TextField {...fields.name } />\n            </ListItem>\n\n            <ListItem>\n              <ListItemText primary={`Location: ${template.__source.name}`} />\n            </ListItem>\n          </List>\n\n        </CardContent>\n\n        <CardActions>\n          <Button vairant=\"outlined\" color=\"primary\" type=\"submit\" onClick={form.submit} disabled={form.getIsPristine()}>Save changes</Button>\n          <Button variant=\"outlined\" startIcon={<CodeIcon />} component={Link} to=\"/_/json\">Template source JSON</Button>\n          <Button variant=\"outlined\" startIcon={<GetAppIcon />} onClick={download}>Download Template</Button>\n        </CardActions>\n      </form.Form>\n      </Card>\n\n      <Card>\n        <CardHeader title=\"Storage settings\" />\n\n        <CardContent>\n\n          <SettingsOptions />\n\n        </CardContent>\n\n        <CardActions>\n        </CardActions>\n      </Card>\n\n    </div>\n  );\n}\n","import React, { useEffect, useRef } from 'react'\nimport { makeStyles } from \"@material-ui/styles\";\n\nimport Jazzicon from 'jazzicon'\n\nconst useStyles = makeStyles(theme => ({\n\tidenticon: {\n    margin: 'auto',\n\t},\n}));\n\n\nexport const Identicon = ({ address, pixelWidth }) => {\n\tconst ref = useRef();\n\tconst classes = useStyles();\n\n\tuseEffect(() => {\n\t\tif (address && ref.current) {\n\t\t\tref.current.innerHTML = '';\n\t\t\tref.current.appendChild(Jazzicon(pixelWidth || 16, parseInt(address.slice(2, 10), 16)));\n\t\t}\n  });\n\n\treturn <span className={classes.identicon} ref={ref}></span>;\n};\n","import React, { useState, useEffect } from 'react';\nimport Button from '@material-ui/core/Button';\nimport useFileInput from \"use-file-input\";\n\nimport { Spinner } from '../../components/Controls/Spinner';\n\n\nexport const FileUploader = ({ accept, children, onFileUpload, ...rest }) => {\n  const [file, setFile] = useState(null);\n  const [error, setError] = useState(null);\n  const [result, setResult] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  const handleFileSelect = useFileInput(\n    (files) => {\n      setFile(files[0]);\n    },\n    { accept, multiple: false }\n  );\n\n  useEffect(() => {\n    if (!file) { return; }\n    const reader = new FileReader(file);\n\n    reader.onloadstart = () => {\n      setLoading(true)\n    };\n\n    reader.onloadend = () => {\n      setLoading(false)\n    };\n\n    reader.onload = e => {\n      setResult(e.target.result)\n      onFileUpload(e.target.result);\n    };\n\n    reader.onError = e => {\n      setError(e);\n    }\n\n    try {\n      reader.readAsText(file);\n    } catch (e) {\n      setError(e)\n    }\n  }, [file]);\n\n  if (loading) {\n    return <Spinner />;\n  }\n\n  return (\n    <Button onClick={handleFileSelect} {...rest}>\n      { children }\n    </Button>\n  );\n}\n","import React from 'react';\nimport OpenInNewIcon from '@material-ui/icons/OpenInNew';\nimport { shortenTxHash } from '../lib/web3';\nimport { NETWORKS } from '../constants';\n\nconst ETHERSCAN_NETWORKS = ['mainnet', 'ropsten', 'kovan', 'rinkeby', 'goerli'];\n\nfunction etherscanNetwork(network) {\n  return ETHERSCAN_NETWORKS.indexOf(network) > -1;\n}\n\nfunction etherscanApiHost(network) {\n  if (!etherscanNetwork(network)) { throw new Error(`Unsupported network ${network}`); }\n  return network === 'mainnet' ? 'api' : `api-${network}`;\n}\n\n\nexport const fetchAbi = async (address, network) => {\n    let result = await fetch(\n      `https://${ etherscanApiHost(network) }.etherscan.io/api?module=contract&action=getabi&address=${address}`\n    )\n    let json = await result.json()\n    if (json.status === '1') {\n      return json.result;\n    } else {\n      throw new Error('Failed to fetch ABI from etherscan');\n    }\n};\n\nfunction etherscanUrl(chainId) {\n  const baseUrl = 'etherscan.io';\n  const network = NETWORKS.find(n => n.chainId === chainId);\n  if (network.id === 'mainnet') { return baseUrl; }\n  return `${network.id}.${baseUrl}`;\n}\n\nexport const EtherscanTxLink = ({hash, chainId, prefix='' }) => {\n  return <span>\n    { prefix }\n    { prefix.length > 0 ? ' ' : undefined }\n    <a href={`https://${ etherscanUrl(chainId)}/tx/${hash}`} target=\"_blank\" rel=\"noopener noreferrer\">\n      { shortenTxHash(hash) }\n      <OpenInNewIcon fontSize=\"small\" />\n    </a>\n  </span>\n};\n","import React, { useState } from 'react';\nimport {\n  Avatar,\n  Button,\n  Card,\n  CardContent,\n  CardHeader,\n  Collapse,\n  Checkbox,\n  Dialog,\n  DialogTitle,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  FormControlLabel,\n  TextField,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ApartmentIcon from '@material-ui/icons/Apartment';\nimport { blue } from '@material-ui/core/colors';\n\nimport { useToasts } from 'react-toast-notifications'\nimport { useForm } from 'react-hooks-useform';\nimport { fromJS } from 'immutable';\n\nimport { FileUploader } from '../../components/Controls/FileUploader';\nimport { ErrorMsg } from '../../components/Controls/ErrorMsg';\nimport { SelectField } from '../../components/Controls/SelectField';\nimport { Spinner } from '../../components/Controls/Spinner';\nimport { NETWORKS } from '../../constants';\nimport { useActions } from '../../actions';\nimport { fetchAbi } from '../../lib/etherscan';\n\nconst validateAddress = (address) => address.startsWith('0x') && address.length === 42 ? '' : 'Invalid address';\n\nconst useStyles = makeStyles({\n  avatar: {\n    backgroundColor: blue[100],\n    color: blue[600],\n  },\n});\n\nexport const NewAddress = ({ onCancel }) => {\n  const { addAddress } = useActions();\n  const [fetching, setFetching] = useState(false);\n  const [error, setError] = useState(null);\n  const [deployedOptions, setDeployedOptions] = useState(null);\n  const { addToast } = useToasts();\n\n  const networkOptions = Object.keys(NETWORKS).map(n => ({value: NETWORKS[n].id, label: NETWORKS[n].name}));\n  const initialValues = fromJS({network: 'mainnet', fetchabi: true});\n  const [fields, form] = useForm({\n    fields: [\n      { name: 'name', label: 'Name', optional: true },\n      { name: 'address', label: 'Address', validate: validateAddress },\n      { name: 'network', label: 'Network', type: 'select', options: networkOptions },\n      { name: 'fetchabi', label: 'Fetch ABI from Etherscan?', type: 'boolean' },\n      { name: 'abi', label: 'ABI', optional: true },\n    ],\n    initialValues,\n    submit: async (values) => {\n      const address = values.get('address');\n      const network = values.get('network');\n      const name = values.get('name');\n\n      setFetching(true);\n      try {\n        let abi;\n        if (values.get('fetchabi')) {\n          abi = await fetchAbi(address, network);\n        } else {\n          abi = values.get('abi');\n        }\n        addAddress({network, address, abi, name});\n        form.reset();\n        addToast(`Added address ${name || address}`, {apperance: 'success', autoDismiss: true, autoDismissTimeout: 3000});\n        setFetching(false);\n\n      } catch (err) {\n        setError(err.toString());\n        setFetching(false);\n      }\n    }\n  });\n\n\n  if (fetching) { return <Spinner />; }\n\n  const handleTruffleJson = (truffleJson) => {\n    const json = JSON.parse(truffleJson);\n\n    const deployedNetworks = Object.keys(json.networks).map(chainId => ({\n      chainId,\n      address: json.networks[chainId].address,\n    }));\n\n    form.setValue('fetchabi', false);\n    form.setValue('name', json.contractName);\n    form.setValue('abi', JSON.stringify(json.abi));\n\n    if (deployedNetworks.length === 1) {\n      const networkId = NETWORKS.find(n => n.chainId == deployedNetworks[0].chainId);\n      form.setValue('network', networkId.id);\n      form.setValue('address', deployedNetworks[0].address);\n    } else if (deployedNetworks.length > 1) {\n      setDeployedOptions(deployedNetworks);\n    }\n  };\n\n  const handleDeploymentSelection = (network) => {\n    const networkId = NETWORKS.find(n => n.chainId == network.chainId);\n    form.setValue('network', networkId.id);\n    form.setValue('address', network.address);\n    setDeployedOptions(null);\n  };\n\n  return (\n    <Card>\n      <CardHeader title=\"Add Ethereum address to addressbook\" />\n      <CardContent>\n        { error ? <ErrorMsg message={error} /> : undefined }\n        { deployedOptions ? <NetworkOptionsSelector options={deployedOptions} onSelect={handleDeploymentSelection} /> : undefined }\n\n        <form.Form>\n          <TextField fullWidth {...fields.name} />\n\n          <SelectField fullWidth {...fields.network } />\n\n          <TextField fullWidth {...fields.address} />\n\n          <FormControlLabel\n            control={<Checkbox {...fields.fetchabi}  />}\n            label={fields.fetchabi.label}\n          />\n\n        <Collapse in={!fields.fetchabi.value}>\n          <TextField multiline fullWidth {...fields.abi } />\n        </Collapse>\n\n        <Button type='submit' variant=\"outlined\" color=\"primary\" onClick={form.submit}>Submit</Button>\n        {' '}\n        <FileUploader variant=\"outlined\" onFileUpload={handleTruffleJson}>Upload Truffle build .json</FileUploader>\n      </form.Form>\n\n    </CardContent>\n  </Card>\n  );\n}\n\nconst NetworkOptionsSelector = ({options, onSelect}) => {\n  const classes = useStyles();\n\n  const handleListItemClick = (value) => {\n    onSelect(value);\n  };\n\n  return (\n    <Dialog aria-labelledby=\"simple-dialog-title\" open={true}>\n      <DialogTitle id=\"simple-dialog-title\">Select Deployed Contract</DialogTitle>\n      <List>\n        {options.map((network) => {\n          const networkRecord = NETWORKS.find(n => n.chainId == network.chainId);\n          if (!networkRecord) { return; }\n          return (\n            <ListItem button onClick={() => handleListItemClick(network)} key={network.chainId}>\n            <ListItemAvatar>\n              <Avatar className={classes.avatar}>\n                <ApartmentIcon />\n              </Avatar>\n            </ListItemAvatar>\n            <ListItemText primary={networkRecord.name} secondary={network.address} />\n          </ListItem>\n          );\n        })}\n      </List>\n    </Dialog>\n  );\n\n};\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport {\n  Avatar,\n  Card,\n  CardHeader,\n  CardContent,\n  Chip,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemSecondaryAction,\n  ListItemText,\n  IconButton,\n} from '@material-ui/core';\nimport { makeStyles } from \"@material-ui/styles\";\nimport DeleteIcon from '@material-ui/icons/Delete';\n\nimport { useAppTemplate } from '../../contexts/AppTemplateContext';\nimport { useActions } from '../../actions';\n\nimport { Identicon } from '../Controls/Identicon';\nimport { Confirm } from '../Controls/Confirm';\nimport { NewAddress } from './NewAddress';\n\nconst useStyles = makeStyles(theme => ({\n  identicon: {\n    height: 100,\n    width: 100,\n    //borderRadius: 200,\n  },\n}));\n\nexport const Addresses = () => {\n  const classes = useStyles();\n  const template = useAppTemplate();\n  const { addresses } = template;\n  const { deleteAddress } = useActions();\n\n  const onDelete = (address) => {\n    deleteAddress(address);\n  };\n\n  const noAddresses = addresses.length === 0 ? <div>No Addresses.  Add one below</div> : undefined;\n\n  return (\n    <div>\n      <Card>\n        <CardHeader title=\"Addresses\" />\n        <CardContent>\n          { noAddresses }\n          <List dense={false}>\n            { addresses && addresses.map(address => (\n              <ListItem key={address.address}>\n                <ListItemAvatar>\n                  <Avatar>\n                    <Identicon address={address.address} pixelWidth={42} className={classes.identicon} />\n                  </Avatar>\n                </ListItemAvatar>\n                <ListItemText\n                  primary={address.name ? <Link to={`/_/addresses/${address.network}/${address.address}`}>{ address.name }</Link>: <span><Link to={`/_/addresses/${address.network}/${address.address}`}>{ address.address}{' '}</Link><Chip label={address.network} variant=\"outlined\" size=\"small\" /></span>}\n                  secondary={address.name ? <span>{ address.address }{' '}<Chip label={address.network} variant=\"outlined\" size=\"small\" /></span> : null }\n                />\n                <ListItemSecondaryAction>\n                  <Confirm onConfirm={() => onDelete(address)} title=\"Delete Address\" description=\"Remove address from address book?\">\n                    <IconButton edge=\"end\" aria-label=\"delete\" >\n                      <DeleteIcon />\n                    </IconButton>\n                  </Confirm>\n                </ListItemSecondaryAction>\n              </ListItem>\n            )) }\n          </List>\n\n          <NewAddress />\n\n        </CardContent>\n\n      </Card>\n    </div>\n  );\n}\n","import React from 'react';\nimport {\n  Box,\n  List,\n  ListItem,\n  Typography,\n} from '@material-ui/core';\nimport { useContractByAddress, useHasSigner } from '../../lib/web3';\n\nexport const AddressABI = ({ address, network }) => {\n  const contract = useContractByAddress(address, network);\n\n  if (!contract) {\n    // Not a contract, or do not have ABI\n    // Add option to add an ABI?\n    return null;\n  }\n\n  const calls = Object.filter(contract.interface.functions, f => f.type === 'call');\n  const callFns = Object.keys(calls).filter(n => n.indexOf('(') > -1);\n\n  const txs = Object.filter(contract.interface.functions, f => f.type === 'transaction');\n  const txFns = Object.keys(calls).filter(n => n.indexOf('(') > -1);\n\n  const events = Object.keys(contract.interface.events).filter(n => n.indexOf('(') > -1);\n\n  return (\n    <div>\n      <Typography>Contract ABI</Typography>\n\n      <Box my={3}>\n        <Typography>Call functions</Typography>\n\n        <List>\n        { callFns.map(callFn => {\n          return <ListItem key={callFn}>{ callFn }</ListItem>;\n        }) }\n      </List>\n\n    </Box>\n\n      <Box my={3}>\n        <Typography>Transactions</Typography>\n\n        <List>\n        { txFns.map(txFn => {\n          return <ListItem key={txFn}>{ txFn }</ListItem>;\n        }) }\n      </List>\n\n    </Box>\n\n      <Box my={3}>\n        <Typography underline>Events</Typography>\n\n        <List>\n        { events.map(event => {\n          return <ListItem key={event}>{ event }</ListItem>;\n        }) }\n      </List>\n\n      </Box>\n    </div>\n  );\n}\n","import React from 'react';\nimport { useParams, useHistory, Link } from 'react-router-dom';\nimport {\n  Box,\n  Button,\n  Chip,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport { useForm } from 'react-hooks-useform';\nimport { fromJS } from 'immutable';\n\nimport { useAddress } from '../../contexts/AppTemplateContext';\nimport { useActions } from '../../actions';\nimport { AddressABI } from './AddressABI';\n\nexport const EditAddress = () => {\n  const { address, network } = useParams();\n  const history = useHistory();\n  const { editAddress } = useActions();\n  const addressRecord = useAddress(address, network);\n\n  const initialValues = fromJS(addressRecord);\n\n  const [fields, form] = useForm({\n    fields: [\n      { name: 'name', label: 'Name', optional: true },\n    ],\n    initialValues,\n    submit: (values) => {\n      const name = values.get('name');\n\n      editAddress({\n        ...addressRecord,\n        name,\n      });\n      history.push('/_/addresses');\n\n    },\n  });\n\n  return (\n    <div>\n      <Typography variant=\"h6\">{ address }{' '}<Chip label={network} variant=\"outlined\" size=\"small\" /></Typography>\n\n\n      <form.Form>\n        <Box my={2}>\n          <TextField fullWidth {...fields.name} />\n        </Box>\n\n        <Box my={2}>\n\n          <Button type=\"submit\" onClick={form.submit} variant=\"outlined\" color=\"primary\">Save</Button>\n          <Button component={Link} to=\"/_/addresses\" variant=\"outlined\">Cancel</Button>\n        </Box>\n\n      </form.Form>\n\n\n      <Box my={2}>\n        <AddressABI address={address} network={network} />\n      </Box>\n\n    </div>\n  );\n}\n","import React from 'react';\nimport {\n  Box,\n  Button,\n  Card,\n  CardActions,\n  CardContent,\n  CardHeader,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport { useForm } from 'react-hooks-useform';\n\nimport { useActions } from '../../actions';\n\nexport const NewIntegration = ({ onCancel }) => {\n  const { addIntegration } = useActions();\n\n  const [fields, form] = useForm({\n    fields: [\n      { name: 'endpoint', label: 'Endpoint' },\n    ],\n    submit: values => { addIntegration({type: 'thegraph', endpoint: values.get('endpoint')}); }\n  });\n\n  return (\n    <Card>\n      <CardHeader title=\"New Integration\" />\n      <CardContent>\n\n        <Typography>TheGraph</Typography>\n\n        <form.Form>\n          <Box flexDirection='column'>\n            <TextField {...fields.endpoint} />\n          </Box>\n          <Button type='submit' onClick={form.submit}>Submit</Button>\n        </form.Form>\n\n\n      </CardContent>\n      <CardActions>\n        <Button color=\"primary\">Save</Button>\n        <Button onClick={onCancel}>Cancel</Button>\n      </CardActions>\n    </Card>\n  );\n}\n","import React, { useState } from 'react';\nimport {\n  Avatar,\n  Button,\n  Card,\n  CardActions,\n  CardHeader,\n  CardContent,\n  Collapse,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemSecondaryAction,\n  ListItemText,\n  IconButton,\n} from '@material-ui/core';\nimport DeleteIcon from '@material-ui/icons/Delete';\n\nimport { useAppTemplate } from '../../contexts/AppTemplateContext';\nimport { useActions } from '../../actions';\n\nimport { Confirm } from '../../components/Controls/Confirm';\nimport { NewIntegration } from './NewIntegration';\n\nimport thegraphLogo from '../../assets/images/thegraph.jpg';\n\n\nfunction nameForIntegraion(integrationType) {\n  switch (integrationType) {\n    case 'thegraph':\n      return <a href=\"http://thegraph.com\" target=\"_blank\" rel=\"noopener noreferrer\">The Graph</a>;\n    default:\n      throw new Error(`unknown integration type ${integrationType}`);\n  }\n}\n\nexport const Integrations = () => {\n  const  template = useAppTemplate();\n  const { integrations } = template;\n  const { deleteIntegration } = useActions();\n  const [showNewIntegration, setShowNewIntegration] = useState(false);\n\n  const onDelete = (integration) => {\n    deleteIntegration(integration);\n  };\n\n  // TODO: Link to endpoint.  But sanitize first because it's user specified\n\n  return (\n    <div>\n      <Card>\n        <CardHeader title=\"Integrations\" />\n        <CardContent>\n          <List dense={false}>\n            { integrations && Object.keys(integrations).map(integrationKey => (\n              <ListItem key={integrations[integrationKey].__id}>\n                <ListItemAvatar>\n                  <Avatar src={thegraphLogo} alt=\"The Graph\" />\n                </ListItemAvatar>\n                <ListItemText\n                  primary={nameForIntegraion(integrations[integrationKey].type)}\n                  secondary={integrations[integrationKey].endpoint}\n                />\n                <ListItemSecondaryAction>\n                  <Confirm onConfirm={() => onDelete(integrations[integrationKey])} title=\"Delete Integration\" description=\"Delete integration?\">\n                    <IconButton edge=\"end\" aria-label=\"delete\">\n                      <DeleteIcon />\n                    </IconButton>\n                  </Confirm>\n                </ListItemSecondaryAction>\n              </ListItem>\n            )) }\n          </List>\n\n        <Collapse in={showNewIntegration}>\n          <NewIntegration onCancel={() => setShowNewIntegration(false)} />\n        </Collapse>\n\n        </CardContent>\n\n        <CardActions>\n          { showNewIntegration ? undefined :\n              <Button onClick={() => setShowNewIntegration(true)}>Add Integration</Button>\n          }\n        </CardActions>\n      </Card>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport {\n  Button,\n  InputAdornment,\n  TextField,\n} from '@material-ui/core';\n\nimport { useForm } from 'react-hooks-useform';\n\nimport { ErrorMsg } from '../../components/Controls/ErrorMsg';\nimport { useActions } from '../../actions';\n\nexport const NewTab = () => {\n  const { addTab } = useActions();\n  const [error, setError] = useState(null);\n\n  const [fields, form] = useForm({\n    fields: [\n      { name: 'name', label: 'Name' },\n    ],\n    submit: values => {\n      try {\n        addTab({\n          name: values.get('name'),\n        });\n      } catch (err) {\n        setError(err.toString());\n      }\n    }\n  });\n\n  const errMsg = error ? <ErrorMsg message={error} /> : undefined;\n\n  return (\n    <div>\n      { errMsg }\n      <form.Form>\n        <TextField\n          fullWidth\n          {...fields.name }\n          InputProps={{endAdornment: <InputAdornment position=\"end\"><Button type=\"submit\" color=\"primary\" onClick={form.submit}>Add Tab</Button></InputAdornment>}}\n        />\n      </form.Form>\n    </div>\n  );\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\n\nimport 'emoji-mart/css/emoji-mart.css';\nimport data from 'emoji-mart/data/apple.json'\nimport { NimblePicker } from 'emoji-mart';\n\nexport const EmojiPicker = ({ onSelect, onRemove, onCancel }) => {\n  return (\n    <div>\n      <Dialog\n        open={true}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n\n      <DialogContent>\n        <NimblePicker set=\"apple\" onSelect={onSelect} data={data} />\n      </DialogContent>\n\n      <DialogActions>\n        <Button onClick={onCancel}>Cancel</Button>\n        <Button onClick={onRemove}>\n          Remove Icon\n        </Button>\n      </DialogActions>\n    </Dialog>\n\n  </div>\n  );\n};\n","import React, { useState } from 'react';\nimport {\n  Card,\n  CardHeader,\n  CardContent,\n  CardActions,\n  Button,\n  TextField,\n} from '@material-ui/core';\nimport { useForm } from 'react-hooks-useform';\nimport { fromJS } from 'immutable';\nimport { Emoji } from 'emoji-mart';\nimport 'emoji-mart/css/emoji-mart.css';\n\nimport { EmojiPicker } from '../../components/Controls/EmojiPicker';\nimport { useActions } from '../../actions';\nimport { Confirm } from '../../components/Controls/Confirm';\n\n\nexport const EditTab = ({ tab, onCancel }) => {\n  const { editTab, deleteTab } = useActions();\n  const [showSelectIcon, setShowSelectIcon] = useState(false);\n\n  const initialValues = fromJS(tab);\n  const [fields, form] = useForm({\n    fields: [\n      { name: 'name', label: 'Name' },\n      { name: 'slug', label: 'URL Slug' }, // TODO: Verifiation\n    ],\n    initialValues,\n    submit: values => {\n      editTab({\n        ...tab,\n        name: values.get('name'),\n        slug: values.get('slug'),\n      });\n      onCancel();\n    }\n  });\n\n  const onDelete = (tab) => {\n    deleteTab(tab);\n    onCancel();\n  };\n\n  const onRemoveIcon = () => {\n    const newTab = Object.assign({}, tab, {icon: undefined});\n    editTab(newTab);\n    setShowSelectIcon(false);\n  };\n\n  const onSelectEmoji = (emoji) => {\n    const newTab = Object.assign({}, tab, {icon: emoji.id});\n    editTab(newTab);\n    setShowSelectIcon(false);\n  };\n\n  const onCancelEmojii = () => {\n    setShowSelectIcon(false);\n  };\n\n  const selectIcon = showSelectIcon ? <EmojiPicker onSelect={onSelectEmoji} onRemove={onRemoveIcon} onCancel={onCancelEmojii} /> : undefined;\n\n  const iconText = tab.icon ? <span>Icon:{' '}<Emoji emoji={tab.icon} size={32} set={'apple'} /></span> : 'Select icon';\n\n  return (\n    <div>\n      { selectIcon }\n      <Card>\n        <CardHeader title=\"Editing tab\" />\n        <form.Form>\n          <CardContent>\n\n            <Button onClick={() => setShowSelectIcon(true)}>\n              { iconText }\n            </Button>\n\n            <TextField fullWidth {...fields.name} />\n\n            <TextField fullWidth {...fields.slug} />\n\n          </CardContent>\n\n          <CardActions>\n\n            <Button variant=\"outlined\" color=\"primary\" type=\"submit\" onClick={form.submit}>Save</Button>\n            <Button variant=\"outlined\" onClick={onCancel}>Cancel</Button>\n\n            <br />\n\n            <Confirm onConfirm={() => onDelete(tab)} title=\"Delete Tab\" description={`Delete tab \"${tab.name}\"?`}>\n              <Button variant=\"outlined\">Delete Tab</Button>\n            </Confirm>\n\n\n          </CardActions>\n\n        </form.Form>\n      </Card>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport {\n  Card,\n  CardHeader,\n  CardContent,\n  Grid,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemSecondaryAction,\n  ListItemText,\n  IconButton,\n  Typography,\n} from '@material-ui/core';\nimport EditIcon from '@material-ui/icons/Edit';\nimport FolderIcon from '@material-ui/icons/Folder';\nimport AddIcon from '@material-ui/icons/Add';\n\nimport { Emoji } from 'emoji-mart';\nimport 'emoji-mart/css/emoji-mart.css';\n\nimport { useActions } from '../../actions';\nimport { useAppTemplate } from '../../contexts/AppTemplateContext';\nimport { NewTab } from './NewTab';\nimport { EditTab } from './EditTab';\n\nimport { EmojiPicker } from '../../components/Controls/EmojiPicker';\n\nfunction byId(set, id) {\n  const keys = Object.keys(set);\n  for (let x=0; x < keys.length; x++) {\n    if (set[keys[x]].__id === id) { return set[keys[x]];}\n  }\n}\n\nexport const Tabs = () => {\n  const  template = useAppTemplate();\n  const { tabs } = template;\n  const { editTab } = useActions();\n  const [selectIconTabId, setSelectIconTabId] = useState();\n  const [selectedEditTab, setSelectedEditTab] = useState();\n\n  if (selectedEditTab !== undefined) {\n    const tab = byId(tabs, selectedEditTab);\n    return <EditTab tab={tab} onCancel={() => setSelectedEditTab(undefined)} />;\n  }\n\n  const onSelectEmoji = (emoji) => {\n    const tab = byId(tabs, selectIconTabId);\n    const newTab = Object.assign({}, tab, {icon: emoji.id});\n    editTab(newTab);\n    setSelectIconTabId(undefined);\n  };\n\n  const onRemoveIcon = () => {\n    const tab = byId(tabs, selectIconTabId);\n    const newTab = Object.assign({}, tab, {icon: undefined});\n    editTab(newTab);\n    setSelectIconTabId(undefined);\n  };\n\n  const onCancelEmojii = () => {\n    setSelectIconTabId(undefined);\n  };\n\n  const selectIcon = selectIconTabId !== undefined ? <EmojiPicker onSelect={onSelectEmoji} onRemove={onRemoveIcon} onCancel={onCancelEmojii} /> : undefined;\n\n  return (\n    <div>\n      { selectIcon }\n      <Card>\n        <CardHeader title=\"Tabs\" />\n\n        <CardContent>\n          <Grid container spacing={3}>\n            <Grid item xs={12} md={8}>\n              <List dense={false}>\n                { Object.keys(tabs).map(tabKey => (\n                  <ListItem key={tabs[tabKey].__id}>\n                    <ListItemAvatar onClick={() => setSelectIconTabId(tabs[tabKey].__id)} >\n                      { tabs[tabKey].icon ?\n                          <Emoji emoji={tabs[tabKey].icon} size={32} set={'apple'} /> :\n                          <FolderIcon />\n                      }\n                    </ListItemAvatar>\n                    <ListItemText\n                      primary={tabs[tabKey].name}\n                      secondary={<Link to={`/${tabs[tabKey].slug}`}>{`/${tabs[tabKey].slug}`}</Link>}\n                    />\n                    <ListItemSecondaryAction>\n                      <IconButton edge=\"end\" aria-label=\"delete\" onClick={() => setSelectedEditTab(tabs[tabKey].__id)}>\n                        <EditIcon />\n                      </IconButton>\n                    </ListItemSecondaryAction>\n                  </ListItem>\n                )) }\n\n                <ListItem>\n                  <ListItemAvatar>\n                    <AddIcon />\n                  </ListItemAvatar>\n                  <ListItemText>\n                    <NewTab />\n                  </ListItemText>\n\n                </ListItem>\n              </List>\n\n            </Grid>\n\n            <Grid item xs={12} md={4}>\n              <Typography>\n                Tabs defined the navigation of your interface.\n              </Typography>\n              <Typography>\n                Each tab will appear in the navigation bar on the left.\n              </Typography>\n              <Typography>\n                A tab can have multiple pages.\n              </Typography>\n            </Grid>\n\n          </Grid>\n\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","import React from 'react';\nimport {\n  Button,\n} from '@material-ui/core';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport GetAppIcon from '@material-ui/icons/GetApp';\n\nimport { Link } from 'react-router-dom';\nimport fileDownload from 'js-file-download';\n\nimport { serializeTemplate, useAppTemplate } from '../../contexts/AppTemplateContext';\n\nexport const JsonView = () => {\n  const template = useAppTemplate();\n  const exportedTemplate = serializeTemplate(template);\n  const formatted = JSON.stringify(exportedTemplate, 1, '  ');\n\n  const download = () => {\n    fileDownload(formatted, 'template.json');\n  }\n\n  return (\n    <div>\n      <Button component={Link} to=\"/_/settings\" variant=\"outlined\"><ArrowBackIcon />{' '}Back</Button>\n      <Button variant=\"outlined\" onClick={download} startIcon={<GetAppIcon />}>Download Template JSON</Button>\n      <pre>\n        { formatted }\n      </pre>\n\n      <br />\n      <Button component={Link} to=\"/_/settings\" variant=\"outlined\" startIcon={<ArrowBackIcon />}>Back</Button>\n    </div>\n  );\n};\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\n\nimport { SettingsMain } from './SettingsMain';\nimport { Addresses } from './Addresses';\nimport { EditAddress } from './EditAddress';\nimport { Integrations } from './Integrations';\nimport { Tabs } from './Tabs';\nimport { JsonView } from './JsonView';\n\n\nexport const Settings = () => {\n\n  return (\n    <Switch>\n\n      <Route exact path={`/_/tabs`} component={Tabs} />\n      <Route exact path={`/_/integrations`} component={Integrations} />\n      <Route exact path={`/_/addresses/:network/:address`} component={EditAddress} />\n      <Route exact path={`/_/addresses`} component={Addresses} />\n\n      <Route path={`/_/json`} component={JsonView} />\n      <Route path={`/_/settings`} component={SettingsMain} />\n\n    </Switch>\n  );\n}\n","import React from 'react';\n\nimport { Switch, Route, Redirect } from 'react-router-dom';\n\nimport { useAppTemplate } from './contexts/AppTemplateContext';\n\nimport { Tab } from './components/Interface/Tab';\nimport { Settings } from './components/Settings/Settings';\n\nexport const SETTINGS_ROUTE = '/_';\n\nexport const Routes = () => {\n  const appTemplate = useAppTemplate();\n\n  // Default tab is first one for now\n  const defaultTab = appTemplate.tabs[Object.keys(appTemplate.tabs)[0]];\n\n  return (\n    <Switch>\n      { appTemplate.tabs && Object.keys(appTemplate.tabs).map((tabId, k) => (\n        <Route exact key={tabId} path={`/${appTemplate.tabs[tabId].slug}`} render={() => <Tab tab={appTemplate.tabs[tabId]} />} />\n      ))}\n\n      <Route path={SETTINGS_ROUTE} component={Settings} />\n\n      <Route path=\"/\" render={() => <Redirect to={`/${defaultTab.slug}`} /> } />\n    </Switch>\n  );\n}\n","import React, { useEffect } from 'react';\nimport {\n  Chip,\n} from '@material-ui/core';\nimport { makeStyles } from \"@material-ui/styles\";\nimport { useWeb3React } from '@web3-react/core'\nimport { SnackbarProvider, useSnackbar } from 'notistack';\nimport { EtherscanTxLink } from './lib/etherscan'\n\nimport { useTransactions, BlockNumberWatcher, TransactionStatusWatcher } from './contexts/Web3Context';\n\nimport { Identicon } from './components/Controls/Identicon';\n\nconst useStyles = makeStyles(theme => ({\n  chip: {\n    position: 'absolute',\n    top: theme.spacing(2),\n    right: theme.spacing(2),\n  },\n  identicon: {\n    marginLeft: 6,\n    marginTop: 4,\n  },\n  snacks: {\n    top: theme.spacing(8),\n  },\n}));\n\nexport const Web3Status = () => {\n  const classes = useStyles();\n  const { account } = useWeb3React();\n\n\tif (!account) {\n    return (\n      <div>\n        <Chip\n          className={classes.chip}\n          label=\"Connect web3 wallet\"\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div>\n\n      <BlockNumberWatcher />\n      <TransactionStatusWatcher />\n\n      <Chip\n        className={classes.chip}\n        label={`${account.substr(0,6)}...${account.substr(38, 4)}`}\n        avatar={<span className={classes.identicon}><Identicon address={account} /></span>}\n      />\n\n    <SnackbarProvider\n      anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\n      preventDuplicate={true}\n      className={classes.snacks}\n    >\n      <Web3TransactionList />\n    </SnackbarProvider>\n\n    </div>\n  );\n}\n\nconst Web3TransactionList = () => {\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n  const transactions = useTransactions();\n\n  useEffect(() => {\n    Object.keys(transactions).forEach(hash => {\n      const tx = transactions[hash];\n      const confirmed = !!tx.receipt;\n      if (confirmed) {\n        closeSnackbar(hash);\n        enqueueSnackbar(<EtherscanTxLink hash={hash} chainId={tx.chainId} prefix=\"Confirmed:\" />, {variant: 'success', persist: true, key: `${hash}-confirmed`});\n      } else {\n        enqueueSnackbar(<EtherscanTxLink hash={hash} chainId={tx.chainId} prefix=\"Pending:\" />, {variant: 'info', persist: true, key: hash});\n      }\n    });\n  }, [transactions]);\n\n  return null;\n};\n\n","import React, { useState, useEffect, forwardRef } from 'react';\nimport { NavLink, Link, useLocation } from 'react-router-dom';\nimport {\n  useMediaQuery,\n  Button,\n  Collapse,\n  Container,\n  Divider,\n  Drawer,\n  Fab,\n  Grid,\n  Hidden,\n  List,\n  ListItem,\n} from '@material-ui/core';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport { makeStyles, useTheme } from \"@material-ui/styles\";\nimport clsx from \"clsx\";\n\nimport { SETTINGS_ROUTE } from './Routes';\nimport { Web3Status } from './Web3Status';\nimport { useAppTemplate } from './contexts/AppTemplateContext';\n\n//import { Footer } from './Footer';\n\nimport { Emoji } from 'emoji-mart';\nimport 'emoji-mart/css/emoji-mart.css';\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    height: \"100%\",\n  },\n  drawer: {\n    [theme.breakpoints.up('sm')]: {\n      width: drawerWidth,\n      flexShrink: 0,\n    },\n  },\n  drawerPaper: {\n    width: drawerWidth,\n  },\n  content: {\n    height: \"100%\",\n    flexGrow: 1,\n    padding: theme.spacing(3),\n  },\n  navlist: {\n    backgroundColor: theme.palette.white,\n    //display: \"flex\",\n    flexDirection: \"column\",\n    height: \"100%\",\n    padding: theme.spacing(2)\n  },\n  divider: {\n    margin: theme.spacing(2, 0)\n  },\n  nav: {\n    marginBottom: theme.spacing(2)\n  },\n  item: {\n    display: \"flex\",\n    paddingTop: 0,\n    paddingBottom: 0,\n    marginTop: \"auto\",\n  },\n  settingsItem: {\n    color: theme.palette.text.disabled,\n    padding: \"10px 4px\",\n    justifyContent: \"flex-start\",\n    textTransform: \"none\",\n    letterSpacing: 0,\n    width: \"100%\",\n    fontWeight: theme.typography.fontWeightMedium\n  },\n  button: {\n    //color: colors.blueGrey[800],\n    padding: \"10px 8px\",\n    justifyContent: \"flex-start\",\n    textTransform: \"none\",\n    letterSpacing: 0,\n    width: \"100%\",\n    fontWeight: theme.typography.fontWeightMedium\n  },\n  icon: {\n    color: theme.palette.icon,\n    width: 24,\n    height: 24,\n    display: \"flex\",\n    alignItems: \"center\",\n    marginRight: theme.spacing(1)\n  },\n  active: {\n    color: theme.palette.primary.main,\n    fontWeight: theme.typography.fontWeightMedium,\n    \"& $icon\": {\n      color: theme.palette.primary.main\n    },\n  },\n  fab: {\n    position: 'fixed',\n    top: 'auto',\n    right: 'auto',\n    margin: 0,\n    bottom: theme.spacing(2),\n    left: theme.spacing(2),\n  },\n}));\n\nconst NavLinkWithRef = forwardRef((props, ref) => (\n  <NavLink innerRef={ref} {...props} />\n));\n\nconst settingsSubNavs = [\n  {name: 'Tabs', route: 'tabs', icon: SettingsIcon},\n  {name: 'Integrations', route: 'integrations', icon: SettingsIcon},\n  {name: 'Address book', route: 'addresses', icon: SettingsIcon},\n];\n\n\n\nexport const Layout = ({ children }) => {\n  const theme = useTheme();\n  const classes = useStyles(theme);\n  const location = useLocation();\n  const { pathname } = location;\n  const isDesktop = useMediaQuery(theme.breakpoints.up(\"lg\"), {\n    defaultMatches: true\n  });\n\n  const appTemplate = useAppTemplate();\n\n  const [openSidebar, setOpenSidebar] = useState(false);\n\n  const toggleSidebar = () => {\n    setOpenSidebar(!openSidebar);\n  };\n  const shouldOpenSidebar = isDesktop ? true : openSidebar;\n\n  useEffect(() => {\n    if (!isDesktop) {\n      setOpenSidebar(false);\n    }\n  }, [location]);\n\n  const renderSettingsSubNavs = () => settingsSubNavs.map(s =>\n    <ListItem className={classes.subitem} key={s.name}>\n      <Button\n        className={clsx(classes.button, (showSubSettings ? undefined : classes.settingsItem))}\n        component={Link}\n        to={`/_/${s.route}`}\n      >\n        <div className={classes.icon}></div>\n        { s.name }\n      </Button>\n    </ListItem>\n  );\n\n  const showSubSettings = pathname.startsWith(SETTINGS_ROUTE);\n\n  const container = window !== undefined ? () => window.document.body : undefined;\n\n  const drawer = <div>\n    <Grid container  style={{height: '100%'}}>\n      <Grid item xs={12} style={{marginBottom: 'auto'}}>\n\n        <List>\n          { appTemplate.tabs && Object.keys(appTemplate.tabs).map((tabId, k) => (\n            <ListItem className={classes.item} key={`/${appTemplate.tabs[tabId].slug}`} disableGutters>\n              <Button\n                activeClassName={classes.active}\n                className={classes.button}\n                component={NavLinkWithRef}\n                to={`/${appTemplate.tabs[tabId].slug}`}\n              >\n                <div className={classes.icon}>\n                  { appTemplate.tabs[tabId].icon ?\n                    <Emoji emoji={appTemplate.tabs[tabId].icon} size={24} set={'apple'} /> : undefined\n                  }\n                </div>\n                { appTemplate.tabs[tabId].name }\n              </Button>\n\n            </ListItem>\n          )) }\n        </List>\n\n      </Grid>\n\n      <Grid item xs={12}>\n        <List className={classes.list} style={{marginTop: 'auto'}}>\n\n          <Divider />\n          <ListItem className={clsx(classes.item, classes.settings, (showSubSettings ? undefined : classes.settingsItem))} disableGutters>\n            <Button\n              className={clsx(classes.button, (showSubSettings ? undefined : classes.settingsItem))}\n              component={Link}\n              to={'/_/settings'}\n            >\n              <div className={clsx(classes.icon, classes.settingsItem)}>\n                <SettingsIcon />\n              </div>\n              Settings\n            </Button>\n          </ListItem>\n\n          <Collapse in={showSubSettings}>\n            { renderSettingsSubNavs() }\n          </Collapse>\n\n        </List>\n      </Grid>\n    </Grid>\n  </div>;\n\n  return (\n    <div className={classes.root}>\n      <nav className={classes.drawer} aria-label=\"Navigation\">\n\n        { /* Mobile */ }\n        <Hidden smUp implementation=\"css\">\n          <Drawer\n            container={container}\n            variant=\"temporary\"\n            anchor={theme.direction === 'rtl' ? 'right' : 'left'}\n            open={openSidebar}\n            onClose={toggleSidebar}\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            ModalProps={{\n              keepMounted: true, // Better open performance on mobile.\n            }}\n          >\n            {drawer}\n          </Drawer>\n        </Hidden>\n\n        { /* Desktop */ }\n        <Hidden xsDown implementation=\"css\">\n          <Drawer\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            variant=\"permanent\"\n            open\n          >\n            {drawer}\n          </Drawer>\n        </Hidden>\n      </nav>\n      <main className={classes.content}>\n        <Web3Status />\n        { children }\n      </main>\n\n\n      <Hidden smUp implementation=\"css\">\n        <Fab className={classes.fab} color=\"primary\" size=\"small\" onClick={toggleSidebar}><MenuIcon /></Fab>;\n      </Hidden>\n    </div>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport { useWeb3React } from '@web3-react/core'\n\nimport { injected, useWeb3ConnectExisting } from './lib/web3';\nimport { useActions } from './actions';\nimport { useAppTemplate } from './contexts/AppTemplateContext';\nimport { Spinner } from './components/Controls/Spinner';\nimport { ErrorMsg } from './components/Controls/ErrorMsg';\n\nimport exampleTemplate from './examples/default.json';\n\nexport const Loading = ({ children, storage }) => {\n  const appTemplate = useAppTemplate();\n  const [settingsLoaded, setSettingsLoaded] = useState(false);\n  const [loadingError, setLoadingError] = useState(false);\n  const { integrations } = appTemplate;\n  const { loadAppTemplate, connectIntegration, loadSettings } = useActions();\n  const { activate } = useWeb3React();\n  const triedWeb3Existing = useWeb3ConnectExisting();\n\n  // load user settings\n  useEffect(() => {\n    if (!settingsLoaded) {\n      loadSettings();\n      setSettingsLoaded(true);\n    }\n  }, [settingsLoaded]);\n\n  // Load saved app template from localstorage if exsits, otherwise load example template\n  useEffect(() => {\n    (async () => {\n      try {\n        const savedTemplate = await storage.load();\n        loadAppTemplate((savedTemplate || exampleTemplate), storage);\n      } catch (err) {\n        setLoadingError(err.toString());\n      }\n    })();\n  }, []);\n\n  // Connect integrations\n  useEffect(() => {\n    if (!appTemplate.__loaded) { return; }\n    const integrationKeys = Object.keys(integrations);\n    for (let x=0; x < integrationKeys.length; x++) {\n      const integration = integrations[integrationKeys[x]];\n      if (!integration.__connected) { connectIntegration(integration); }\n    }\n  }, [appTemplate.__loaded, integrations]);\n\n  // connect metamask if exists\n  // probably could check for a infura integration here and add it as well.\n  useEffect(() => {\n    if (triedWeb3Existing) {\n      activate(injected);\n    }\n  }, []);\n\n  if (loadingError) {\n    return <ErrorMsg message={loadingError} />;\n  }\n\n  if (!appTemplate.__loaded || (!triedWeb3Existing)) {\n    return <Spinner />;\n  }\n\n  const connectingStatuses = Object.keys(integrations).map(integrationKey => integrations[integrationKey].__connected);\n  if (connectingStatuses.includes(false)) {\n    return <Spinner />;\n  }\n\n  return (\n    <div>\n      { /* web3context.error ? <ErrorMsg message={web3context.error} /> : undefined */ }\n      { children }\n    </div>\n  );\n\n}\n","import React from 'react';\n\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { Router } from 'react-router-dom';\nimport { createBrowserHistory } from \"history\";\nimport { Web3Provider } from '@ethersproject/providers'\nimport { Web3ReactProvider } from '@web3-react/core'\nimport { ToastProvider } from 'react-toast-notifications'\n\nimport theme from './theme';\nimport { CustomToast } from './Notifications';\nimport { Layout } from './Layout';\nimport { Routes } from './Routes';\nimport { Loading } from './Loading';\n\nimport { Web3ContextProvider } from './contexts/Web3Context';\nimport { AppTemplateProvider } from './contexts/AppTemplateContext';\n\nconst history = createBrowserHistory();\n\nfunction getLibrary(provider) {\n  const library = new Web3Provider(provider);\n  library.pollingInterval = 12000;\n  return library;\n}\n\n\nexport default function App({ storage }) {\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <Router history={history}>\n        <Web3ReactProvider getLibrary={getLibrary}>\n          <ToastProvider components={{Toast: CustomToast}}>\n            <Web3ContextProvider>\n              <AppTemplateProvider storage={storage}>\n                <Loading storage={storage}>\n                  <Layout>\n                    <Routes />\n                  </Layout>\n                </Loading>\n              </AppTemplateProvider>\n            </Web3ContextProvider>\n          </ToastProvider>\n        </Web3ReactProvider>\n      </Router>\n    </ThemeProvider>\n  );\n}\n","import React from 'react';\nimport {\n  Button,\n  Checkbox,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Typography,\n} from '@material-ui/core';\nimport { useSettings } from '../../contexts/AppTemplateContext';\nimport { useActions } from '../../actions';\n\nexport const HttpStorageOptions = () => {\n  const settings = useSettings();\n\n  return <div>\n\n    <List>\n      <ListItem>\n        <ListItemText primary={`File served from local computer. Download template to save changes`} />\n      </ListItem>\n\n    </List>\n\n  </div>;\n};\n","import './wdyr';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nimport { HttpStorage, BrowserStorage }  from './lib/storage';\n\nlet storage;\n\nswitch (window.REACT_APP_ETHERFACE_STORAGE) {\n  case 'http':\n    storage = new HttpStorage(window.REACT_APP_ETHERFACE_TEMPLATE_URL);\n    break;\n\n  default:\n    storage = new BrowserStorage('etherface-file');\n}\n\nReactDOM.render(\n  <App storage={storage} />,\n  document.querySelector('#root'),\n);\n","import { HttpStorageOptions } from './HttpStorageOptions';\n\nexport default class {\n  constructor(httpLocation) {\n    this.type = 'http'\n    this.name = 'HTTP Source';\n    this.httpLocation = httpLocation;\n    this.canSave = false;\n    this.settingsComponent = HttpStorageOptions;\n  }\n\n  async load() {\n    console.log('File load here...');\n    const res = await fetch(this.httpLocation);\n    return (await res.json());\n  }\n\n  async save() {\n    console.error('save to http source not implemented');\n  }\n\n  async delete() {\n    console.error('Delete from http source not implemented');\n  }\n\n}\n","import React from 'react';\nimport {\n  Button,\n  Checkbox,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Typography,\n} from '@material-ui/core';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport SaveIcon from '@material-ui/icons/Save';\nimport { useHistory } from 'react-router-dom';\nimport { useToasts } from 'react-toast-notifications'\nimport { Confirm } from '../../components/Controls/Confirm';\nimport { useAppTemplate, useSettings, useStorage, serializeTemplate } from '../../contexts/AppTemplateContext';\nimport { useActions } from '../../actions';\n\nimport exampleTemplate from '../../examples/default.json';\n\nexport const LocalstorageOptions = () => {\n  const template = useAppTemplate();\n  const storage = useStorage();\n  const settings = useSettings();\n  const { loadAppTemplate, setSetting } = useActions();\n  const { addToast } = useToasts();\n  const  history = useHistory();\n\n  const toggleOption = (option) => {\n    setSetting(option, !settings[option]);\n  };\n\n  const deleteFromLocalstorage = () => {\n    storage.delete();\n\n    loadAppTemplate(exampleTemplate, storage);\n\n    addToast('Template deleted from browser localstorage', {apperance: 'success', autoDismiss: false});\n    history.push('/');\n  };\n\n  const saveToStorage = () => {\n    const exportedTemplate = serializeTemplate(template);\n    storage.save(exportedTemplate);\n    addToast('Template saved to localstorage', {apperance: 'success', autoDismiss: true, autoDismissTimeout: 3000});\n  }\n\n\n  return <div>\n\n    <List>\n      <ListItem button onClick={() => toggleOption('autosave')}>\n        <ListItemIcon>\n          <Checkbox\n            edge=\"start\"\n            checked={settings.autosave}\n            tabIndex={-1}\n            disableRipple\n            inputProps={{ 'aria-labelledby': 'checkbox-list-label-' }}\n          />\n        </ListItemIcon>\n        <ListItemText primary=\"Auto-save changes to browser storage\" />\n      </ListItem>\n\n      <ListItem button onClick={saveToStorage}>\n        <ListItemIcon>\n          <SaveIcon />\n        </ListItemIcon>\n        <ListItemText>Save template to localstorage</ListItemText>\n      </ListItem>\n\n      <Confirm\n        title=\"Delete template from Browser storage\"\n        description=\"Are you sure you want to delete the template from your browser's localstorage?\"\n        onConfirm={deleteFromLocalstorage}\n      >\n        <ListItem button>\n          <ListItemIcon>\n            <DeleteIcon />\n          </ListItemIcon>\n          <ListItemText>Delete from Localstorage</ListItemText>\n        </ListItem>\n      </Confirm>\n    </List>\n\n  </div>;\n};\n\n","import { LocalstorageOptions } from './LocalstorageOptions';\n\nexport default class {\n\n  constructor(localstoragePrefix) {\n    this.type = 'browser';\n    this.name = 'Browser file storage';\n    this.localstoragePrefix = localstoragePrefix;\n    this.settingsComponent = LocalstorageOptions;\n    this.canSave = true;\n  }\n\n  async load() {\n    const templateJSON = localStorage.getItem(this.localstoragePrefix);\n    return JSON.parse(templateJSON);\n  }\n\n  async save(appTemplate) {\n    localStorage.setItem(this.localstoragePrefix, JSON.stringify(appTemplate));\n  }\n\n  async delete() {\n    localStorage.removeItem(this.localstoragePrefix);\n  }\n\n};\n"],"sourceRoot":""}