{"version":3,"sources":["assets/images/thegraph.jpg","../node_modules/encoding/lib sync","theme.js","Notifications.js","contexts/AppTemplateContext.js","lib/thegraph.ts","lib/localstorage.js","actions.js","components/Interface/NewPage.js","constants.js","components/Interface/Components/NewComponent.js","components/Controls/SelectField.js","lib/web3.js","components/Interface/Components/Web3Transaction/NewWeb3Transaction.js","contexts/Web3Context.js","components/Controls/ErrorMsg.js","components/Controls/Spinner.js","components/Interface/Components/Web3Transaction/ShowWeb3Transaction.js","components/Interface/Components/Web3Transaction/index.js","components/Interface/Components/Web3Transaction/EditWeb3Transaction.js","components/Interface/Components/Web3Transaction/PreviewWeb3Transaction.js","components/Interface/Components/Web3Call/NewWeb3Call.js","components/Interface/Components/Web3Call/ShowWeb3Call.js","components/Interface/Components/Web3Call/index.js","components/Interface/Components/Web3Call/EditWeb3Call.js","components/Interface/Components/Web3Call/PreviewWeb3Call.js","lib/graphql.js","components/Interface/Components/Datatable/NewDatatable.js","components/Interface/Components/Datatable/Query.js","components/Interface/Components/Datatable/TablePaginationActions.js","components/Interface/Components/Datatable/ShowDatatable.js","components/Interface/Components/Datatable/index.js","components/Interface/Components/Datatable/EditDatatable.js","components/Interface/Components/Datatable/PreviewDatatable.js","components/Interface/Components/Datatable/GraphQLComponent.js","components/Interface/Components/Markdown/ShowMarkdown.js","components/Interface/Components/index.js","components/Interface/Components/Markdown/index.js","components/Interface/Components/Markdown/NewMarkdown.js","components/Interface/Components/Markdown/EditMarkdown.js","components/Interface/Components/Markdown/PreviewMarkdown.js","components/Interface/EditButton.js","components/Controls/Confirm.js","components/Interface/EditPage.js","components/Interface/Page.js","components/Interface/Tab.js","components/Settings/SettingsMain.js","components/Controls/Identicon.js","components/Controls/FileUploader.js","lib/etherscan.js","components/Settings/NewAddress.js","components/Settings/Addresses.js","components/Settings/AddressABI.js","components/Settings/EditAddress.js","components/Settings/NewIntegration.js","components/Settings/Integrations.js","components/Settings/NewTab.js","components/Controls/EmojiPicker.js","components/Settings/EditTab.js","components/Settings/Tabs.js","components/Settings/JsonView.js","components/Settings/Settings.js","Routes.js","Web3Status.js","Layout.js","Loading.js","App.js","lib/storage/HttpStorageOptions.js","index.js","lib/storage/http.js","lib/storage/LocalstorageOptions.js","lib/storage/browser.js"],"names":["module","exports","webpackEmptyContext","req","e","Error","code","keys","resolve","id","theme","createMuiTheme","palette","primary","main","secondary","error","red","A400","background","default","Alert","props","elevation","variant","CustomToast","appearance","children","autoDismissTimeout","React","useState","open","setOpen","handleClose","event","reason","Snackbar","autoHideDuration","onClose","severity","AppTemplateStore","createContext","Object","filter","obj","predicate","key","reduce","res","initialState","settings","__loaded","nextId","objs","length","max","forEach","__id","maxId","reducer","state","action","type","addresses","tabs","pages","components","integrations","payload","template","storage","tab","tabId","page","pageId","__tab_id","component","componentId","__page_id","integration","integrationKey","__connected","name","__version","__source","slug","slugify","firstPage","title","t","undefined","integrationId","i","c","map","address","network","a","setting","value","AppTemplateProvider","useReducer","dispatch","addToast","useToasts","useMemo","autosave","exportedTemplate","serializeTemplate","save","apperance","autoDismiss","autoSave","Provider","useAppTemplate","useContext","useAddresses","useAddress","find","useComponentsByPageId","p","useSettings","filterInternalFields","copy","assign","substr","serializedTemplate","tabKey","tab_pages","pageKey","page_components","f","componentKey","push","addressKey","useRemoteSchema","endpoint","cachedSchemas","setCachedSchemas","useEffect","JSON","fetchGraphqlSchema","schema","parse","data","__schema","OPTIONS","optionsKey","opt","options","optionVal","localStorage","getItem","val","setItem","stringify","useActions","loadAppTemplate","addTab","editTab","deleteTab","addPage","editPage","addIntegration","deleteIntegration","connectIntegration","__instance","uri","cache","InMemoryCache","httpLink","HttpLink","credentials","ApolloClient","link","ApolloLink","from","onError","graphQLErrors","networkError","console","connectTheGraph","addComponent","editComponent","deleteComponent","addAddress","deleteAddress","editAddress","loadSettings","localstorage","setSetting","NewPage","tab_id","useForm","fields","label","submit","values","get","form","Typography","TextField","autoFocus","Button","color","onClick","NETWORKS","chainId","NewComponent","page_id","row","column","preSave","componentType","setComponentType","existingComponents","EditComponent","componentForType","onCancel","onCreate","layout","defaultLayout","maxRow","existingRow","Card","CardHeader","CardContent","Grid","container","COMPONENT_TYPES","item","spacing","SelectField","helperText","fullWidth","rest","FormControl","InputLabel","Select","option","MenuItem","FormHelperText","injected","InjectedConnector","supportedChainIds","n","useContractByAddress","addressRecord","useWeb3React","library","account","active","abi","provider","UncheckedJsonRpcSigner","getSigner","ethers","getDefaultProvider","Contract","useHasSigner","err","signer","utils","defineReadOnly","this","getAddress","transaction","sendUncheckedTransaction","then","hash","nonce","gasLimit","gasPrice","confirmations","wait","waitForTransaction","message","signMessage","Signer","SelectFunction","contract","queries","interface","functions","queryFuncs","q","indexOf","signature","addField","function","Web3Context","transactions","blockNumber","_checkedBlock","receipt","Web3ContextProvider","addTx","tx","setTxBlockNumber","setTxReceipt","useCallback","setBlockNumber","useWeb3Context","useTransactions","BlockNumberWatcher","stale","updateBlockNumber","getBlockNumber","catch","on","removeListener","TransactionStatusWatcher","useBlockNumber","getTransactionReceipt","useStyles","makeStyles","success","backgroundColor","green","dark","info","warning","amber","icon","fontSize","iconVariant","opacity","marginRight","display","alignItems","ErrorMsg","classes","Portal","anchorOrigin","vertical","horizontal","SnackbarContent","className","clsx","aria-describedby","IconButton","aria-label","root","width","marginTop","Spinner","SpinnerComponent","CircularProgress","LinearProgress","backdrop","zIndex","drawer","Web3TxResult","result","toString","size","new","addressOptions","optional","description","buttonText","addressesExist","Array","isArray","addAddressLink","to","Form","disabled","CardActions","show","hasSigner","setResult","resultLoading","setResultLoading","setError","func","funcFields","inputs","args","fieldKey","signerRequired","networkMismatch","warningText","reset","Box","flex","edit","onSave","initialValues","fromJS","formValues","preview","nework","Web3CallResult","displayResult","typeNameToQuerySingle","typeName","field","types","kind","normalizeFieldType","ofType","ModelSelect","onNext","selectedModel","setSelectedModel","models","queryType","subscriptionType","List","dense","model","ListItem","selected","ListItemText","FieldsSelect","selectedFields","setSelectedFields","includes","toggleSelected","fakelink","cursor","textDecoration","Query","graph_client","setSelectedQuery","expandLists","setExpandLists","query","gql","join","useQuery","client","loading","renderCell","__typename","rows","k","m","Table","TableBody","rowName","TableRow","TableCell","flexShrink","marginLeft","TablePaginationActions","count","pageCount","rowsPerPage","onChangePage","useTheme","direction","submitButton","PER_PAGE_OPTS","ShowDatatable","setPage","perPage","setPerPage","queryFields","enabled","skip","listQuery","cols","r","TableContainer","table","TableHead","kk","colName","TableFooter","TablePagination","rowsPerPageOptions","colSpan","SelectProps","inputProps","native","evt","onChangeRowsPerPage","parseInt","target","ActionsComponent","componentFields","initialChecked","checked","setChecked","gutterBottom","button","currentIndex","newChecked","splice","ListItemIcon","Checkbox","edge","tabIndex","disableRipple","ListItemSecondaryAction","newComponent","dataLink","remoteSchema","singleQuery","typeNameToQueryMany","order","newField","data_source","useIntegration","selectedQuery","needSchema","content","multiline","rowsMax","contentByLine","split","previewContent","slice","Math","min","source","datatableComponents","web3TransactionComponents","web3CallComponents","componentRecord","componentsByColumn","colNumber","sort","b","fab","position","bottom","right","EditButton","Fab","Transition","forwardRef","ref","Slide","margin","Confirm","onConfirm","handleClickOpen","Dialog","TransitionComponent","keepMounted","aria-labelledby","DialogTitle","DialogContent","DialogContentText","DialogActions","startIcon","Children","child","cloneElement","StyledSlider","withStyles","Slider","sliderPositionsToColumnWidths","sliderPositions","remainder","columnWidths","EditPage","pageColumns","pageColumnPositions","setEditComponent","showAddComponent","setShowAddComponent","useHistory","columns","columnCount","setColumnCount","x","columnWithdsToSliderPositions","setSliderPositions","changesMade","setChangesMade","required","componentLayout","componentGrid","colSize","colNum","actualColNum","rowComponents","xs","PreviewComponent","componentPreview","style","textAlign","updateColumnCount","newSliderPositions","saveLayoutChanges","ButtonGroup","marks","onChange","my","NewComponentModal","fullScreen","useMediaQuery","breakpoints","down","Container","fixed","Page","editMode","setEditMode","AlertTitle","ShowComponent","Tab","usePagesByTabId","SettingsMain","SettingsOptions","settingsComponent","Link","formatted","fileDownload","identicon","Identicon","pixelWidth","useRef","current","innerHTML","appendChild","Jazzicon","FileUploader","accept","onFileUpload","file","setFile","setLoading","handleFileSelect","useFileInput","files","multiple","reader","FileReader","onloadstart","onloadend","onload","readAsText","ETHERSCAN_NETWORKS","etherscanApiHost","etherscanNetwork","fetchAbi","fetch","json","status","etherscanUrl","EtherscanTxLink","prefix","href","rel","shortenTxHash","validateAddress","startsWith","avatar","blue","NewAddress","fetching","setFetching","deployedOptions","setDeployedOptions","networkOptions","fetchabi","validate","onSelect","networkId","setValue","FormControlLabel","control","Collapse","in","truffleJson","deployedNetworks","networks","contractName","NetworkOptionsSelector","networkRecord","ListItemAvatar","Avatar","height","Addresses","noAddresses","Chip","onDelete","AddressABI","calls","callFns","txFns","events","callFn","txFn","underline","EditAddress","useParams","history","NewIntegration","flexDirection","nameForIntegraion","integrationType","Integrations","showNewIntegration","setShowNewIntegration","src","thegraphLogo","alt","NewTab","errMsg","InputProps","endAdornment","InputAdornment","EmojiPicker","onRemove","set","EditTab","showSelectIcon","setShowSelectIcon","selectIcon","emoji","newTab","iconText","byId","Tabs","selectIconTabId","setSelectIconTabId","selectedEditTab","setSelectedEditTab","md","JsonView","Settings","exact","path","Routes","appTemplate","defaultTab","render","chip","top","snacks","Web3Status","preventDuplicate","Web3TransactionList","useSnackbar","enqueueSnackbar","closeSnackbar","persist","up","drawerPaper","flexGrow","padding","navlist","white","divider","nav","marginBottom","paddingTop","paddingBottom","settingsItem","text","justifyContent","textTransform","letterSpacing","fontWeight","typography","fontWeightMedium","NavLinkWithRef","innerRef","settingsSubNavs","route","SettingsIcon","Layout","pathname","useLocation","defaultMatches","openSidebar","setOpenSidebar","showSubSettings","window","document","body","disableGutters","activeClassName","list","Divider","s","subitem","Hidden","smUp","implementation","Drawer","anchor","paper","ModalProps","xsDown","Loading","settingsLoaded","setSettingsLoaded","loadingError","setLoadingError","activate","triedWeb3Existing","tried","setTried","isAuthorized","warn","useWeb3ConnectExisting","load","savedTemplate","exampleTemplate","integrationKeys","createBrowserHistory","getLibrary","Web3Provider","pollingInterval","App","ThemeProvider","CssBaseline","Toast","HttpStorageOptions","httpLocation","canSave","log","LocalstorageOptions","delete","localstoragePrefix","templateJSON","removeItem","REACT_APP_ETHERFACE_STORAGE","HttpStorage","REACT_APP_ETHERFACE_TEMPLATE_URL","BrowserStorage","ReactDOM","querySelector"],"mappings":"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","file":"static/js/main.ff3ac4b9.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/thegraph.03df70d0.jpg\";","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 474;","import { red } from '@material-ui/core/colors';\nimport { createMuiTheme } from '@material-ui/core/styles';\n\n// A custom theme for this app\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#556cd6',\n    },\n    secondary: {\n      main: '#19857b',\n    },\n    error: {\n      main: red.A400,\n    },\n    background: {\n      default: '#fff',\n    },\n  },\n});\n\nexport default theme;\n","import React from 'react';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport MuiAlert from '@material-ui/lab/Alert';\n\nfunction Alert(props) {\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n}\n\nexport const CustomToast = ({ appearance, children, autoDismissTimeout }) => {\n  const [open, setOpen] = React.useState(true);\n\n  const handleClose = (event, reason) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n    setOpen(false);\n  };\n\n  return (\n      <Snackbar open={open} autoHideDuration={autoDismissTimeout} onClose={handleClose}>\n        <Alert onClose={handleClose} severity={appearance}>\n          { children }\n        </Alert>\n      </Snackbar>\n  );\n};\n","import React, { useMemo } from 'react';\nimport slugify from 'slugify';\nimport { useToasts } from 'react-toast-notifications'\n\nexport const AppTemplateStore = React.createContext();\n\n// TODO Move this somewhere else\nObject.filter = (obj, predicate) =>\n  Object.keys(obj)\n    .filter( key => predicate(obj[key]) )\n    .reduce( (res, key) => (res[key] = obj[key], res), {} );\n\nconst initialState = {\n  settings: {},\n  __loaded: false,\n};\n\nfunction maxId(objs) {\n  let max = 0;\n  Object.keys(objs).forEach(key => {\n    if (objs[key].__id > max) { max = objs[key].__id; }\n  });\n  return max;\n}\n\nfunction nextId(objs) {\n  if (Object.keys(objs).length === 0) { return 0; }\n  return maxId(objs) + 1;\n}\n\nexport function reducer(state, action) {\n  switch (action.type) {\n    case 'LOAD_TEMPLATE':\n      // TODO: validate JSON\n      let tabs = {};\n      let pages = {};\n      let components = {};\n      let integrations = {};\n      let addresses = [];\n      const { template, storage } = action.payload;\n\n      // Flatten components, pages and tabs\n      template.tabs && template.tabs.forEach((tab) => {\n        const tabId = nextId(tabs);\n        tabs[tabId] = {...tab, __id: tabId};\n        tab.pages.forEach((page)  => {\n          const pageId = nextId(pages);\n          pages[pageId] = {...page, __id: pageId, __tab_id: tabId};\n          page.components.forEach((component) => {\n            const componentId = nextId(components);\n            components[componentId] = {...component, __id: componentId, __page_id: pageId};\n          });\n          delete pages[pageId].components;\n        });\n        delete tabs[tabId].pages;\n      });\n\n      template.integrations && template.integrations.forEach((integration, integrationKey) =>\n        integrations[integrationKey] = {\n          ...integration,\n          __id: integrationKey,\n          __connected: false,\n        }\n      );\n\n      addresses = template.addresses || [];\n\n      return {\n        ...state,\n        name: action.payload.name,\n        tabs,\n        pages,\n        components,\n        integrations,\n        addresses,\n        __loaded: true,\n        __version: 0,\n        __source: storage,\n      };\n\n    case 'ADD_TAB': {\n      const tabId = nextId(state.tabs);\n      // TODO: Move validation error throwing to action creator\n      if (!action.payload.name) { throw new Error('Name required'); }\n      const slug = slugify(action.payload.name);\n\n      // Create a first page for the tab\n      const pageId = nextId(state.pages);\n      const firstPage = {\n        __id: pageId,\n        __tab_id: tabId,\n        title: action.payload.title,\n      };\n\n      return {\n        ...state,\n        tabs: {\n          ...state.tabs,\n          [tabId]: {\n            ...action.payload,\n            __id: tabId,\n            slug,\n          },\n        },\n        pages: {\n          ...state.pages,\n          [pageId]: firstPage,\n        },\n        __version: state.__version + 1,\n      };\n    }\n\n    case 'EDIT_TAB':\n      return {\n        ...state,\n        tabs: {\n          ...state.tabs,\n          [action.payload.__id]: {\n            ...state.tabs[action.payload.__id],\n            ...action.payload,\n          },\n        },\n        __version: state.__version + 1,\n      };\n\n    case 'DELETE_TAB':\n      // TODO: Need to delete Pages and Tabs also\n      return {\n        ...state,\n        tabs: Object.filter(state.tabs, t => t.__id !== action.payload.__id),\n        __version: state.__version + 1,\n      };\n\n    case 'ADD_PAGE': {\n      if (action.payload.__tab_id === undefined) { throw new Error('page requires tab id'); }\n      const pageId = nextId(state.pages);\n\n      return {\n        ...state,\n        pages: {\n          ...state.pages,\n          [pageId]: {\n            ...action.payload,\n            __id: pageId,\n          },\n        },\n        __version: state.__version + 1,\n      };\n    }\n\n    case 'EDIT_PAGE':\n      return {\n        ...state,\n        pages: {\n          ...state.pages,\n          [action.payload.__id]: {\n            ...state.pages[action.payload.__id],\n            ...action.payload,\n          },\n        },\n        __version: state.__version + 1,\n      };\n\n    case 'ADD_INTEGRATION':\n      const integrationId = nextId(state.integrations);\n      return {\n        ...state,\n        integrations: {\n          ...state.integrations,\n          [integrationId]: {\n            ...action.payload,\n            __id: integrationId,\n          },\n        },\n        __version: state.__version + 1,\n      };\n\n    case 'DELETE_INTEGRATION':\n      return {\n        ...state,\n        integrations: Object.filter(state.integrations, i => i.__id !== action.payload.__id),\n        __version: state.__version + 1,\n      };\n\n    case 'CONNECT_INTEGRATION':\n      return {\n        ...state,\n        integrations: {\n          ...state.integrations,\n          [action.payload.__id]: {\n            ...action.payload,\n            __connected: true,\n          },\n        },\n      };\n\n    case 'ADD_COMPONENT':\n      //TODO: move valiation to action creator\n      if (action.payload.__page_id === undefined) { throw new Error('Page id required on component'); }\n      // TODO: ensure page_id actually exists also??\n      const componentId = nextId(state.components);\n      return {\n        ...state,\n        components: {\n          ...state.components,\n          [componentId]: {\n            ...action.payload,\n            __id: componentId,\n          },\n        },\n        __version: state.__version + 1,\n      };\n\n    case 'EDIT_COMPONENT':\n      return {\n        ...state,\n        components: {\n          ...state.components,\n          [action.payload.__id]: {\n            ...state.components[action.payload.__id],\n            ...action.payload,\n          },\n        },\n        __version: state.__version + 1,\n      };\n\n    case 'DELETE_COMPONENT':\n      return {\n        ...state,\n        components: Object.filter(state.components, c => c.__id !== action.payload.__id),\n        __version: state.__version + 1,\n      };\n\n    case 'ADD_ADDRESS':\n      return {\n        ...state,\n        // TODO:: Ensure address doesn't already exist\n        addresses: [...state.addresses, action.payload],\n        __version: state.__version + 1,\n      };\n\n    case 'EDIT_ADDRESS':\n      return {\n        ...state,\n        addresses: state.addresses.map((address) => {\n          if (address.address !== action.payload.address && address.network !== action.payload.network) {\n            return address;\n          }\n          return {\n            ...address,\n            ...action.payload,\n          };\n        }),\n        __version: state.__version + 1,\n      };\n\n    case 'DELETE_ADDRESS':\n      return {\n        ...state,\n        addresses: state.addresses.filter(a => (a.address !== action.payload.address && a.network !== action.payload.network)),\n        __version: state.__version + 1,\n      };\n\n    case 'LOAD_SETTINGS':\n      return {\n        ...state,\n        settings: action.payload,\n      };\n\n    case 'SET_SETTING':\n      return {\n        ...state,\n        settings: {\n          ...state.settings,\n          [action.payload.setting]: action.payload.value,\n        },\n      };\n\n    default:\n      return state;\n  }\n\n}\n\nexport const AppTemplateProvider = ({ children, storage }) => {\n  const [state, dispatch] = React.useReducer(reducer, initialState);\n  const { addToast } = useToasts();\n\n  // TODO: React warning about updating during state transition\n  function autoSave() {\n    const exportedTemplate = serializeTemplate(state);\n    storage.save(exportedTemplate);\n    addToast(`Autosaved to ${storage.name}`, {apperance: 'success', autoDismiss: true, autoDismissTimeout: 3000});\n  }\n\n  // Autosave on changes to template\n  useMemo(() => {\n    if (state.__version && state.__version > 0) {\n      if (state.settings.autosave) {\n        autoSave();\n      }\n    }\n  }, [state.__version]);\n\n  return <AppTemplateStore.Provider value={{state, dispatch}}>\n    { children }\n  </AppTemplateStore.Provider>;\n};\n\nexport const useAppTemplate = () => {\n  const { state } = React.useContext(AppTemplateStore);\n  return state;\n};\n\nexport const useAddresses = () => {\n  const { state } = React.useContext(AppTemplateStore);\n  return state.addresses;\n};\n\nexport const useAddress = (address, network) => {\n  const { state } = React.useContext(AppTemplateStore);\n  return state.addresses.find(a => a.address === address && a.network === network);\n};\n\nexport const usePagesByTabId = (tabId) => {\n  const { state } = React.useContext(AppTemplateStore);\n  const { pages } = state;\n  return Object.filter(pages, p => p.__tab_id === tabId);\n};\n\nexport const useComponentsByPageId = (pageId) => {\n  const { state } = React.useContext(AppTemplateStore);\n  const { components } = state;\n  return Object.filter(components, p => p.__page_id === pageId);\n};\n\n//export const useDebugState = () => {\n//const { state } = React.useContext(AppTemplateStore);\n//console.log('DATA STATE: ', state);\n//};\n\nexport const useIntegration = (type, endpoint) => {\n  const { state } = React.useContext(AppTemplateStore);\n  const { integrations } = state;\n\n  const integration = integrations[Object.keys(Object.filter(integrations, i => i.type === type && i.endpoint === endpoint))[0]];\n  if (!integration || !integration.__connected) { return; }\n\n  return integration;\n};\n\nexport const useSettings = () => {\n  const { state } = React.useContext(AppTemplateStore);\n  return state.settings;\n};\n\nexport const useStorage = () => {\n  const { state } = React.useContext(AppTemplateStore);\n  return state.__source;\n};\n\nfunction filterInternalFields(obj) {\n  let copy = Object.assign({}, obj);\n  Object.keys(obj).forEach(key => {\n    if (key.substr(0,2) === '__') {\n      delete copy[key];\n    }\n  });\n  return copy;\n}\n\nexport function serializeTemplate(template) {\n  let serializedTemplate = {tabs: [], integrations: [], addresses: []};\n  Object.keys(template.tabs).forEach(tabKey => {\n    let tab = {...template.tabs[tabKey], pages: []};\n    let tab_pages = Object.filter(template.pages, p => p.__tab_id === tab.__id);\n    Object.keys(tab_pages).forEach(pageKey => {\n      let page = tab_pages[pageKey];\n      page.components = [];\n      let page_components = Object.filter(template.components, f => f.__page_id === page.__id);\n      Object.keys(page_components).forEach(componentKey => {\n        page.components.push(filterInternalFields(template.components[componentKey]));\n      });\n      tab.pages.push(filterInternalFields(page));\n    });\n    serializedTemplate.tabs.push(filterInternalFields(tab));\n  });\n\n  Object.keys(template.integrations).forEach(integrationKey => {\n    serializedTemplate.integrations.push(filterInternalFields(template.integrations[integrationKey]))\n  });\n\n  serializedTemplate.addresses = Object.keys(template.addresses).map(addressKey  => template.addresses[addressKey]);\n\n  return serializedTemplate;\n}\n","import { useState, useEffect } from 'react';\nimport {\n  InMemoryCache,\n  NormalizedCacheObject,\n} from \"apollo-cache-inmemory\";\nimport { ApolloClient } from \"apollo-client\";\nimport { ApolloLink } from \"apollo-link\";\nimport { onError } from \"apollo-link-error\";\nimport { HttpLink } from \"apollo-link-http\";\n//import { WebSocketLink } from \"apollo-link-ws\";\n//import { getMainDefinition } from \"apollo-utilities\";\n//import { SubscriptionClient } from \"subscriptions-transport-ws\";\n\nimport  fetchGraphqlSchema from 'fetch-graphql-schema';\n\nexport function connectTheGraph(uri: string): ApolloClient<NormalizedCacheObject> {\n  // Create the cache first, which we'll share across Apollo tooling.\n  // This is an in-memory cache. Since we'll be calling `createClient` on\n  // universally, the cache will survive until the HTTP request is\n  // responded to (on the server) or for the whole of the user's visit (in\n  // the browser)\n  const cache = new InMemoryCache();\n\n  // Create a HTTP client (both server/client). It takes the GraphQL\n  // server from the `GRAPHQL` environment variable, which by default is\n  // set to an external playground at https://graphqlhub.com/graphql\n  const httpLink = new HttpLink({\n    credentials: \"same-origin\",\n    uri,\n  });\n\n  // Return a new Apollo Client back, with the cache we've just created,\n  // and an array of 'links' (Apollo parlance for GraphQL middleware)\n  // to tell Apollo how to handle GraphQL requests\n  return new ApolloClient({\n    cache,\n    link: ApolloLink.from([\n      // General error handler, to log errors back to the console.\n      // Replace this in production with whatever makes sense in your\n      // environment. Remember you can use the global `SERVER` variable to\n      // determine whether you're running on the server, and record errors\n      // out to third-party services, etc\n      onError(({ graphQLErrors, networkError }) => {\n        console.error(graphQLErrors, networkError);\n      }),\n\n        // Split on HTTP and WebSockets\n        //split(\n          //({ query }) => {\n            //const definition = getMainDefinition(query);\n            //return (\n              //definition.kind === \"OperationDefinition\" &&\n              //definition.operation === \"subscription\"\n            //);\n          //},\n          // Use WebSockets for subscriptions\n          //new WebSocketLink(\n            // Replace http(s) with `ws` for connecting via WebSockts\n            //new SubscriptionClient(uri.replace(/^https?/, \"ws\"), {\n              //reconnect: true // <-- automatically redirect as needed\n            //})\n          //),\n          // ... fall-back to HTTP for everything else\n          httpLink\n        //)\n      ]),\n    });\n  }\n\nexport const useRemoteSchema = (endpoint: string): string | undefined => {\n  const [cachedSchemas, setCachedSchemas] = useState<{[key: string]:string}>({});\n\n  useEffect(() => {\n    (async () => {\n      if (!endpoint || cachedSchemas[endpoint]) { return; }\n      const schema = JSON.parse((await fetchGraphqlSchema(endpoint)));\n      setCachedSchemas({...cachedSchemas, [endpoint]: schema.data.__schema});\n    })();\n  }, [cachedSchemas, endpoint]);\n\n  return endpoint ? cachedSchemas[endpoint] : undefined;\n};\n","const OPTIONS = {\n  autosave: {default: true},\n};\n\nconst localstorageKey = 'etherface-setting';\n\nconst optionsKey = (key, opt) => `${key}.options.${opt}`;\n\nexport const loadSettings = () => {\n  let options = {};\n  Object.keys(OPTIONS).forEach(opt => {\n    const optionVal = localStorage.getItem(optionsKey(opt, localstorageKey));\n    if (optionVal === null && OPTIONS[opt].default !== undefined) {\n      options[opt] = OPTIONS[opt].default;\n    } else {\n      options[opt] = JSON.parse(optionVal);\n    }\n  });\n  return options;\n};\n\nexport const setSetting = (setting, val) => {\n  localStorage.setItem(optionsKey(setting, localstorageKey), JSON.stringify(val));\n};\n\nexport default {\n  loadSettings,\n  setSetting,\n};\n","import React from 'react';\nimport { AppTemplateStore } from './contexts/AppTemplateContext';\n\nimport { connectTheGraph } from './lib/thegraph';\nimport localstorage from './lib/localstorage';\n\nexport const useActions = () => {\n  const { dispatch } = React.useContext(AppTemplateStore);\n\n  function loadAppTemplate(template, storage) {\n    dispatch({ type: 'LOAD_TEMPLATE', payload: {template, storage} });\n  }\n\n  function addTab(tab){\n    dispatch({ type: 'ADD_TAB', payload: tab });\n  }\n\n  function editTab(tab) {\n    dispatch({ type: 'EDIT_TAB', payload: tab});\n  }\n\n  function deleteTab(tab){\n    dispatch({ type: 'DELETE_TAB', payload: tab });\n  }\n\n  function addPage(page){\n    dispatch({ type: 'ADD_PAGE', payload: page });\n  }\n\n  function editPage(page) {\n    dispatch({ type: 'EDIT_PAGE', payload: page});\n  }\n\n  function addIntegration(integration) {\n    dispatch({ type: 'ADD_INTEGRATION', payload: integration });\n  }\n\n  function deleteIntegration(integration) {\n    dispatch({ type: 'DELETE_INTEGRATION', payload: integration });\n  }\n\n  function connectIntegration(integration) {\n    const __instance = ((type) => {\n      switch (type) {\n        case 'thegraph':\n          return connectTheGraph(integration.endpoint);\n        default:\n          throw new Error ('Unsupported integration type: ', type);\n      }\n    })(integration.type);\n    dispatch({ type: 'CONNECT_INTEGRATION', payload: {...integration, __instance}});\n  }\n\n  function addComponent(component) {\n    dispatch({ type: 'ADD_COMPONENT', payload: component });\n  }\n\n  function editComponent(component) {\n    dispatch({ type: 'EDIT_COMPONENT', payload: component});\n  }\n\n  function deleteComponent(component) {\n    dispatch({ type: 'DELETE_COMPONENT', payload: component});\n  }\n\n  function addAddress(address) {\n    dispatch({ type: 'ADD_ADDRESS', payload: address});\n  }\n\n  function editAddress(address) {\n    dispatch({ type: 'EDIT_ADDRESS', payload: address});\n  }\n\n  function deleteAddress(address) {\n    dispatch({ type: 'DELETE_ADDRESS', payload: address});\n  }\n\n  function loadSettings() {\n    const settings = localstorage.loadSettings();\n    dispatch({ type: 'LOAD_SETTINGS', payload: settings});\n  };\n\n  function setSetting(setting, value) {\n    localstorage.setSetting(setting, value);\n    dispatch({ type: 'SET_SETTING', payload: {setting, value}});\n  }\n\n  return {\n    loadAppTemplate,\n    addTab,\n    editTab,\n    deleteTab,\n    addPage,\n    editPage,\n    addIntegration,\n    deleteIntegration,\n    connectIntegration,\n    addComponent,\n    editComponent,\n    deleteComponent,\n    addAddress,\n    deleteAddress,\n    editAddress,\n    loadSettings,\n    setSetting,\n  };\n};\n","import React from 'react';\nimport {\n  Button,\n  TextField,\n  Typography,\n} from '@material-ui/core';\n\nimport { useForm } from 'react-hooks-useform';\n\nimport { useActions } from '../../actions';\n\nexport const NewPage = ({ tab_id }) => {\n  const { addPage } = useActions();\n\n  const [fields, form] = useForm({\n    fields: [\n      { name: 'title', label: 'title' },\n    ],\n    submit: values => { addPage({title: values.get('title'), __tab_id: tab_id}); }\n  });\n\n\n  return (\n    <div>\n\n      <Typography>Add page</Typography>\n\n      <TextField {...fields.title } autoFocus />\n\n      <br />\n\n      <Button color=\"primary\" onClick={form.submit}>Add Page</Button>\n\n    </div>\n  );\n}\n\n","export const GRID_COLS = 12; // Number of columns in the grid\n\nexport const NETWORKS = [\n  {\n    chainId: 1,\n    id: 'mainnet',\n    name: 'Mainnet',\n  },\n  {\n    chainId: 3,\n    id: 'ropsten',\n    name: 'Ropsten',\n  },\n  {\n    chainId: 4,\n    id: 'rinkeby',\n    name: 'Rinkeby',\n  },\n  {\n    chainId: 5,\n    id: 'goerli',\n    name: 'Goerli',\n  },\n  {\n    chainId: 42,\n    id: 'kovan',\n    name: 'Kovan',\n  },\n  {\n    chainId: 1337,\n    id: 'private',\n    name: 'Private chain',\n  },\n  {\n    chainId: 5777,\n    id: 'ganache',\n    name: 'Ganache',\n  },\n];\n","import React, { useState } from 'react';\nimport {\n  Button,\n  Card,\n  CardContent,\n  CardHeader,\n  Grid,\n} from '@material-ui/core';\n\nimport { useActions } from '../../../actions';\nimport { useComponentsByPageId } from '../../../contexts/AppTemplateContext';\n\nimport { COMPONENT_TYPES, componentForType } from '.';\nimport { defaultLayout } from '../Page';\n\nexport const NewComponent = ({page_id, row, column, preSave}) => {\n  const [componentType, setComponentType] = useState();\n  const { addComponent } = useActions();\n  const existingComponents = useComponentsByPageId(page_id);\n\n  const onCancel = () => { setComponentType(undefined); }\n\n  const onCreate = (component) => {\n    let layout = Object.assign({}, defaultLayout);\n    if (row) {\n      layout.row = row;\n    } else {\n      let maxRow = 0;\n      Object.keys(existingComponents).forEach(componentKey => {\n        const existingRow = (existingComponents[componentKey].layout || defaultLayout).row;\n        if (existingRow > maxRow) {\n          maxRow = existingRow;\n        }\n      });\n      layout.row = maxRow + 1;\n    }\n    layout.column = column || 1;\n    if (preSave) { preSave(); }\n    addComponent({...component, __page_id: page_id, layout });\n  }\n\n  if (componentType) {\n    const EditComponent = componentForType(componentType, 'new');\n    return <EditComponent onCancel={onCancel} onCreate={onCreate} />;\n  }\n\n  return (\n    <div>\n      <Card>\n        <CardHeader title=\"New Component\" />\n        <CardContent>\n\n        <Grid container>\n          { COMPONENT_TYPES.map(componentType => (\n            <Grid item key={componentType.value} spacing={3}>\n              <Card >\n                <CardContent>\n                  <Button onClick={() => setComponentType(componentType.value)}>{ componentType.label }</Button>\n                </CardContent>\n              </Card>\n            </Grid>\n          )) }\n        </Grid>\n      </CardContent>\n    </Card>\n\n    </div>\n  );\n};\n","import React from 'react';\nimport {\n  FormControl,\n  FormHelperText,\n  InputLabel,\n  MenuItem,\n  Select,\n} from '@material-ui/core';\n\nexport const SelectField = ({\n  label,\n  error,\n  value,\n  helperText,\n  children,\n  options,\n  fullWidth,\n  ...rest\n}) => {\n\n  return (\n    <FormControl fullWidth={fullWidth}>\n      {label && <InputLabel error={error}>{label}</InputLabel>}\n      <Select\n        value={value}\n        {...rest}\n        error={error}\n      >\n        {options.map((option) => {\n          return <MenuItem key={option.value} value={option.value}>{option.label}</MenuItem>\n        })}\n      </Select>\n      <FormHelperText error={error}>{helperText}</FormHelperText>\n    </FormControl>\n  );\n}\n","import { useMemo, useState, useEffect } from 'react';\n\nimport { useWeb3React } from '@web3-react/core'\nimport { InjectedConnector } from '@web3-react/injected-connector'\nimport { ethers } from 'ethers';\n\nimport { NETWORKS } from '../constants';\nimport { useAddress } from '../contexts/AppTemplateContext';\n\nexport const injected = new InjectedConnector({ supportedChainIds: NETWORKS.map(n => n.chainId) })\n\nexport const shortenTxHash = (hash) =>\n  `${hash.substr(0,6)}...${hash.substr(62,4)}`;\n\nexport const useContractByAddress = (address, network) => {\n  const addressRecord = useAddress(address, network);\n  const { library, account, active } = useWeb3React();\n\n  const { abi } = addressRecord;\n\n  return useMemo(() => {\n    if (!abi) { return; }\n    const provider = active ?  new UncheckedJsonRpcSigner(library.getSigner(account)) : ethers.getDefaultProvider();\n    return new ethers.Contract(address, abi, provider);\n  }, [address, network, account, library, active]);\n};\n\nexport const useHasSigner = () => {\n  const { library, account, active } = useWeb3React();\n\n  try {\n    const provider = new UncheckedJsonRpcSigner(library.getSigner(account));\n    return provider !== undefined;\n  } catch (err) {\n    return false;\n  }\n};\n\nexport const useWeb3ConnectExisting = () => {\n  const { activate, active, chainId,library } = useWeb3React();\n  const [tried, setTried] = useState(false);\n\n  useEffect(() => {\n    injected.isAuthorized().then((isAuthorized) => {\n      if (isAuthorized) {\n        activate(injected, undefined, true).catch((err) => {\n          // TODO: Push this error to UI?  Can be \"unsupported chain Id\"..\n          console.warn(err);\n          setTried(true);\n        })\n      } else {\n        setTried(true)\n      }\n    })\n  }, []);\n\n  useEffect(() => {\n    if (!tried && active) {\n      setTried(true)\n    }\n  }, [tried, active]);\n\n    return tried;\n};\n\n\nclass UncheckedJsonRpcSigner extends ethers.Signer {\n  //  /*readonly*/ signer: ethers.providers.JsonRpcSigner;\n\n  constructor(signer/*: ethers.providers.JsonRpcSigner*/) {\n    super();\n    ethers.utils.defineReadOnly(this, 'signer', signer);\n    ethers.utils.defineReadOnly(this, 'provider', signer.provider);\n  }\n\n  getAddress()/*: Promise<string> */ {\n    return this.signer.getAddress();\n  }\n\n  sendTransaction(transaction/*:TransactionRequest*/) /*: Promise<TransactionResponse> */ {\n    return this.signer.sendUncheckedTransaction(transaction).then((hash) => {\n      return {\n        hash: hash,\n        nonce: null,\n        gasLimit: null,\n        gasPrice: null,\n        data: null,\n        value: null,\n        chainId: null,\n        confirmations: 0,\n        from: null,\n        wait: (confirmations/*?: number*/) => { return this.provider.waitForTransaction(hash, confirmations); }\n      };\n    });\n  }\n\n  signMessage(message/*: string | ethers.utils.Arrayish*/)/*: Promise<string> */ {\n    return this.signer.signMessage(message);\n  }\n}\n","import React, { useEffect } from 'react';\nimport {\n  Button,\n  Card,\n  CardActions,\n  CardContent,\n  CardHeader,\n  TextField,\n} from '@material-ui/core';\nimport Alert from '@material-ui/lab/Alert';\nimport { useForm } from 'react-hooks-useform';\nimport { Link } from 'react-router-dom';\n\nimport { useAddresses } from '../../../../contexts/AppTemplateContext';\nimport { SelectField } from '../../../../components/Controls/SelectField';\n\nimport { useContractByAddress } from '../../../../lib/web3';\n\nexport const NewWeb3Transaction = ({ onCreate, onCancel }) => {\n  const addresses = useAddresses();\n\n  const addressOptions = (addresses || []).map(a => ({value: {network: a.network, address: a.address}, label: `${a.name || ''} ${a.address} (${a.network}) `}));\n\n  const [fields, form] = useForm({\n    fields: [\n      {name: 'title', label: 'Title', optional: true},\n      {name: 'description', label: 'Description', optional: true},\n      {name: 'address', label: 'Address', type: 'select', options: addressOptions},\n      {name: 'buttonText', label: 'Button text', optional: true},\n    ],\n    submit: values => {\n      const { address, network } = values.get('address');\n      onCreate({\n        type: 'web3transaction',\n        address,\n        network,\n        signature: values.get('function'),\n        title: values.get('title'),\n        description: values.get('description'),\n        buttonText: values.get('buttonText'),\n      });\n      onCancel();\n    },\n  });\n\n  const addressesExist = addresses && Array.isArray(addresses) && addresses.length === 0;\n  const addAddressLink =  addressesExist ? <Alert severity=\"warning\">\n    <Link to=\"/_/addresses\">\n      Add an Ethereum contract to the address book in order to interact with it.\n    </Link>\n  </Alert> : undefined;\n\n  return (\n    <div>\n      <form.Form disabled={!addressesExist}>\n        <Card>\n          <CardHeader title=\"New Web3 Transaction\" />\n          <CardContent>\n            { addAddressLink }\n\n            <TextField fullWidth {...fields.title} />\n\n            <TextField fullWidth {...fields.description} />\n\n            <SelectField fullWidth {...fields.address} />\n\n            { fields.address.value !== '' ?\n                <SelectFunction {...fields.function } address={fields.address.value.address} network={fields.address.value.network} form={form} fields={fields} />\n                :\n                undefined\n            }\n\n            <TextField fullWidth {...fields.buttonText} />\n\n          </CardContent>\n\n          <CardActions>\n            <Button variant=\"outlined\" color=\"primary\" onClick={form.submit}>Save</Button>\n            <Button variant=\"outlined\" onClick={onCancel}>Cancel</Button>\n          </CardActions>\n\n        </Card>\n      </form.Form>\n    </div>\n  )\n\n};\n\nconst SelectFunction = ({ address, network, form, fields, ...rest }) => {\n  const contract = useContractByAddress(address, network);\n\n  const queries = Object.filter(\n    contract.interface.functions,\n    i => i.type === 'transaction' || i.type === 'call'\n  );\n\n  let queryFuncs = [];\n  Object.keys(queries).forEach(q => {\n    if (q.indexOf('(') > 0) {\n      queryFuncs.push({value: queries[q].signature, label: queries[q].signature});\n    }\n  });\n\n  useEffect(() => {\n    form.addField(\n      {name: 'function', label: 'Function', type: 'select', options: queryFuncs}\n    );\n  }, []);\n\n  if (!fields.function) { return null; }\n\n  return <SelectField {...fields.function } {...rest} />\n};\n","import React, { createContext, useReducer, useContext, useMemo, useEffect, useCallback } from 'react';\nimport { useWeb3React } from '@web3-react/core'\n\n\n// Track transactions\n\nconst Web3Context = createContext();\n\nconst initialState = {\n  transactions: [],\n  blockNumber: {},\n};\n\nconst ADD_TX = 'ADD_TX';\nconst SET_TX_BLOCK_NUM = 'SET_TX_BLOCK_NUM';\nconst SET_TX_RECEIPT = 'SET_TX_RECEIPT';\nconst SET_BLOCK_NUMBER = 'SET_BLOCK_NUMBER';\n\nfunction reducer(state, action) {\n  switch(action.type) {\n\n    case ADD_TX:\n      return {\n        ...state,\n        transactions: {\n          ...state.transactions,\n          [action.payload.hash]: action.payload,\n        },\n      };\n\n    case SET_BLOCK_NUMBER:\n      return {\n        ...state,\n        blockNumber: {\n          ...state.blockNumber,\n          [action.payload.chainId]: action.payload.blockNumber,\n        },\n      };\n\n    case SET_TX_BLOCK_NUM: {\n      const { hash, chainId, blockNumber } = action.payload;\n      // TODO: Actually deal with chainId\n      return {\n        ...state,\n        transactions: {\n          ...state.transactions,\n          [hash]: {\n            ...state.transactions[hash],\n            _checkedBlock: blockNumber,\n          },\n        },\n      };\n    }\n\n    case SET_TX_RECEIPT: {\n      const { hash, chainId, receipt } = action.payload;\n      // TODO: Actually deal with chainId\n      return {\n        ...state,\n        transactions: {\n          ...state.transactions,\n          [hash]: {\n            ...state.transactions[hash],\n            receipt,\n          },\n        },\n      };\n    }\n\n    default:\n      return state;\n  }\n}\n\nexport const Web3ContextProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  const addTx = (tx) => {\n    dispatch({type: ADD_TX, payload: tx});\n  };\n\n  const setTxBlockNumber = (hash, chainId, blockNumber) => {\n    dispatch({type: SET_TX_BLOCK_NUM, payload: {hash, chainId, blockNumber}});\n  };\n\n  const setTxReceipt = useCallback((hash, chainId, receipt) => {\n    dispatch({type: SET_TX_RECEIPT, payload: {hash, chainId, receipt}});\n  }, []);\n\n  const setBlockNumber = useCallback((chainId, blockNumber) => {\n    dispatch({type: SET_BLOCK_NUMBER, payload: {chainId, blockNumber}});\n  }, []);\n\n\n  return (\n    <Web3Context.Provider value={useMemo(() => [state, { addTx, setTxBlockNumber, setTxReceipt, setBlockNumber }], [state, addTx, setTxBlockNumber, setTxReceipt, setBlockNumber])}>\n      { children }\n    </Web3Context.Provider>\n  );\n}\n\nexport const useWeb3Context = () => {\n  return useContext(Web3Context);\n}\n\nexport const useTransactions = () => {\n  const [state] = useWeb3Context();\n  const { transactions } = state;\n  return transactions;\n};\n\nexport const useBlockNumber = (chainId) => {\n  const [state] = useWeb3Context();\n  const { blockNumber } = state;\n  return blockNumber[chainId] || 0;\n};\n\nexport function BlockNumberWatcher() {\n  const { library, chainId } = useWeb3React()\n  const [, { setBlockNumber }] = useWeb3Context();\n\n  // update block number\n  useEffect(() => {\n    if (library) {\n      let stale = false;\n\n      function updateBlockNumber() {\n        library\n          .getBlockNumber()\n          .then(blockNumber => {\n            if (!stale) {\n              setBlockNumber(chainId, blockNumber);\n            }\n          })\n          .catch(() => {\n            if (!stale) {\n              setBlockNumber(chainId, null);\n            }\n          });\n      }\n\n      updateBlockNumber();\n      library.on('block', updateBlockNumber);\n\n      return () => {\n        stale = true;\n        library.removeListener('block', updateBlockNumber);\n      }\n    }\n  }, [chainId, library, setBlockNumber])\n\n  return null;\n}\n\n\nexport function TransactionStatusWatcher() {\n  const { chainId, library } = useWeb3React();\n  const [, { setTxBlockNumber, setTxReceipt }] = useWeb3Context();\n\n  const blockNumber = useBlockNumber(chainId);\n  const transactions = useTransactions();\n\n  useEffect(() => {\n    if ((chainId || chainId === 0) && library) {\n      let stale = false;\n\n      Object.keys(transactions).forEach(hash => {\n        const tx = transactions[hash];\n        if (tx.chainId !== chainId) {\n          // TODO: Support multiple connections to multiple chains\n          return;\n        }\n        if (!!tx.receipt) { return; }\n        if (tx._checkedBlock === blockNumber) { return; }\n\n        library\n          .getTransactionReceipt(hash)\n          .then(receipt => {\n            if (!stale) {\n              if (!receipt) {\n                setTxBlockNumber(hash, chainId, blockNumber);\n              } else {\n                setTxReceipt(hash, chainId, receipt);\n              }\n            }\n          })\n          .catch(() => {\n            setTxBlockNumber(hash, chainId, blockNumber);\n          });\n      });\n\n      return () => {\n        stale = true;\n      }\n    }\n  }, [chainId, library, transactions, blockNumber, setTxBlockNumber, setTxReceipt]);\n\n  return null;\n};\n","import React, { useState } from \"react\";\n\nimport clsx from \"clsx\";\nimport Portal from \"@material-ui/core/Portal\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport ErrorIcon from \"@material-ui/icons/Error\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport SnackbarContent from \"@material-ui/core/SnackbarContent\";\nimport { amber, green } from \"@material-ui/core/colors\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\n  const useStyles = makeStyles(theme => ({\n    success: {\n      backgroundColor: green[600]\n    },\n    error: {\n      backgroundColor: theme.palette.error.dark\n    },\n    info: {\n      backgroundColor: theme.palette.primary.main\n    },\n    warning: {\n      backgroundColor: amber[700]\n    },\n    icon: {\n      fontSize: 20\n    },\n    iconVariant: {\n      opacity: 0.9,\n      marginRight: theme.spacing(1)\n    },\n    message: {\n      display: \"flex\",\n      alignItems: \"center\"\n    }\n  }));\n\nexport const ErrorMsg = ({ message }) => {\n  const variant = \"error\";\n  const [open, setOpen] = useState(true);\n\n  const classes = useStyles();\n\n  const handleClose = (event, reason) => {\n    if (reason === \"clickaway\") {\n      return;\n    }\n\n    setOpen(false);\n  };\n\n  if (!open) {\n    return null;\n  }\n\n  return (\n    <Portal>\n      <Snackbar\n        anchorOrigin={{\n          vertical: \"top\",\n          horizontal: \"center\"\n        }}\n        open={open}\n        onClose={handleClose}\n      >\n        <SnackbarContent\n          className={clsx(classes[variant])}\n          aria-describedby=\"client-snackbar\"\n          message={\n            <span id=\"client-snackbar\">\n              <ErrorIcon className={clsx(classes.icon, classes.iconVariant)} />\n              {message}\n            </span>\n          }\n          action={[\n            <IconButton\n              key=\"close\"\n              aria-label=\"close\"\n              color=\"inherit\"\n              onClick={handleClose}\n            >\n              <CloseIcon className={classes.icon} />\n            </IconButton>\n          ]}\n          onClose={handleClose}\n        />\n      </Snackbar>\n    </Portal>\n  );\n};\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: \"100%\",\n    \"& > * + *\": {\n      marginTop: theme.spacing(2)\n    }\n  }\n}));\n\nexport const Spinner = props => {\n  const { variant, ...rest } = props;\n  const classes = useStyles();\n\n  const SpinnerComponent =\n    variant === \"circle\" ? CircularProgress : LinearProgress;\n\n  return (\n    <div className={classes.root}>\n      <SpinnerComponent {...rest} />\n    </div>\n  );\n};\n","import React, { useState } from \"react\";\nimport {\n  Box,\n  Button,\n  FormHelperText,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport { makeStyles } from \"@material-ui/styles\";\nimport { useForm } from 'react-hooks-useform';\nimport { useWeb3React } from '@web3-react/core'\n\nimport { useWeb3Context } from '../../../../contexts/Web3Context';\n\nimport { NETWORKS } from '../../../../constants';\nimport { useContractByAddress, useHasSigner } from '../../../../lib/web3';\nimport { ErrorMsg } from '../../../../components/Controls/ErrorMsg';\nimport { Spinner } from '../../../../components/Controls/Spinner';\n\n\nconst useStyles = makeStyles(theme => ({\n  root: {},\n    backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: '#fff',\n  },\n}));\n\nexport const ShowWeb3Transaction = ({ component }) => {\n  const classes = useStyles();\n  const contract = useContractByAddress(component.address, component.network);\n  const hasSigner = useHasSigner();\n  const { chainId } = useWeb3React();\n  const [,{ addTx }] = useWeb3Context();\n\n  const [result, setResult] = useState();\n  const [resultLoading, setResultLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const func = contract ? contract.interface.functions[component.signature] : undefined;\n  const funcFields = func ? func.inputs.map(i => ({name: i.name, label: i.name, type: 'text'})) : [];\n  const [fields, form] = useForm({\n    fields: funcFields,\n    submit: async (values) => {\n      if (func.type === 'call') {\n\n        const args = Object.keys(fields).map(fieldKey => values.get(fieldKey));\n        setResultLoading(true);\n        const result = await contract[component.signature](...args);\n        setResult(result);\n        setResultLoading(false);\n\n      } else if (func.type === 'transaction') {\n\n        const args = Object.keys(fields).map(fieldKey => values.get(fieldKey));\n        setResultLoading(true);\n        try {\n          const result = await contract[component.signature](...args);\n          addTx({...result, chainId});\n          setResult(result.hash);\n          setResultLoading(false);\n        } catch (err) {\n          setError(err.toString());\n          setResultLoading(false);\n        }\n      }\n    },\n  });\n\n  const clearForm = () => {\n    form.reset();\n    setResult(undefined);\n  };\n\n  const signerRequired = func.type === 'transaction';\n  const componentNetworkId = NETWORKS.find(n => n.id === component.network).chainId;\n  const networkMismatch = componentNetworkId !== chainId ? `Connect your wallet to ${component.network}` : undefined;\n  const warningText = signerRequired && !hasSigner ? 'Web3 wallet required' : undefined;\n  const disabled = !!(!contract || (signerRequired && !hasSigner) || networkMismatch || warningText);\n\n  if (resultLoading) {\n    return <Spinner />;\n  }\n\n  if (result) {\n    return <Web3TxResult signature={component.signature} result={result} onCancel={clearForm} />;\n  }\n\n  return (\n    <Box className={classes.root}>\n\n      { error ? <ErrorMsg message={error} /> : undefined }\n\n      <Typography variant=\"h5\">{ component.title || '' }</Typography>\n      <Typography>{ component.description || '' }</Typography>\n\n      <form.Form>\n      <Box flex=\"rows\">\n        { Object.keys(fields).map(fieldKey =>\n          <TextField {...fields[fieldKey] } disabled={disabled} key={fieldKey} />\n        ) }\n        <Button color=\"primary\" type=\"submit\" onClick={form.submit} disabled={disabled}>{ component.buttonText || 'Send' }</Button>\n\n        <FormHelperText>\n          { warningText }\n          { networkMismatch }\n        </FormHelperText>\n        </Box>\n      </form.Form>\n\n    </Box>\n  );\n};\n\nconst Web3TxResult = ({ result, onCancel }) => {\n\n  return (\n    <div>\n      Result: { result.toString() }\n\n      <br />\n\n      <Button size=\"small\" onClick={onCancel}>Clear</Button>\n    </div>\n  );\n}\n","import { NewWeb3Transaction } from './NewWeb3Transaction';\nimport { ShowWeb3Transaction } from './ShowWeb3Transaction';\nimport { EditWeb3Transaction } from './EditWeb3Transaction';\nimport { PreviewWeb3Transaction } from './PreviewWeb3Transaction';\n\nexport default {\n  new: NewWeb3Transaction,\n  show: ShowWeb3Transaction,\n  edit: EditWeb3Transaction,\n  preview: PreviewWeb3Transaction,\n}\n","import React from 'react';\nimport {\n  Button,\n  Card,\n  CardActions,\n  CardContent,\n  CardHeader,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport { useForm } from 'react-hooks-useform';\nimport { fromJS } from 'immutable';\n\nimport { useActions } from '../../../../actions';\n\n\nexport const EditWeb3Transaction = ({ component, onCancel, onSave }) => {\n  const { editComponent } = useActions();\n  const initialValues = fromJS({\n    description: component.description,\n    buttonText: component.buttonText,\n  });\n  const [fields, form] = useForm({\n    fields: [\n      {name: 'description', label: 'Description', type: 'text', optional: true},\n      {name: 'buttonText', label: 'Button text', type: 'text', optional: true},\n    ],\n    initialValues,\n    submit: values => {\n      let formValues = {};\n      Array.from(values, ([key, value]) => formValues[key] = value);\n      editComponent({\n        ...component,\n        ...formValues,\n      });\n      onSave();\n    },\n  });\n\n  return (\n    <div>\n      <form.Form>\n        <Card>\n          <CardHeader title=\"Edit Web3 component\" />\n          <CardContent>\n\n            <Typography>Address: { component.address }</Typography>\n\n            <br />\n\n            <Typography>Function: { component.signature }</Typography>\n\n            <br />\n\n            <TextField {...fields.description } />\n\n            <br />\n\n            <TextField {...fields.buttonText } />\n\n          </CardContent>\n\n          <CardActions>\n            <Button color=\"primary\" variant=\"outlined\" onClick={form.submit}>Save</Button>\n\n            <Button variant=\"outlined\" onClick={onCancel}>Cancel</Button>\n          </CardActions>\n        </Card>\n      </form.Form>\n    </div>\n  );\n}\n","import React from 'react';\n\nimport {\n  Typography,\n} from '@material-ui/core';\n\nexport const PreviewWeb3Transaction = ({ component }) => {\n\n  return (\n    <div>\n      <Typography><strong>{ component.title }</strong></Typography>\n      <Typography>{ component.nework } { component.address } { component.signature }</Typography>\n    </div>\n  );\n}\n","import React, { useEffect } from 'react';\nimport {\n  Button,\n  Card,\n  CardActions,\n  CardContent,\n  CardHeader,\n  TextField,\n} from '@material-ui/core';\nimport Alert from '@material-ui/lab/Alert';\nimport { useForm } from 'react-hooks-useform';\nimport { Link } from 'react-router-dom';\n\nimport { useAddresses } from '../../../../contexts/AppTemplateContext';\nimport { SelectField } from '../../../../components/Controls/SelectField';\n\nimport { useContractByAddress } from '../../../../lib/web3';\n\nexport const NewWeb3Call = ({ onCreate, onCancel }) => {\n  const addresses = useAddresses();\n\n  const addressOptions = (addresses || []).map(a => ({value: {network: a.network, address: a.address}, label: `${a.name || ''} ${a.address} (${a.network}) `}));\n\n  const [fields, form] = useForm({\n    fields: [\n      {name: 'title', label: 'Title', optional: true},\n      {name: 'description', label: 'Description', optional: true},\n      {name: 'address', label: 'Address', type: 'select', options: addressOptions},\n      {name: 'buttonText', label: 'Button text', optional: true},\n    ],\n    submit: values => {\n      const { address, network } = values.get('address');\n      onCreate({\n        type: 'web3call',\n        address,\n        network,\n        signature: values.get('function'),\n        title: values.get('title'),\n        description: values.get('description'),\n      });\n      onCancel();\n    },\n  });\n\n  const addressesExist = addresses && Array.isArray(addresses) && addresses.length === 0;\n  const addAddressLink =  addressesExist ? <Alert severity=\"warning\">\n    <Link to=\"/_/addresses\">\n      Add an Ethereum contract to the address book in order to interact with it.\n    </Link>\n  </Alert> : undefined;\n\n  return (\n    <div>\n      <form.Form disabled={!addressesExist}>\n        <Card>\n          <CardHeader title=\"New Web3 Call\" />\n          <CardContent>\n            { addAddressLink }\n\n            <TextField fullWidth {...fields.title} />\n\n            <TextField fullWidth {...fields.description} />\n\n            <SelectField fullWidth {...fields.address} />\n\n            { fields.address.value !== '' ?\n                <SelectFunction {...fields.function } address={fields.address.value.address} network={fields.address.value.network} form={form} fields={fields} />\n                :\n                undefined\n            }\n\n          </CardContent>\n\n          <CardActions>\n            <Button variant=\"outlined\" color=\"primary\" onClick={form.submit}>Save</Button>\n            <Button variant=\"outlined\" onClick={onCancel}>Cancel</Button>\n          </CardActions>\n\n        </Card>\n      </form.Form>\n    </div>\n  )\n\n};\n\nconst SelectFunction = ({ address, network, form, fields, ...rest }) => {\n  const contract = useContractByAddress(address, network);\n\n  const queries = Object.filter(\n    contract.interface.functions,\n    i => i.type === 'call'\n  );\n\n  let queryFuncs = [];\n  Object.keys(queries).forEach(q => {\n    if (q.indexOf('(') > 0) {\n      queryFuncs.push({value: queries[q].signature, label: queries[q].signature});\n    }\n  });\n\n  useEffect(() => {\n    form.addField(\n      {name: 'function', label: 'Function', type: 'select', options: queryFuncs}\n    );\n  }, []);\n\n  if (!fields.function) { return null; }\n\n  return <SelectField {...fields.function } {...rest} />\n};\n","import React, { useState, useEffect } from \"react\";\nimport {\n  Box,\n  Button,\n  FormHelperText,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport { makeStyles } from \"@material-ui/styles\";\nimport { useForm } from 'react-hooks-useform';\nimport { useWeb3React } from '@web3-react/core'\n\nimport { useWeb3Context } from '../../../../contexts/Web3Context';\n\nimport { NETWORKS } from '../../../../constants';\nimport { useContractByAddress, useHasSigner } from '../../../../lib/web3';\nimport { ErrorMsg } from '../../../../components/Controls/ErrorMsg';\nimport { Spinner } from '../../../../components/Controls/Spinner';\n\n\nconst useStyles = makeStyles(theme => ({\n  root: {},\n    backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: '#fff',\n  },\n}));\n\nexport const ShowWeb3Call = ({ component }) => {\n  const classes = useStyles();\n  const contract = useContractByAddress(component.address, component.network);\n  const hasSigner = useHasSigner();\n  const { chainId } = useWeb3React();\n\n  const [result, setResult] = useState();\n  const [resultLoading, setResultLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  const func = contract ? contract.interface.functions[component.signature] : undefined;\n\n  useEffect(() => {\n    (async () => {\n      const args = []; // TODO: component can have default args\n        const result = await contract[component.signature](...args);\n        setResult(result);\n        setResultLoading(false);\n    })();\n  });\n\n  const componentNetworkId = NETWORKS.find(n => n.id === component.network).chainId;\n  const disabled = !!(!contract);\n  const displayResult = result ? <Web3CallResult result={result} /> : null;\n\n  return (\n    <Box className={classes.root}>\n\n      { error ? <ErrorMsg message={error} /> : undefined }\n\n      <Typography variant=\"h5\">{ component.title || '' }</Typography>\n      <Typography>{ component.description || '' }</Typography>\n\n      <Box flex=\"rows\">\n        { displayResult }\n      </Box>\n\n    </Box>\n  );\n};\n\nconst Web3CallResult = ({ result }) => {\n\n  return (\n    <div>\n      { result.toString() }\n    </div>\n  );\n}\n","import { NewWeb3Call } from './NewWeb3Call';\nimport { ShowWeb3Call } from './ShowWeb3Call';\nimport { EditWeb3Call } from './EditWeb3Call';\nimport { PreviewWeb3Call } from './PreviewWeb3Call';\n\nexport default {\n  new: NewWeb3Call,\n  show: ShowWeb3Call,\n  edit: EditWeb3Call,\n  preview: PreviewWeb3Call,\n}\n","import React from 'react';\nimport {\n  Button,\n  Card,\n  CardActions,\n  CardContent,\n  CardHeader,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport { useForm } from 'react-hooks-useform';\nimport { fromJS } from 'immutable';\n\nimport { useActions } from '../../../../actions';\n\n\nexport const EditWeb3Call = ({ component, onCancel, onSave }) => {\n  const { editComponent } = useActions();\n  const initialValues = fromJS({\n    description: component.description,\n    buttonText: component.buttonText,\n  });\n  const [fields, form] = useForm({\n    fields: [\n      {name: 'description', label: 'Description', type: 'text', optional: true},\n      {name: 'buttonText', label: 'Button text', type: 'text', optional: true},\n    ],\n    initialValues,\n    submit: values => {\n      let formValues = {};\n      Array.from(values, ([key, value]) => formValues[key] = value);\n      editComponent({\n        ...component,\n        ...formValues,\n      });\n      onSave();\n    },\n  });\n\n  return (\n    <div>\n      <form.Form>\n        <Card>\n          <CardHeader title=\"Edit Web3 component\" />\n          <CardContent>\n\n            <Typography>Address: { component.address }</Typography>\n\n            <br />\n\n            <Typography>Function: { component.signature }</Typography>\n\n            <br />\n\n            <TextField {...fields.description } />\n\n            <br />\n\n            <TextField {...fields.buttonText } />\n\n          </CardContent>\n\n          <CardActions>\n            <Button color=\"primary\" variant=\"outlined\" onClick={form.submit}>Save</Button>\n\n            <Button variant=\"outlined\" onClick={onCancel}>Cancel</Button>\n          </CardActions>\n        </Card>\n      </form.Form>\n    </div>\n  );\n}\n","import React from 'react';\n\nimport {\n  Typography,\n} from '@material-ui/core';\n\nexport const PreviewWeb3Call = ({ component }) => {\n\n  return (\n    <div>\n      <Typography><strong>{ component.title }</strong></Typography>\n      <Typography>{ component.nework } { component.address } { component.signature }</Typography>\n    </div>\n  );\n}\n","// graphql helpers\n\nexport function typeNameToQueryMany(typeName, schema) {\n  const queryType = schema.types.find(t => t.kind === 'OBJECT' && t.name === 'Query');\n  const field = queryType.fields.find(f =>\n    f.type.kind === 'NON_NULL' &&\n    f.type.ofType &&\n    f.type.ofType.kind === 'LIST' &&\n    f.type.ofType.ofType.kind === 'NON_NULL' &&\n    f.type.ofType.ofType.ofType.kind === 'OBJECT' &&\n    f.type.ofType.ofType.ofType.name === typeName\n  );\n  return field ? field.name : undefined;\n};\n\nexport function typeNameToQuerySingle(typeName, schema) {\n  const queryType = schema.types.find(t => t.kind === 'OBJECT' && t.name === 'Query');\n  const field = queryType.fields.find(f =>\n    f.type.kind === 'OBJECT' &&\n    f.type.name === typeName\n  );\n  return field ? field.name : undefined;\n};\n\nexport function fieldsForTypeName(typeName, schema) {\n  const type = schema.types.find(t => t.kind === 'OBJECT' && t.name === typeName);\n  const fields = type.fields.map(f => normalizeFieldType(f));\n  return fields;\n};\n\nexport function normalizeFieldType(field) {\n  // LIST of Objects\n  if (field.type.ofType && field.type.ofType.kind === 'LIST' && field.type.ofType.ofType.ofType.kind === 'OBJECT') {\n    return {\n      name: field.name,\n      kind: 'LIST',\n      type: field.type.ofType.ofType.ofType.name,\n    };\n  }\n\n  // LIST of SCALARS\n  if (field.type.ofType && field.type.ofType.kind === 'LIST' && field.type.ofType.ofType.ofType.kind === 'SCALAR') {\n    return {\n      name: field.name,\n      kind: 'SCALAR',\n      type: field.type.ofType.ofType.ofType.name,\n    };\n  }\n\n  // NON_NULL\n  if (field.type.kind === 'NON_NULL') {\n    return {\n      name: field.name,\n      kind: field.type.ofType.kind,\n      type: field.type.ofType.name,\n    };\n  }\n\n  // ID or Object or Scalar\n  return {\n    name: field.name,\n    kind: field.type.kind,\n    type: field.type.name,\n  };\n}\n","import React, { useState } from 'react';\nimport {\n  Button,\n  Card,\n  CardActions,\n  CardContent,\n  CardHeader,\n  List,\n  ListItem,\n  ListItemText,\n  Typography,\n} from '@material-ui/core';\n\nimport { useAppTemplate } from '../../../../contexts/AppTemplateContext';\nimport { useRemoteSchema } from '../../../../lib/thegraph';\nimport { typeNameToQueryMany, typeNameToQuerySingle, normalizeFieldType } from '../../../../lib/graphql';\nimport { Spinner } from '../../../../components/Controls/Spinner';\n\nexport const NewDatatable = ({ onCreate, onCancel }) => {\n  const appTemplate = useAppTemplate();\n  const { integrations } = appTemplate;\n  const [selectedModel, setSelectedModel] = useState();\n  const [selectedFields, setSelectedFields] = useState();\n\n  // TODO: Select Graph datalink if multiple\n  const thegraphLinks = Object.filter(integrations, i => i.type === 'thegraph');\n\n  const dataLink = thegraphLinks[0];\n  const remoteSchema = useRemoteSchema(dataLink.endpoint);\n\n  if (!remoteSchema) {\n    return <Spinner />;\n  }\n\n  const handleOnCreate = () => {\n    // determine field types\n    const model = remoteSchema.types.find(\n      t => t.kind === 'OBJECT' &&\n      t.name === selectedModel);\n\n    const singleQuery = typeNameToQuerySingle(selectedModel, remoteSchema);\n    const listQuery = typeNameToQueryMany(selectedModel, remoteSchema);\n\n    const fields = model.fields.map((field, order) => {\n      const { description, name } = field;\n      const enabled = selectedFields.includes(field.name);\n\n      let newField = normalizeFieldType(field);\n      newField.description = description;\n      newField.name = name;\n      newField.order = order;\n      newField.enabled = enabled;\n\n      return newField;\n    });\n\n    onCreate({\n      type: 'datatable',\n      options: { typeName: selectedModel, fields, singleQuery, listQuery },\n      data_source: {type: dataLink.type, endpoint: dataLink.endpoint },\n    });\n  };\n\n  return (\n    <Card>\n      <CardHeader title=\"Adding Data Table\" />\n      <CardContent>\n\n        <Typography gutterBottom>Selected data link: { dataLink.endpoint }</Typography>\n\n        <br />\n\n        { selectedModel ?\n            <Typography gutterBottom>Selected model: { selectedModel }</Typography>\n            :\n            <ModelSelect schema={remoteSchema} onNext={setSelectedModel} />\n        }\n\n        { selectedFields ?\n            <Typography gutterBottom>Selected fields: { selectedFields.join(', ') }</Typography>\n            :\n            <FieldsSelect schema={remoteSchema} model={selectedModel} onNext={setSelectedFields} />\n        }\n\n      </CardContent>\n      <CardActions>\n        <Button disabled={!selectedModel || !selectedFields} onClick={handleOnCreate}>Create Data Table</Button>\n        <Button onClick={onCancel}>Cancel</Button>\n      </CardActions>\n\n    </Card>\n  );\n};\n\nconst ModelSelect = ({ schema, onNext }) => {\n  const [selectedModel, setSelectedModel] = useState();\n\n  if (!schema) {\n    return <Spinner />;\n  }\n\n  const models = schema.types.filter(\n    t => t.kind === 'OBJECT' &&\n    t.name.substr(0, 2) !== '__' &&\n    t.name !== schema.queryType.name && t.name !== schema.subscriptionType.name\n  );\n\n  return (\n    <div>\n      <Typography>Select model:</Typography>\n      <Button disabled={selectedModel === undefined} variant=\"outlined\" color=\"primary\" onClick={() => onNext(selectedModel)}>Next</Button>\n      <List dense={true}>\n        {  models.map(model => (\n          <ListItem key={model.name}\n            selected={model.name === selectedModel}\n            onClick={() => model.name === selectedModel ? setSelectedModel(undefined) : setSelectedModel(model.name)}\n          >\n            <ListItemText\n              primary={model.name}\n              secondary={model.description}\n            />\n          </ListItem>\n        )) }\n      </List>\n\n    </div>\n  );\n}\n\nconst FieldsSelect = ({ schema, model, onNext }) => {\n  const [selectedFields, setSelectedFields] = useState([]);\n\n  if (!model) {\n    return <div></div>;\n  }\n\n  const fields = schema.types.find(t => t.name === model).fields;\n\n  const toggleSelected = (field) => {\n    if (selectedFields.includes(field)) {\n      setSelectedFields(selectedFields.filter(f => f !== field));\n    } else {\n      setSelectedFields([field, ...selectedFields]);\n    }\n  };\n\n  const selectAll = () => {\n    setSelectedFields(fields.map(f => f.name));\n  };\n\n  return (\n    <div>\n      <Typography>Select fields:</Typography>\n      <Button disabled={selectedFields.length === 0} variant=\"outlined\" color=\"primary\" onClick={() => onNext(selectedFields)}>Next</Button>\n      <Typography onClick={selectAll}>Select All</Typography>\n      <List dense={true}>\n        {  fields.map(field => (\n          <ListItem key={field.name}\n            selected={selectedFields.includes(field.name)}\n            onClick={() => toggleSelected(field.name)}\n          >\n            <ListItemText\n              primary={field.name}\n              secondary={field.description}\n            />\n          </ListItem>\n        )) }\n      </List>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport { makeStyles } from \"@material-ui/styles\";\nimport {\n  Button,\n  Table,\n  TableBody,\n  TableCell,\n  TableRow,\n  Typography,\n} from '@material-ui/core';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\n\nimport gql from \"graphql-tag\";\nimport { useQuery } from \"@apollo/react-hooks\";\n\nimport { Spinner } from \"../../../../components/Controls/Spinner\";\n\nconst useStyles = makeStyles(theme => ({\n  fakelink: {\n    cursor: 'pointer',\n    textDecoration: 'underline',\n  },\n}));\n\nexport const Query = ({ graph_client, model, id, fields, onCancel, setSelectedQuery }) => {\n  const classes = useStyles();\n  const [expandLists, setExpandLists] = useState({});\n\n  if (!model) { throw new Error('Model name required'); }\n\n  const toggleExpand = (field) => {\n    if (expandLists[field]) {\n      setExpandLists({...expandLists, [field]: false});\n    } else {\n      setExpandLists({...expandLists, [field]: true});\n    }\n  };\n\n  const fieldQuery = field => {\n    if (field.kind === 'LIST' || field.kind === 'OBJECT') {\n      return `${field.name} { id }`;\n    } else {\n      return field.name;\n    }\n  };\n\n  const query = gql`\n    query Query {\n      ${model}(id: \"${id}\") {\n        ${fields.map(fieldQuery).join('\\n')}\n      }\n    }\n  `;\n\n  const { loading, error, data } = useQuery(query, {\n    client: graph_client,\n  });\n\n  if (loading) {\n    return <Spinner />;\n  }\n\n  if (error) {\n    return <div>Error: {error.toString()}</div>;\n  }\n\n  const renderCell = (value) => {\n    if (value === null) { return value; }\n    if (typeof(value) === 'string') { return value; }\n    if (typeof(value) === 'object' && !!value.id && !!value.__typename) {\n      return <div\n        className={classes.fakelink}\n        onClick={() => setSelectedQuery({model: value.__typename, id: value.id})}\n      >\n        { value.__typename} - { value.id }\n      </div>;\n    }\n\n    return value;\n  }\n\n  const rows = Object.keys(data[model]).filter(k => k.substr(0,2) !== '__');\n  const m = data[model];\n\n  return (\n    <div>\n      <Typography variant=\"h5\">\n        {model}\n      </Typography>\n      <Typography variant=\"h6\">\n        {id}\n      </Typography>\n      <Table>\n        <TableBody>\n          { rows.map(rowName =>\n            <>\n            <TableRow>\n              <TableCell>\n                <strong>{rowName}</strong>\n              </TableCell>\n              <TableCell>\n                { Array.isArray(m[rowName]) ?\n                    <div className={classes.fakelink} onClick={() => toggleExpand(rowName)}>\n                      { m[rowName].length } { m[rowName].length > 0 ? m[rowName][0].__typename ? m[rowName][0].__typename : 'record' : undefined}{m[rowName].length > 1 ? 's' : undefined}\n                      { expandLists[rowName] ? <KeyboardArrowDownIcon /> : <ChevronRightIcon /> }\n                    </div>\n                    : renderCell(data[model][rowName])\n                }\n              </TableCell>\n            </TableRow>\n            { Array.isArray(m[rowName]) && expandLists[rowName] ?\n                m[rowName].map((row, k) =>\n                <TableRow key={`${row}-${k}`}>\n                <TableCell></TableCell>\n                <TableCell>\n                  { renderCell(row) }\n                </TableCell>\n                  </TableRow>\n                )\n                : undefined }\n            </>\n\n            ) }\n\n          </TableBody>\n        </Table>\n\n        <br />\n\n        <Button variant=\"outlined\" onClick={onCancel}>Back</Button>\n      </div>\n  );\n}\n","import React from 'react';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport {\n  IconButton,\n} from '@material-ui/core';\nimport FirstPageIcon from '@material-ui/icons/FirstPage';\nimport KeyboardArrowLeft from '@material-ui/icons/KeyboardArrowLeft';\nimport KeyboardArrowRight from '@material-ui/icons/KeyboardArrowRight';\nimport LastPageIcon from '@material-ui/icons/LastPage';\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexShrink: 0,\n    marginLeft: theme.spacing(2.5),\n  },\n}));\n\nexport const TablePaginationActions = ({ count, page, pageCount, rowsPerPage, onChangePage }) => {\n  const classes = useStyles();\n  const theme = useTheme();\n\n  const handleFirstPageButtonClick = (event) => {\n    onChangePage(event, 0);\n  };\n\n  const handleBackButtonClick = (event) => {\n    onChangePage(event, page - 1);\n  };\n\n  const handleNextButtonClick = (event) => {\n    onChangePage(event, page + 1);\n  };\n\n  // TODO: Need  count\n  //const handleLastPageButtonClick = (event) => {\n    //onChangePage(event, Math.max(0, Math.ceil(count / rowsPerPage) - 1));\n  //};\n\n  return (\n    <div className={classes.root}>\n      <IconButton\n        onClick={handleFirstPageButtonClick}\n        disabled={page === 0}\n        aria-label=\"first page\"\n      >\n        {theme.direction === 'rtl' ? <LastPageIcon /> : <FirstPageIcon />}\n      </IconButton>\n      <IconButton onClick={handleBackButtonClick} disabled={page === 0} aria-label=\"previous page\">\n        {theme.direction === 'rtl' ? <KeyboardArrowRight /> : <KeyboardArrowLeft />}\n      </IconButton>\n      <IconButton\n        onClick={handleNextButtonClick}\n        disabled={pageCount < rowsPerPage}\n        aria-label=\"next page\"\n      >\n        {theme.direction === 'rtl' ? <KeyboardArrowLeft /> : <KeyboardArrowRight />}\n      </IconButton>\n      <IconButton\n        disabled={true /*page >= Math.ceil(count / rowsPerPage) - 1 */}\n        aria-label=\"last page\"\n      >\n        {theme.direction === 'rtl' ? <FirstPageIcon /> : <LastPageIcon />}\n      </IconButton>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableFooter,\n  TablePagination,\n  TableHead,\n  TableRow,\n} from \"@material-ui/core\";\n\nimport { TablePaginationActions } from './TablePaginationActions';\nimport { Spinner } from \"../../../../components/Controls/Spinner\";\n\nimport gql from \"graphql-tag\";\nimport { useQuery } from \"@apollo/react-hooks\";\n\n\nconst useStyles = makeStyles(theme => ({\n  root: {},\n  submitButton: {},\n  error: {\n    color: \"red\"\n  },\n  fakelink: {\n    cursor: 'pointer',\n    textDecoration: 'underline',\n  },\n}));\n\nconst PER_PAGE_OPTS = [10, 25, 50];\n\nexport const ShowDatatable = ({ component, setSelectedQuery, graph_client }) => {\n  const classes = useStyles();\n  const { fields } = component.options;\n  const [page, setPage] = useState(0);\n  const [perPage, setPerPage] = useState(PER_PAGE_OPTS[0]);\n\n  const queryFields = fields.filter(f => f.type === 'ID' || (f.enabled && f.kind !== 'LIST'));\n  const skip = page * perPage;\n\n  const query = gql`\n      query Query {\n        ${component.options.listQuery}(first: ${perPage}, skip: ${skip}) {\n          ${queryFields.map(f => f.name).join('\\n')}\n        }\n      }\n    `;\n\n  const { loading, error, data } = useQuery(query, {\n    client: graph_client,\n  });\n\n  if (loading) {\n    return <Spinner />;\n  }\n\n  if (error) {\n    return <div>Error: {error.toString()}</div>;\n  }\n\n  // hacky\n  const rows = data[Object.keys(data)[0]];\n\n  if (rows.length < 1) {\n    return <div>No data</div>;\n  }\n\n  const cols = Object.keys(rows[0]).filter(r => r.substr(0, 2) !== \"__\");\n\n  function renderCell(value, colName, type) {\n    if (colName === 'id') {\n      return <div className={classes.fakelink} onClick={() => setSelectedQuery({model: type, id: value})}>{ value }</div>\n    }\n\n    return value;\n  }\n\n  const handleChangePage = (evt, page) => {\n    setPage(page);\n  };\n\n  const handleChangeRowsPerPage = (evt => {\n    setPerPage(parseInt(evt.target.value));\n  });\n\n  return (\n    <div className={classes.root}>\n      <TableContainer>\n        <Table className={classes.table} aria-label=\"table\">\n          <TableHead>\n            <TableRow>\n              {cols.map((c, k) => (\n                <TableCell key={`col-${k}`}>\n                  {c}\n                </TableCell>\n              ))}\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {rows.map((r, k) => (\n              <TableRow key={`row-${k}`}>\n                {cols.map((c, kk) => (\n                  <TableCell key={`cell-${k}-${kk}`}>\n                    { renderCell(r[c], c, r.__typename) }\n                  </TableCell>\n                ))}\n              </TableRow>\n            ))}\n          </TableBody>\n\n          <TableFooter>\n            <TableRow>\n              <TablePagination\n                rowsPerPageOptions={PER_PAGE_OPTS}\n                count={-1}\n                colSpan={3}\n                rowsPerPage={perPage}\n                page={page}\n                SelectProps={{\n                  inputProps: { 'aria-label': 'rows per page' },\n                  native: true,\n                }}\n                onChangePage={handleChangePage}\n                onChangeRowsPerPage={handleChangeRowsPerPage}\n                ActionsComponent={TablePaginationActions}\n              />\n            </TableRow>\n          </TableFooter>\n\n        </Table>\n      </TableContainer>\n    </div>\n  );\n};\n","import { EditDatatable } from './EditDatatable';\nimport { NewDatatable } from './NewDatatable';\nimport { PreviewDatatable } from './PreviewDatatable';\nimport { GraphQLComponent } from './GraphQLComponent';\n\nexport default {\n  edit: EditDatatable,\n  new: NewDatatable,\n  preview: PreviewDatatable,\n  show: GraphQLComponent,\n}\n","import React, { useState } from 'react';\nimport {\n  Button,\n  Card,\n  CardActions,\n  CardContent,\n  CardHeader,\n  Checkbox,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemSecondaryAction,\n  ListItemText,\n  Typography,\n} from '@material-ui/core';\n\nimport { useActions } from '../../../../actions';\n\nexport const EditDatatable = ({ component, onCancel, onSave }) => {\n  const { editComponent } = useActions();\n\n  const componentFields = component.options.fields;\n  const initialChecked = componentFields.map((f,k) => f.enabled ? k : undefined).filter(f => !!f);\n  const [checked, setChecked] = useState(initialChecked);\n\n  const handleToggle = (value) => () => {\n    const currentIndex = checked.indexOf(value);\n    const newChecked = [...checked];\n    if (currentIndex === -1) {\n      newChecked.push(value);\n    } else {\n      newChecked.splice(currentIndex, 1);\n    }\n    setChecked(newChecked);\n  };\n\n  const handleSubmit = () => {\n    let newComponent = Object.assign({}, component);\n    // apply checks\n    newComponent.options.fields.forEach((f,k) => {\n      newComponent.options.fields[k].enabled = checked.includes(k);\n    });\n    editComponent(newComponent);\n    onSave();\n  }\n\n  return (\n    <div>\n      <Card>\n        <CardHeader title=\"Editing component\" />\n        <CardContent>\n          <Typography gutterBottom>Fields</Typography>\n          <List dense={false}>\n            { componentFields && componentFields.map((field,k) => (\n              <ListItem key={k} value={k} button onClick={handleToggle(k)}>\n                <ListItemIcon>\n                  <Checkbox\n                    edge=\"start\"\n                    checked={checked.indexOf(k) !== -1}\n                    tabIndex={-1}\n                    disableRipple\n                    inputProps={{ 'aria-labelledby': 'checkbox-list-label-' }}\n                  />\n                </ListItemIcon>\n                <ListItemText\n                  primary={field.name}\n                  secondary={field.type}\n                />\n                <ListItemSecondaryAction>\n                </ListItemSecondaryAction>\n              </ListItem>\n            )) }\n          </List>\n        </CardContent>\n\n        <CardActions>\n          <Button variant=\"outlined\" color=\"primary\" onClick={handleSubmit}>Save</Button>\n          <Button variant=\"outlined\" onClick={onCancel}>Cancel</Button>\n        </CardActions>\n      </Card>\n    </div>\n  );\n};\n","import React from 'react';\nimport {\n  Typography,\n} from '@material-ui/core';\n\nexport const PreviewDatatable = ({ component }) => {\n\n  return (\n    <div>\n      <Typography>Data source: { component.data_source.endpoint }</Typography>\n      <Typography>Type: { component.options.typeName }</Typography>\n      <Typography>Fields: { component.options.fields.map(f => f.name).join(' ') }</Typography>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\n\nimport { Query } from \"./Query\";\nimport { ShowDatatable } from './ShowDatatable';\nimport { useIntegration } from '../../../../contexts/AppTemplateContext';\nimport { useRemoteSchema } from '../../../../lib/thegraph';\nimport { typeNameToQuerySingle, fieldsForTypeName } from '../../../../lib/graphql';\nimport { Spinner } from '../../../../components/Controls/Spinner';\n\nexport const GraphQLComponent = ({ component }) => {\n  const integration = useIntegration(component.data_source.type, component.data_source.endpoint);\n  const [selectedQuery, setSelectedQuery] = useState();\n  const needSchema = selectedQuery !== undefined && selectedQuery.model !== component.options.typeName;\n  const remoteSchema = useRemoteSchema(needSchema ? integration.endpoint : undefined);\n\n  const onCancel = () => {\n    setSelectedQuery(undefined);\n  };\n\n  if (selectedQuery) {\n\n    if (!remoteSchema && needSchema) {\n      return <Spinner />;\n    }\n\n    const model = needSchema ? typeNameToQuerySingle(selectedQuery.model, remoteSchema) : component.options.singleQuery;\n    const fields = needSchema ? fieldsForTypeName(selectedQuery.model, remoteSchema) : component.options.fields;\n    return <Query\n      model={model}\n      id={selectedQuery.id}\n      fields={fields}\n      graph_client={integration.__instance}\n      schema={remoteSchema}\n      onCancel={onCancel}\n      setSelectedQuery={setSelectedQuery}\n    />;\n  }\n\n  return <ShowDatatable\n    component={component}\n    setSelectedQuery={setSelectedQuery}\n    graph_client={integration.__instance}\n  />\n}\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport ReactMarkdown from \"react-markdown\";\n\nconst useStyles = makeStyles(theme => ({\n  root: {}\n}));\n\nexport const ShowMarkdown = ({ component }) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n\n      <ReactMarkdown source={component.content} />\n    </div>\n  );\n};\n","import { NewComponent } from './NewComponent';\nimport web3TransactionComponents from './Web3Transaction';\nimport web3CallComponents from './Web3Call';\nimport datatableComponents from './Datatable';\nimport markdownComponents from './Markdown';\n\nimport { defaultLayout } from '../../../components/Interface/Page'\n\nconst COMPONENT_TYPES = [\n  { value: 'markdown', label: 'Text', components: markdownComponents },\n  { value: 'datatable', label: 'TheGraph data table', components: datatableComponents },\n  { value: 'web3transaction', label: 'Web3 Transaction', components: web3TransactionComponents },\n  { value: 'web3call', label: 'Web3 Call', components: web3CallComponents },\n];\n\nfunction componentForType(type, componentType) {\n  const componentRecord = COMPONENT_TYPES.find(t => t.value === type);\n  if (!componentRecord) { throw new Error('Unknown component type'); }\n  const component = componentRecord.components[componentType];\n  if (!component) { throw new Error(`No component for \"${type}\" \"${componentType}\"`); }\n  return component;\n}\n\nfunction componentsByColumn(components, colNumber) {\n  let res = [];\n  Object.keys(components).forEach(componentKey => {\n    const component = components[componentKey];\n    const layout = component.layout || defaultLayout;\n    const column = layout.column || 1;\n    if (column === colNumber) {\n      res.push(component);\n    }\n  });\n  const sorted = res.sort((a,b) => (a.layout ? a.layout.row || 0 : 0) - (b.layout ? b.layout.row || 0 : 0));\n  return sorted;\n}\n\nexport {\n  COMPONENT_TYPES,\n  componentForType,\n  componentsByColumn,\n  NewComponent,\n};\n","import { NewMarkdown } from './NewMarkdown';\nimport { EditMarkdown } from './EditMarkdown';\nimport { PreviewMarkdown } from './PreviewMarkdown';\nimport { ShowMarkdown } from './ShowMarkdown';\n\nexport default {\n  new: NewMarkdown,\n  edit: EditMarkdown,\n  preview: PreviewMarkdown,\n  show: ShowMarkdown,\n}\n","import React from 'react';\nimport {\n  Button,\n  Card,\n  CardActions,\n  CardContent,\n  CardHeader,\n  TextField,\n} from '@material-ui/core';\nimport { useForm } from 'react-hooks-useform';\n\n\nexport const NewMarkdown = ({ component, onCancel, onCreate }) => {\n  const [fields, form] = useForm({\n    fields: [\n      { name: 'content', label: 'Content' },\n    ],\n    submit: values => {\n      onCreate({\n        type: 'markdown',\n        content: values.get('content'),\n      });\n      onCancel();\n    },\n  });\n\n  return (\n    <div>\n      <Card>\n        <CardHeader title=\"Add text component\" />\n        <CardContent>\n\n        <TextField {...fields.content} multiline rowsMax=\"20\" />\n\n      </CardContent>\n\n      <CardActions>\n        <Button variant=\"outlined\" color=\"primary\" onClick={form.submit}>Save</Button>\n        <Button variant=\"outlined\" onClick={onCancel}>Cancel</Button>\n      </CardActions>\n\n    </Card>\n    </div>\n  );\n};\n","import React from 'react';\nimport {\n  Button,\n  Card,\n  CardActions,\n  CardContent,\n  CardHeader,\n  TextField,\n} from '@material-ui/core';\nimport { useForm } from 'react-hooks-useform';\nimport { fromJS } from 'immutable';\n\nimport { useActions } from '../../../../actions';\n\n\nexport const EditMarkdown = ({ component, onCancel, onSave }) => {\n  const { editComponent } = useActions();\n  const initialValues = fromJS({content: component.content});\n  const [fields, form] = useForm({\n    fields: [\n      { name: 'content', label: 'Content' },\n    ],\n    initialValues,\n    submit: values => {\n      editComponent({__id: component.__id, content: values.get('content')});\n      onSave();\n    },\n  });\n\n  return (\n    <div>\n      <Card>\n        <CardHeader title=\"Editing component\" />\n\n        <CardContent>\n\n        <TextField {...fields.content} multiline fullWidth rowsMax=\"20\" />\n\n      </CardContent>\n\n      <CardActions>\n        <Button variant=\"outlined\" color=\"primary\" onClick={form.submit}>Save</Button><Button variant=\"outlined\" onClick={onCancel}>Cancel</Button>\n      </CardActions>\n\n    </Card>\n    </div>\n\n  );\n\n\n};\n","import React from 'react';\nimport ReactMarkdown from \"react-markdown\";\n\nimport {\n  Typography,\n} from '@material-ui/core';\n\nconst PREVIEW_LINES = 5;\n\nexport const PreviewMarkdown = ({ component }) => {\n\n  const contentByLine = component.content.split('\\n');\n  const previewContent = contentByLine.slice(0, Math.min(contentByLine.length, PREVIEW_LINES)).join('\\n');\n\n  return (\n    <div>\n      <Typography><strong>{ component.title }</strong></Typography>\n      <ReactMarkdown source={previewContent} />\n      <Typography><strong>...</strong></Typography>\n    </div>\n  );\n}\n","import React from 'react';\nimport { Fab } from '@material-ui/core';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { makeStyles } from \"@material-ui/styles\";\n\n\nconst useStyles = makeStyles(theme => ({\n  fab: {\n    position: 'absolute',\n    bottom: theme.spacing(4),\n    right: theme.spacing(2),\n  },\n}));\n\nexport const EditButton = ({ onClick }) => {\n  const classes = useStyles();\n\n  return <Fab className={classes.fab} color=\"primary\" onClick={onClick}><EditIcon /></Fab>;\n};\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Slide from '@material-ui/core/Slide';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nconst useStyles = makeStyles((theme) => ({\n  button: {\n    margin: theme.spacing(1),\n  },\n}));\n\nexport const Confirm = ({ onConfirm, title, description, children }) => {\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const onOk = () => {\n    onConfirm();\n    handleClose();\n  };\n\n  if (!open) {\n    const childrenWithProps = React.Children.map(children, child =>\n      React.cloneElement(child, { onClick: handleClickOpen })\n    );\n    return childrenWithProps;\n  }\n\n  return (\n    <div>\n      <Dialog\n        open={open}\n        TransitionComponent={Transition}\n        keepMounted\n        onClose={handleClose}\n        aria-labelledby=\"alert-dialog-slide-title\"\n        aria-describedby=\"alert-dialog-slide-description\"\n      >\n        <DialogTitle id=\"alert-dialog-slide-title\">\n          { title }\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-slide-description\">\n            { description }\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={onOk} variant=\"outlined\" color=\"secondary\" startIcon={<DeleteIcon />} className={classes.button}>\n            Delete\n          </Button>\n          <Button onClick={handleClose} variant=\"outlined\">\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {\n  useMediaQuery,\n  Box,\n  Button,\n  ButtonGroup,\n  Card,\n  CardActions,\n  CardContent,\n  CardHeader,\n  Container,\n  Dialog,\n  Grid,\n  IconButton,\n  Slider,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport { useTheme, withStyles } from '@material-ui/core/styles';\nimport AddIcon from '@material-ui/icons/Add';\nimport EditIcon from '@material-ui/icons/Edit';\nimport DeleteIcon from '@material-ui/icons/Delete';\n\nimport { fromJS } from 'immutable';\nimport { useForm } from 'react-hooks-useform';\n\nimport { useComponentsByPageId } from '../../contexts/AppTemplateContext';\nimport { useActions } from '../../actions';\nimport { Confirm } from '../../components/Controls/Confirm';\nimport { GRID_COLS } from '../../constants';\nimport { defaultLayout } from './Page';\nimport { NewComponent, componentForType, componentsByColumn } from './Components';\n\n\nconst StyledSlider = withStyles({\n  //track: {\n    //width: '100% !important',\n  //},\n})(Slider);\n\nfunction componentPreview(component, deleteComponent, setEditComponent) {\n  const PreviewComponent = componentForType(component.type, 'preview');\n\n  return (\n    <Card variant=\"outlined\">\n      <CardHeader title={component.name || component.type} />\n\n      <CardContent>\n        <PreviewComponent component={component} />\n      </CardContent>\n\n      <CardActions>\n        <Button size=\"small\" startIcon={<EditIcon />} onClick={() => setEditComponent(component)}>Edit</Button>\n        <Confirm onConfirm={() => deleteComponent(component)} title=\"Delete Component\" description=\"Delete this component?\">\n          <IconButton edge=\"end\" aria-label=\"delete\">\n            <DeleteIcon />\n          </IconButton>\n        </Confirm>\n\n      </CardActions>\n\n    </Card>\n  );\n}\n\nconst columnWithdsToSliderPositions = (columnWidths) => {\n  let sliderPositions = [];\n  if (!columnWidths || columnWidths.length === 1) {\n    sliderPositions = [GRID_COLS];\n  } else {\n    for (let x = 1; x < columnWidths.length; x++) {\n      sliderPositions.push(GRID_COLS - columnWidths[x]);\n    }\n  }\n  return sliderPositions;\n};\n\nconst sliderPositionsToColumnWidths = (sliderPositions) => {\n  let remainder = 0;\n  let columnWidths = [];\n  sliderPositions.forEach(c => {\n    columnWidths.push(c - remainder);\n    remainder = remainder + (c - remainder);\n  });\n  if (remainder < GRID_COLS) { columnWidths.push(GRID_COLS - remainder); }\n\n  return columnWidths;\n};\n\nexport const EditPage = ({ page, onCancel }) => {\n  const { editPage, deleteComponent } = useActions();\n  const components = useComponentsByPageId(page.__id);\n  const [editComponent, setEditComponent] = useState();\n  const [showAddComponent, setShowAddComponent] = useState(false);\n  const history = useHistory();\n\n  let pageColumns;\n  let pageColumnPositions;\n  if (page.layout && page.layout.columns && Array.isArray(page.layout.columns)) {\n    pageColumns = page.layout.columns.length;\n    pageColumnPositions = page.layout.columns;\n  } else {\n    pageColumns = 1;\n    pageColumnPositions = [GRID_COLS];\n  }\n  const [columnCount, setColumnCount] = useState(pageColumns);\n  const [sliderPositions, setSliderPositions] = useState(columnWithdsToSliderPositions(pageColumnPositions));\n  const [changesMade, setChangesMade] = useState(false);\n\n  const initialValues = fromJS(page);\n  const [fields, form] = useForm({\n    fields: [\n      { name: 'title', label: 'title', required: false },\n    ],\n    initialValues,\n    submit: values => {\n      editPage({\n        ...page,\n        title: values.get('title'),\n      });\n      onCancel();\n    }\n  });\n\n  const returnToPage = () => {\n    onCancel();\n  };\n\n  if (editComponent !== undefined) {\n    const component = components[editComponent.__id];\n    const EditComponent = componentForType(component.type, 'edit');\n    return <EditComponent component={component} onCancel={() => setEditComponent(undefined)} onSave={returnToPage} />;\n  }\n\n  let maxRow = 1;\n  Object.keys(components).forEach(componentKey => {\n    const component = components[componentKey];\n    const componentLayout = component.layout || defaultLayout;\n    if (componentLayout.row > maxRow) { maxRow = componentLayout.row; }\n  });\n\n  const columnWidths = sliderPositionsToColumnWidths(sliderPositions);\n  let componentGrid = (\n    <Grid container spacing={1}>\n      { columnWidths.map((colSize,colNum) => {\n        const actualColNum = colNum + 1; // columns are 1 based\n        const rowComponents = componentsByColumn(components, actualColNum);\n        return <Grid item xs={colSize} key={`col-${actualColNum}`}>\n          <Grid container spacing={1}>\n            { rowComponents.map(component =>\n              <Grid item xs={GRID_COLS} key={`component-${component.__id}`}>\n                { componentPreview(component, deleteComponent, setEditComponent) }\n              </Grid>\n            )}\n            <Grid item xs={GRID_COLS} style={{textAlign: 'center'}}>\n              <Card>\n                <CardContent>\n                  <Button color=\"primary\" aria-label=\"Add component in new row\"\n                    component=\"span\" startIcon={<AddIcon />}\n                    onClick={() => setShowAddComponent({column: actualColNum, row: rowComponents.length + 1})}>\n                    Add Component Here\n                  </Button>\n                </CardContent>\n              </Card>\n            </Grid>\n          </Grid>\n        </Grid>\n      })}\n    </Grid>\n  );\n\n  const marks = [\n    {value: 1, label: '1'},\n    {value: 2, label: '2'},\n    {value: 3, label: '3'},\n    {value: 4, label: '4'},\n    {value: 5, label: '5'},\n    {value: 6, label: '6'},\n    {value: 7, label: '7'},\n    {value: 8, label: '8'},\n    {value: 9, label: '9'},\n    {value: 10, label: '10'},\n    {value: 11, label: '11'},\n    {value: 12, label: '12'},\n  ];\n\n  const updateColumnCount = (c) => {\n    let newSliderPositions = [];\n    if (c == 1) {\n      newSliderPositions.push(GRID_COLS);\n    } else {\n      for (let x=1; x <= (c - 1); x++) {\n        newSliderPositions.push((GRID_COLS / c) * x);\n      }\n    }\n    setColumnCount(c);\n    setSliderPositions(newSliderPositions.sort());\n    setChangesMade(true);\n  }\n\n  const saveLayoutChanges = () => {\n    const columns = sliderPositionsToColumnWidths(sliderPositions);\n    editPage({\n      ...page,\n      layout: {\n        ...page.layout,\n        columns,\n      },\n    });\n    onCancel();\n  };\n\n  const updateSliderPositions = (positions) => {\n    setSliderPositions(positions);\n    setChangesMade(true);\n  };\n\n  return (\n    <div>\n      { showAddComponent ? <NewComponentModal page_id={page.__id} column={showAddComponent.column} row={showAddComponent.row} preSave={saveLayoutChanges} onCancel={() => setShowAddComponent(false)} /> : undefined }\n      <Card>\n        <CardHeader title=\"Page properties\" />\n        <CardContent>\n\n          <TextField {...fields.title} />\n\n        </CardContent>\n\n        <CardActions>\n          <Button color=\"primary\" variant=\"outlined\" onClick={form.submit}>Save</Button>\n        </CardActions>\n\n      </Card>\n\n      <Card>\n        <CardHeader title=\"Layout\" />\n        <CardContent>\n          <Grid container>\n            <Grid item xs={4}>\n              { /* TODO: ButtonGroup should not be inside Typography */ }\n              <Typography>\n                Columns\n                { ' ' }\n                <ButtonGroup size=\"large\" color=\"primary\" aria-label=\"large outlined primary button group\">\n                  <Button variant=\"outlined\" color={columnCount === 1 ? 'primary' : 'default'} onClick={() => updateColumnCount(1)}>One</Button>\n                  <Button variant=\"outlined\" color={columnCount === 2 ? 'primary' : 'default'} onClick={() => updateColumnCount(2)}>Two</Button>\n                  <Button variant=\"outlined\" color={columnCount === 3 ? 'primary' : 'default'} onClick={() => updateColumnCount(3)}>Three</Button>\n                </ButtonGroup>\n              </Typography>\n            </Grid>\n\n            <Grid item xs={8}>\n              <StyledSlider marks={marks} min={1} max={GRID_COLS} value={sliderPositions} disabled={columnCount === 1} onChange={(evt,val) => updateSliderPositions(val)} />\n            </Grid>\n\n          </Grid>\n\n          { componentGrid }\n\n        </CardContent>\n\n      </Card>\n\n      <Box my={4}>\n        <Button variant=\"outlined\" onClick={onCancel}>Return to Page</Button>\n        { ' ' }\n        <Button color=\"primary\" variant=\"outlined\" disabled={!changesMade} onClick={saveLayoutChanges}>Save Layout</Button>\n      </Box>\n    </div>\n  );\n}\n\n\nconst NewComponentModal = ({page_id, row, column, onCancel, preSave}) => {\n  const theme = useTheme();\n  const fullScreen = useMediaQuery(theme.breakpoints.down('md'));\n\n  return (\n    <Dialog fullScreen={fullScreen} open={true}>\n      <Container fixed>\n        <NewComponent page_id={page_id} row={row} column={column} preSave={preSave} />\n        <Button variant=\"outlined\" onClick={onCancel}>Cancel</Button>\n      </Container>\n    </Dialog>\n  );\n}\n","import React, { useState } from 'react';\nimport {\n  Grid,\n  Typography,\n} from '@material-ui/core';\nimport { Alert, AlertTitle } from '@material-ui/lab';\n\nimport { useComponentsByPageId } from '../../contexts/AppTemplateContext';\n\nimport { GRID_COLS } from '../../constants';\nimport { NewComponent, componentForType, componentsByColumn } from './Components';\nimport { EditButton } from './EditButton';\nimport { EditPage } from './EditPage';\n\nexport const defaultLayout = {row: 1, column: 1};\n\n\nexport const Page = ({ page }) => {\n  const components = useComponentsByPageId(page.__id);\n  const [editMode, setEditMode] = useState(false);\n\n  if (editMode) {\n    return <EditPage page={page} onCancel={() => setEditMode(false)} />\n  }\n\n  if (Object.keys(components).length === 0) {\n    return (\n    <div>\n      <Alert severity=\"warning\">\n        <AlertTitle>Page has no components</AlertTitle>\n      </Alert>\n      <NewComponent page_id={page.__id} />\n    </div>\n    );\n  }\n\n  const columnWidths = page.layout && page.layout.columns ? page.layout.columns : [GRID_COLS];\n  let componentGrid = (\n    <Grid container spacing={1}>\n      { columnWidths.map((colSize,colNum) => {\n        const actualColNum = colNum + 1; // columns are 1 based\n        const rowComponents = componentsByColumn(components, actualColNum);\n        return <Grid item xs={colSize} key={`col-${actualColNum}`}>\n          <Grid container spacing={1}>\n            { rowComponents.map(component => {\n              const ShowComponent = componentForType(component.type, 'show');\n              return <Grid item xs={GRID_COLS} key={`component-${component.__id}`}>\n                <ShowComponent component={component} />\n              </Grid>;\n            })}\n          </Grid>\n        </Grid>\n      })}\n    </Grid>\n  );\n\n  return (\n    <div>\n      <Typography variant=\"h4\"> { page.title }</Typography>\n      <div>\n        { componentGrid }\n      </div>\n        <EditButton onClick={() => setEditMode(true)} />\n    </div>\n  );\n}\n","import React from 'react';\n\nimport { usePagesByTabId } from '../../contexts/AppTemplateContext';\nimport { NewPage } from './NewPage';\nimport { Page } from './Page';\n\nexport const Tab = ({ tab }) => {\n  const pages = usePagesByTabId(tab.__id);\n\n  // Just render first page for now\n  const page = pages && Object.keys(pages).length > 0 ? pages[Object.keys(pages)[0]] : undefined;\n\n  if (!page) {\n    return <NewPage tab_id={tab.__id} />;\n  }\n\n  return <Page page={page} />;\n}\n","import React from 'react';\nimport {\n  Button,\n  Card,\n  CardActions,\n  CardHeader,\n  CardContent,\n  Checkbox,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Typography,\n} from '@material-ui/core';\nimport CodeIcon from '@material-ui/icons/Code';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport { Link } from 'react-router-dom';\nimport { useAppTemplate, useSettings, serializeTemplate } from '../../contexts/AppTemplateContext';\nimport { useToasts } from 'react-toast-notifications'\nimport fileDownload from 'js-file-download';\n\n\nexport const SettingsMain = () => {\n  const template = useAppTemplate();\n  const { addToast } = useToasts();\n\n  const SettingsOptions = template.__source.settingsComponent;\n\n  const download = () => {\n    const exportedTemplate = serializeTemplate(template);\n    const formatted = JSON.stringify(exportedTemplate, 1, '  ');\n    fileDownload(formatted, 'template.json');\n  };\n\n  return (\n    <div>\n      <Typography variant=\"h4\" gutterBottom>\n        Settings\n      </Typography>\n\n      <Card>\n        <CardHeader title=\"App Template\" />\n\n        <CardContent>\n          <List>\n            <ListItem>\n              <ListItemText primary={`Name: ${template.name}`} />\n            </ListItem>\n\n            <ListItem>\n              <ListItemText primary={`Location: ${template.__source.name}`} />\n            </ListItem>\n          </List>\n\n        </CardContent>\n\n        <CardActions>\n          <Button variant=\"outlined\" startIcon={<CodeIcon />} component={Link} to=\"/_/json\">Template source JSON</Button>\n          <Button variant=\"outlined\" startIcon={<GetAppIcon />} onClick={download}>Download Template</Button>\n        </CardActions>\n      </Card>\n\n      <Card>\n        <CardHeader title=\"Storage settings\" />\n\n        <CardContent>\n\n          <SettingsOptions />\n\n        </CardContent>\n\n        <CardActions>\n        </CardActions>\n      </Card>\n\n    </div>\n  );\n}\n","import React, { useEffect, useRef } from 'react'\nimport { makeStyles } from \"@material-ui/styles\";\n\nimport Jazzicon from 'jazzicon'\n\nconst useStyles = makeStyles(theme => ({\n\tidenticon: {\n    margin: 'auto',\n\t},\n}));\n\n\nexport const Identicon = ({ address, pixelWidth }) => {\n\tconst ref = useRef();\n\tconst classes = useStyles();\n\n\tuseEffect(() => {\n\t\tif (address && ref.current) {\n\t\t\tref.current.innerHTML = '';\n\t\t\tref.current.appendChild(Jazzicon(pixelWidth || 16, parseInt(address.slice(2, 10), 16)));\n\t\t}\n  });\n\n\treturn <span className={classes.identicon} ref={ref}></span>;\n};\n","import React, { useState, useEffect } from 'react';\nimport Button from '@material-ui/core/Button';\nimport useFileInput from \"use-file-input\";\n\nimport { Spinner } from '../../components/Controls/Spinner';\n\n\nexport const FileUploader = ({ accept, children, onFileUpload, ...rest }) => {\n  const [file, setFile] = useState(null);\n  const [error, setError] = useState(null);\n  const [result, setResult] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  const handleFileSelect = useFileInput(\n    (files) => {\n      setFile(files[0]);\n    },\n    { accept, multiple: false }\n  );\n\n  useEffect(() => {\n    if (!file) { return; }\n    const reader = new FileReader(file);\n\n    reader.onloadstart = () => {\n      setLoading(true)\n    };\n\n    reader.onloadend = () => {\n      setLoading(false)\n    };\n\n    reader.onload = e => {\n      setResult(e.target.result)\n      onFileUpload(e.target.result);\n    };\n\n    reader.onError = e => {\n      setError(e);\n    }\n\n    try {\n      reader.readAsText(file);\n    } catch (e) {\n      setError(e)\n    }\n  }, [file]);\n\n  if (loading) {\n    return <Spinner />;\n  }\n\n  return (\n    <Button onClick={handleFileSelect} {...rest}>\n      { children }\n    </Button>\n  );\n}\n","import React from 'react';\nimport OpenInNewIcon from '@material-ui/icons/OpenInNew';\nimport { shortenTxHash } from '../lib/web3';\nimport { NETWORKS } from '../constants';\n\nconst ETHERSCAN_NETWORKS = ['mainnet', 'ropsten', 'kovan', 'rinkeby', 'goerli'];\n\nfunction etherscanNetwork(network) {\n  return ETHERSCAN_NETWORKS.indexOf(network) > -1;\n}\n\nfunction etherscanApiHost(network) {\n  if (!etherscanNetwork(network)) { throw new Error(`Unsupported network ${network}`); }\n  return network === 'mainnet' ? 'api' : `api-${network}`;\n}\n\n\nexport const fetchAbi = async (address, network) => {\n    let result = await fetch(\n      `https://${ etherscanApiHost(network) }.etherscan.io/api?module=contract&action=getabi&address=${address}`\n    )\n    let json = await result.json()\n    if (json.status === '1') {\n      return json.result;\n    } else {\n      throw new Error('Failed to fetch ABI from etherscan');\n    }\n};\n\nfunction etherscanUrl(chainId) {\n  const baseUrl = 'etherscan.io';\n  const network = NETWORKS.find(n => n.chainId === chainId);\n  if (network.id === 'mainnet') { return baseUrl; }\n  return `${network.id}.${baseUrl}`;\n}\n\nexport const EtherscanTxLink = ({hash, chainId, prefix='' }) => {\n  return <span>\n    { prefix }\n    { prefix.length > 0 ? ' ' : undefined }\n    <a href={`https://${ etherscanUrl(chainId)}/tx/${hash}`} target=\"_blank\" rel=\"noopener noreferrer\">\n      { shortenTxHash(hash) }\n      <OpenInNewIcon fontSize=\"small\" />\n    </a>\n  </span>\n};\n","import React, { useState } from 'react';\nimport {\n  Avatar,\n  Button,\n  Card,\n  CardContent,\n  CardHeader,\n  Collapse,\n  Checkbox,\n  Dialog,\n  DialogTitle,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  FormControlLabel,\n  TextField,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ApartmentIcon from '@material-ui/icons/Apartment';\nimport { blue } from '@material-ui/core/colors';\n\nimport { useToasts } from 'react-toast-notifications'\nimport { useForm } from 'react-hooks-useform';\nimport { fromJS } from 'immutable';\n\nimport { FileUploader } from '../../components/Controls/FileUploader';\nimport { ErrorMsg } from '../../components/Controls/ErrorMsg';\nimport { SelectField } from '../../components/Controls/SelectField';\nimport { Spinner } from '../../components/Controls/Spinner';\nimport { NETWORKS } from '../../constants';\nimport { useActions } from '../../actions';\nimport { fetchAbi } from '../../lib/etherscan';\n\nconst validateAddress = (address) => address.startsWith('0x') && address.length === 42 ? '' : 'Invalid address';\n\nconst useStyles = makeStyles({\n  avatar: {\n    backgroundColor: blue[100],\n    color: blue[600],\n  },\n});\n\nexport const NewAddress = ({ onCancel }) => {\n  const { addAddress } = useActions();\n  const [fetching, setFetching] = useState(false);\n  const [error, setError] = useState(null);\n  const [deployedOptions, setDeployedOptions] = useState(null);\n  const { addToast } = useToasts();\n\n  const networkOptions = Object.keys(NETWORKS).map(n => ({value: NETWORKS[n].id, label: NETWORKS[n].name}));\n  const initialValues = fromJS({network: 'mainnet', fetchabi: true});\n  const [fields, form] = useForm({\n    fields: [\n      { name: 'name', label: 'Name', optional: true },\n      { name: 'address', label: 'Address', validate: validateAddress },\n      { name: 'network', label: 'Network', type: 'select', options: networkOptions },\n      { name: 'fetchabi', label: 'Fetch ABI from Etherscan?', type: 'boolean' },\n      { name: 'abi', label: 'ABI', optional: true },\n    ],\n    initialValues,\n    submit: async (values) => {\n      const address = values.get('address');\n      const network = values.get('network');\n      const name = values.get('name');\n\n      setFetching(true);\n      try {\n        let abi;\n        if (values.get('fetchabi')) {\n          abi = await fetchAbi(address, network);\n        } else {\n          abi = values.get('abi');\n        }\n        addAddress({network, address, abi, name});\n        form.reset();\n        addToast(`Added address ${name || address}`, {apperance: 'success', autoDismiss: true, autoDismissTimeout: 3000});\n        setFetching(false);\n\n      } catch (err) {\n        setError(err.toString());\n        setFetching(false);\n      }\n    }\n  });\n\n\n  if (fetching) { return <Spinner />; }\n\n  const handleTruffleJson = (truffleJson) => {\n    const json = JSON.parse(truffleJson);\n\n    const deployedNetworks = Object.keys(json.networks).map(chainId => ({\n      chainId,\n      address: json.networks[chainId].address,\n    }));\n\n    form.setValue('fetchabi', false);\n    form.setValue('name', json.contractName);\n    form.setValue('abi', JSON.stringify(json.abi));\n\n    if (deployedNetworks.length === 1) {\n      const networkId = NETWORKS.find(n => n.chainId == deployedNetworks[0].chainId);\n      form.setValue('network', networkId.id);\n      form.setValue('address', deployedNetworks[0].address);\n    } else if (deployedNetworks.length > 1) {\n      setDeployedOptions(deployedNetworks);\n    }\n  };\n\n  const handleDeploymentSelection = (network) => {\n    const networkId = NETWORKS.find(n => n.chainId == network.chainId);\n    form.setValue('network', networkId.id);\n    form.setValue('address', network.address);\n    setDeployedOptions(null);\n  };\n\n  return (\n    <Card>\n      <CardHeader title=\"Add Ethereum address to addressbook\" />\n      <CardContent>\n        { error ? <ErrorMsg message={error} /> : undefined }\n        { deployedOptions ? <NetworkOptionsSelector options={deployedOptions} onSelect={handleDeploymentSelection} /> : undefined }\n\n        <form.Form>\n          <TextField fullWidth {...fields.name} />\n\n          <SelectField fullWidth {...fields.network } />\n\n          <TextField fullWidth {...fields.address} />\n\n          <FormControlLabel\n            control={<Checkbox {...fields.fetchabi}  />}\n            label={fields.fetchabi.label}\n          />\n\n        <Collapse in={!fields.fetchabi.value}>\n          <TextField multiline fullWidth {...fields.abi } />\n        </Collapse>\n\n        <Button type='submit' variant=\"outlined\" color=\"primary\" onClick={form.submit}>Submit</Button>\n        {' '}\n        <FileUploader variant=\"outlined\" onFileUpload={handleTruffleJson}>Upload Truffle build .json</FileUploader>\n      </form.Form>\n\n    </CardContent>\n  </Card>\n  );\n}\n\nconst NetworkOptionsSelector = ({options, onSelect}) => {\n  const classes = useStyles();\n\n  const handleListItemClick = (value) => {\n    onSelect(value);\n  };\n\n  return (\n    <Dialog aria-labelledby=\"simple-dialog-title\" open={true}>\n      <DialogTitle id=\"simple-dialog-title\">Select Deployed Contract</DialogTitle>\n      <List>\n        {options.map((network) => {\n          const networkRecord = NETWORKS.find(n => n.chainId == network.chainId);\n          if (!networkRecord) { return; }\n          return (\n            <ListItem button onClick={() => handleListItemClick(network)} key={network.chainId}>\n            <ListItemAvatar>\n              <Avatar className={classes.avatar}>\n                <ApartmentIcon />\n              </Avatar>\n            </ListItemAvatar>\n            <ListItemText primary={networkRecord.name} secondary={network.address} />\n          </ListItem>\n          );\n        })}\n      </List>\n    </Dialog>\n  );\n\n};\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport {\n  Avatar,\n  Card,\n  CardHeader,\n  CardContent,\n  Chip,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemSecondaryAction,\n  ListItemText,\n  IconButton,\n} from '@material-ui/core';\nimport { makeStyles } from \"@material-ui/styles\";\nimport DeleteIcon from '@material-ui/icons/Delete';\n\nimport { useAppTemplate } from '../../contexts/AppTemplateContext';\nimport { useActions } from '../../actions';\n\nimport { Identicon } from '../Controls/Identicon';\nimport { Confirm } from '../Controls/Confirm';\nimport { NewAddress } from './NewAddress';\n\nconst useStyles = makeStyles(theme => ({\n  identicon: {\n    height: 100,\n    width: 100,\n    //borderRadius: 200,\n  },\n}));\n\nexport const Addresses = () => {\n  const classes = useStyles();\n  const template = useAppTemplate();\n  const { addresses } = template;\n  const { deleteAddress } = useActions();\n\n  const onDelete = (address) => {\n    deleteAddress(address);\n  };\n\n  const noAddresses = addresses.length === 0 ? <div>No Addresses.  Add one below</div> : undefined;\n\n  return (\n    <div>\n      <Card>\n        <CardHeader title=\"Addresses\" />\n        <CardContent>\n          { noAddresses }\n          <List dense={false}>\n            { addresses && addresses.map(address => (\n              <ListItem key={address.address}>\n                <ListItemAvatar>\n                  <Avatar>\n                    <Identicon address={address.address} pixelWidth={42} className={classes.identicon} />\n                  </Avatar>\n                </ListItemAvatar>\n                <ListItemText\n                  primary={address.name ? <Link to={`/_/addresses/${address.network}/${address.address}`}>{ address.name }</Link>: <span><Link to={`/_/addresses/${address.network}/${address.address}`}>{ address.address}{' '}</Link><Chip label={address.network} variant=\"outlined\" size=\"small\" /></span>}\n                  secondary={address.name ? <span>{ address.address }{' '}<Chip label={address.network} variant=\"outlined\" size=\"small\" /></span> : null }\n                />\n                <ListItemSecondaryAction>\n                  <Confirm onConfirm={() => onDelete(address)} title=\"Delete Address\" description=\"Remove address from address book?\">\n                    <IconButton edge=\"end\" aria-label=\"delete\" >\n                      <DeleteIcon />\n                    </IconButton>\n                  </Confirm>\n                </ListItemSecondaryAction>\n              </ListItem>\n            )) }\n          </List>\n\n          <NewAddress />\n\n        </CardContent>\n\n      </Card>\n    </div>\n  );\n}\n","import React from 'react';\nimport {\n  Box,\n  List,\n  ListItem,\n  Typography,\n} from '@material-ui/core';\nimport { useContractByAddress, useHasSigner } from '../../lib/web3';\n\nexport const AddressABI = ({ address, network }) => {\n  const contract = useContractByAddress(address, network);\n\n  if (!contract) {\n    // Not a contract, or do not have ABI\n    // Add option to add an ABI?\n    return null;\n  }\n\n  const calls = Object.filter(contract.interface.functions, f => f.type === 'call');\n  const callFns = Object.keys(calls).filter(n => n.indexOf('(') > -1);\n\n  const txs = Object.filter(contract.interface.functions, f => f.type === 'transaction');\n  const txFns = Object.keys(calls).filter(n => n.indexOf('(') > -1);\n\n  const events = Object.keys(contract.interface.events).filter(n => n.indexOf('(') > -1);\n\n  return (\n    <div>\n      <Typography>Contract ABI</Typography>\n\n      <Box my={3}>\n        <Typography>Call functions</Typography>\n\n        <List>\n        { callFns.map(callFn => {\n          return <ListItem key={callFn}>{ callFn }</ListItem>;\n        }) }\n      </List>\n\n    </Box>\n\n      <Box my={3}>\n        <Typography>Transactions</Typography>\n\n        <List>\n        { txFns.map(txFn => {\n          return <ListItem key={txFn}>{ txFn }</ListItem>;\n        }) }\n      </List>\n\n    </Box>\n\n      <Box my={3}>\n        <Typography underline>Events</Typography>\n\n        <List>\n        { events.map(event => {\n          return <ListItem key={event}>{ event }</ListItem>;\n        }) }\n      </List>\n\n      </Box>\n    </div>\n  );\n}\n","import React from 'react';\nimport { useParams, useHistory, Link } from 'react-router-dom';\nimport {\n  Box,\n  Button,\n  Chip,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport { useForm } from 'react-hooks-useform';\nimport { fromJS } from 'immutable';\n\nimport { useAddress } from '../../contexts/AppTemplateContext';\nimport { useActions } from '../../actions';\nimport { AddressABI } from './AddressABI';\n\nexport const EditAddress = () => {\n  const { address, network } = useParams();\n  const history = useHistory();\n  const { editAddress } = useActions();\n  const addressRecord = useAddress(address, network);\n\n  const initialValues = fromJS(addressRecord);\n\n  const [fields, form] = useForm({\n    fields: [\n      { name: 'name', label: 'Name', optional: true },\n    ],\n    initialValues,\n    submit: (values) => {\n      const name = values.get('name');\n\n      editAddress({\n        ...addressRecord,\n        name,\n      });\n      history.push('/_/addresses');\n\n    },\n  });\n\n  return (\n    <div>\n      <Typography variant=\"h6\">{ address }{' '}<Chip label={network} variant=\"outlined\" size=\"small\" /></Typography>\n\n\n      <form.Form>\n        <Box my={2}>\n          <TextField fullWidth {...fields.name} />\n        </Box>\n\n        <Box my={2}>\n\n          <Button type=\"submit\" onClick={form.submit} variant=\"outlined\" color=\"primary\">Save</Button>\n          <Button component={Link} to=\"/_/addresses\" variant=\"outlined\">Cancel</Button>\n        </Box>\n\n      </form.Form>\n\n\n      <Box my={2}>\n        <AddressABI address={address} network={network} />\n      </Box>\n\n    </div>\n  );\n}\n","import React from 'react';\nimport {\n  Box,\n  Button,\n  Card,\n  CardActions,\n  CardContent,\n  CardHeader,\n  TextField,\n  Typography,\n} from '@material-ui/core';\nimport { useForm } from 'react-hooks-useform';\n\nimport { useActions } from '../../actions';\n\nexport const NewIntegration = ({ onCancel }) => {\n  const { addIntegration } = useActions();\n\n  const [fields, form] = useForm({\n    fields: [\n      { name: 'endpoint', label: 'Endpoint' },\n    ],\n    submit: values => { addIntegration({type: 'thegraph', endpoint: values.get('endpoint')}); }\n  });\n\n  return (\n    <Card>\n      <CardHeader title=\"New Integration\" />\n      <CardContent>\n\n        <Typography>TheGraph</Typography>\n\n        <form.Form>\n          <Box flexDirection='column'>\n            <TextField {...fields.endpoint} />\n          </Box>\n          <Button type='submit' onClick={form.submit}>Submit</Button>\n        </form.Form>\n\n\n      </CardContent>\n      <CardActions>\n        <Button color=\"primary\">Save</Button>\n        <Button onClick={onCancel}>Cancel</Button>\n      </CardActions>\n    </Card>\n  );\n}\n","import React, { useState } from 'react';\nimport {\n  Avatar,\n  Button,\n  Card,\n  CardActions,\n  CardHeader,\n  CardContent,\n  Collapse,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemSecondaryAction,\n  ListItemText,\n  IconButton,\n} from '@material-ui/core';\nimport DeleteIcon from '@material-ui/icons/Delete';\n\nimport { useAppTemplate } from '../../contexts/AppTemplateContext';\nimport { useActions } from '../../actions';\n\nimport { Confirm } from '../../components/Controls/Confirm';\nimport { NewIntegration } from './NewIntegration';\n\nimport thegraphLogo from '../../assets/images/thegraph.jpg';\n\n\nfunction nameForIntegraion(integrationType) {\n  switch (integrationType) {\n    case 'thegraph':\n      return <a href=\"http://thegraph.com\" target=\"_blank\" rel=\"noopener noreferrer\">The Graph</a>;\n    default:\n      throw new Error(`unknown integration type ${integrationType}`);\n  }\n}\n\nexport const Integrations = () => {\n  const  template = useAppTemplate();\n  const { integrations } = template;\n  const { deleteIntegration } = useActions();\n  const [showNewIntegration, setShowNewIntegration] = useState(false);\n\n  const onDelete = (integration) => {\n    deleteIntegration(integration);\n  };\n\n  // TODO: Link to endpoint.  But sanitize first because it's user specified\n\n  return (\n    <div>\n      <Card>\n        <CardHeader title=\"Integrations\" />\n        <CardContent>\n          <List dense={false}>\n            { integrations && Object.keys(integrations).map(integrationKey => (\n              <ListItem key={integrations[integrationKey].__id}>\n                <ListItemAvatar>\n                  <Avatar src={thegraphLogo} alt=\"The Graph\" />\n                </ListItemAvatar>\n                <ListItemText\n                  primary={nameForIntegraion(integrations[integrationKey].type)}\n                  secondary={integrations[integrationKey].endpoint}\n                />\n                <ListItemSecondaryAction>\n                  <Confirm onConfirm={() => onDelete(integrations[integrationKey])} title=\"Delete Integration\" description=\"Delete integration?\">\n                    <IconButton edge=\"end\" aria-label=\"delete\">\n                      <DeleteIcon />\n                    </IconButton>\n                  </Confirm>\n                </ListItemSecondaryAction>\n              </ListItem>\n            )) }\n          </List>\n\n        <Collapse in={showNewIntegration}>\n          <NewIntegration onCancel={() => setShowNewIntegration(false)} />\n        </Collapse>\n\n        </CardContent>\n\n        <CardActions>\n          { showNewIntegration ? undefined :\n              <Button onClick={() => setShowNewIntegration(true)}>Add Integration</Button>\n          }\n        </CardActions>\n      </Card>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport {\n  Button,\n  InputAdornment,\n  TextField,\n} from '@material-ui/core';\n\nimport { useForm } from 'react-hooks-useform';\n\nimport { ErrorMsg } from '../../components/Controls/ErrorMsg';\nimport { useActions } from '../../actions';\n\nexport const NewTab = () => {\n  const { addTab } = useActions();\n  const [error, setError] = useState(null);\n\n  const [fields, form] = useForm({\n    fields: [\n      { name: 'name', label: 'Name' },\n    ],\n    submit: values => {\n      try {\n        addTab({\n          name: values.get('name'),\n        });\n      } catch (err) {\n        setError(err.toString());\n      }\n    }\n  });\n\n  const errMsg = error ? <ErrorMsg message={error} /> : undefined;\n\n  return (\n    <div>\n      { errMsg }\n      <form.Form>\n        <TextField\n          fullWidth\n          {...fields.name }\n          InputProps={{endAdornment: <InputAdornment position=\"end\"><Button type=\"submit\" color=\"primary\" onClick={form.submit}>Add Tab</Button></InputAdornment>}}\n        />\n      </form.Form>\n    </div>\n  );\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\n\nimport 'emoji-mart/css/emoji-mart.css';\nimport data from 'emoji-mart/data/apple.json'\nimport { NimblePicker } from 'emoji-mart';\n\nexport const EmojiPicker = ({ onSelect, onRemove, onCancel }) => {\n  return (\n    <div>\n      <Dialog\n        open={true}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n\n      <DialogContent>\n        <NimblePicker set=\"apple\" onSelect={onSelect} data={data} />\n      </DialogContent>\n\n      <DialogActions>\n        <Button onClick={onCancel}>Cancel</Button>\n        <Button onClick={onRemove}>\n          Remove Icon\n        </Button>\n      </DialogActions>\n    </Dialog>\n\n  </div>\n  );\n};\n","import React, { useState } from 'react';\nimport {\n  Card,\n  CardHeader,\n  CardContent,\n  CardActions,\n  Button,\n  TextField,\n} from '@material-ui/core';\nimport { useForm } from 'react-hooks-useform';\nimport { fromJS } from 'immutable';\nimport { Emoji } from 'emoji-mart';\nimport 'emoji-mart/css/emoji-mart.css';\n\nimport { EmojiPicker } from '../../components/Controls/EmojiPicker';\nimport { useActions } from '../../actions';\nimport { Confirm } from '../../components/Controls/Confirm';\n\n\nexport const EditTab = ({ tab, onCancel }) => {\n  const { editTab, deleteTab } = useActions();\n  const [showSelectIcon, setShowSelectIcon] = useState(false);\n\n  const initialValues = fromJS(tab);\n  const [fields, form] = useForm({\n    fields: [\n      { name: 'name', label: 'Name' },\n      { name: 'slug', label: 'URL Slug' }, // TODO: Verifiation\n    ],\n    initialValues,\n    submit: values => {\n      editTab({\n        ...tab,\n        name: values.get('name'),\n        slug: values.get('slug'),\n      });\n      onCancel();\n    }\n  });\n\n  const onDelete = (tab) => {\n    deleteTab(tab);\n    onCancel();\n  };\n\n  const onRemoveIcon = () => {\n    const newTab = Object.assign({}, tab, {icon: undefined});\n    editTab(newTab);\n    setShowSelectIcon(false);\n  };\n\n  const onSelectEmoji = (emoji) => {\n    const newTab = Object.assign({}, tab, {icon: emoji.id});\n    editTab(newTab);\n    setShowSelectIcon(false);\n  };\n\n  const onCancelEmojii = () => {\n    setShowSelectIcon(false);\n  };\n\n  const selectIcon = showSelectIcon ? <EmojiPicker onSelect={onSelectEmoji} onRemove={onRemoveIcon} onCancel={onCancelEmojii} /> : undefined;\n\n  const iconText = tab.icon ? <span>Icon:{' '}<Emoji emoji={tab.icon} size={32} set={'apple'} /></span> : 'Select icon';\n\n  return (\n    <div>\n      { selectIcon }\n      <Card>\n        <CardHeader title=\"Editing tab\" />\n        <form.Form>\n          <CardContent>\n\n            <Button onClick={() => setShowSelectIcon(true)}>\n              { iconText }\n            </Button>\n\n            <TextField fullWidth {...fields.name} />\n\n            <TextField fullWidth {...fields.slug} />\n\n          </CardContent>\n\n          <CardActions>\n\n            <Button variant=\"outlined\" color=\"primary\" type=\"submit\" onClick={form.submit}>Save</Button>\n            <Button variant=\"outlined\" onClick={onCancel}>Cancel</Button>\n\n            <br />\n\n            <Confirm onConfirm={() => onDelete(tab)} title=\"Delete Tab\" description={`Delete tab \"${tab.name}\"?`}>\n              <Button variant=\"outlined\">Delete Tab</Button>\n            </Confirm>\n\n\n          </CardActions>\n\n        </form.Form>\n      </Card>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport {\n  Card,\n  CardHeader,\n  CardContent,\n  Grid,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemSecondaryAction,\n  ListItemText,\n  IconButton,\n  Typography,\n} from '@material-ui/core';\nimport EditIcon from '@material-ui/icons/Edit';\nimport FolderIcon from '@material-ui/icons/Folder';\nimport AddIcon from '@material-ui/icons/Add';\n\nimport { Emoji } from 'emoji-mart';\nimport 'emoji-mart/css/emoji-mart.css';\n\nimport { useActions } from '../../actions';\nimport { useAppTemplate } from '../../contexts/AppTemplateContext';\nimport { NewTab } from './NewTab';\nimport { EditTab } from './EditTab';\n\nimport { EmojiPicker } from '../../components/Controls/EmojiPicker';\n\nfunction byId(set, id) {\n  const keys = Object.keys(set);\n  for (let x=0; x < keys.length; x++) {\n    if (set[keys[x]].__id === id) { return set[keys[x]];}\n  }\n}\n\nexport const Tabs = () => {\n  const  template = useAppTemplate();\n  const { tabs } = template;\n  const { editTab } = useActions();\n  const [selectIconTabId, setSelectIconTabId] = useState();\n  const [selectedEditTab, setSelectedEditTab] = useState();\n\n  if (selectedEditTab) {\n    const tab = byId(tabs, selectedEditTab);\n    return <EditTab tab={tab} onCancel={() => setSelectedEditTab(undefined)} />;\n  }\n\n  const onSelectEmoji = (emoji) => {\n    const tab = byId(tabs, selectIconTabId);\n    const newTab = Object.assign({}, tab, {icon: emoji.id});\n    editTab(newTab);\n    setSelectIconTabId(undefined);\n  };\n\n  const onRemoveIcon = () => {\n    const tab = byId(tabs, selectIconTabId);\n    const newTab = Object.assign({}, tab, {icon: undefined});\n    editTab(newTab);\n    setSelectIconTabId(undefined);\n  };\n\n  const onCancelEmojii = () => {\n    setSelectIconTabId(undefined);\n  };\n\n  const selectIcon = !!selectIconTabId ? <EmojiPicker onSelect={onSelectEmoji} onRemove={onRemoveIcon} onCancel={onCancelEmojii} /> : undefined;\n\n  return (\n    <div>\n      { selectIcon }\n      <Card>\n        <CardHeader title=\"Tabs\" />\n\n        <CardContent>\n          <Grid container spacing={3}>\n            <Grid item xs={12} md={8}>\n              <List dense={false}>\n                { Object.keys(tabs).map(tabKey => (\n                  <ListItem key={tabs[tabKey].__id}>\n                    <ListItemAvatar onClick={() => setSelectIconTabId(tabs[tabKey].__id)} >\n                      { tabs[tabKey].icon ?\n                          <Emoji emoji={tabs[tabKey].icon} size={32} set={'apple'} /> :\n                          <FolderIcon />\n                      }\n                    </ListItemAvatar>\n                    <ListItemText\n                      primary={tabs[tabKey].name}\n                      secondary={<Link to={`/${tabs[tabKey].slug}`}>{`/${tabs[tabKey].slug}`}</Link>}\n                    />\n                    <ListItemSecondaryAction>\n                      <IconButton edge=\"end\" aria-label=\"delete\" onClick={() => setSelectedEditTab(tabs[tabKey].__id)}>\n                        <EditIcon />\n                      </IconButton>\n                    </ListItemSecondaryAction>\n                  </ListItem>\n                )) }\n\n                <ListItem>\n                  <ListItemAvatar>\n                    <AddIcon />\n                  </ListItemAvatar>\n                  <ListItemText>\n                    <NewTab />\n                  </ListItemText>\n\n                </ListItem>\n              </List>\n\n            </Grid>\n\n            <Grid item xs={12} md={4}>\n              <Typography>\n                Tabs defined the navigation of your interface.\n              </Typography>\n              <Typography>\n                Each tab will appear in the navigation bar on the left.\n              </Typography>\n              <Typography>\n                A tab can have multiple pages.\n              </Typography>\n            </Grid>\n\n          </Grid>\n\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","import React from 'react';\nimport {\n  Button,\n} from '@material-ui/core';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport GetAppIcon from '@material-ui/icons/GetApp';\n\nimport { Link } from 'react-router-dom';\nimport fileDownload from 'js-file-download';\n\nimport { serializeTemplate, useAppTemplate } from '../../contexts/AppTemplateContext';\n\nexport const JsonView = () => {\n  const template = useAppTemplate();\n  const exportedTemplate = serializeTemplate(template);\n  const formatted = JSON.stringify(exportedTemplate, 1, '  ');\n\n  const download = () => {\n    fileDownload(formatted, 'template.json');\n  }\n\n  return (\n    <div>\n      <Button component={Link} to=\"/_/settings\" variant=\"outlined\"><ArrowBackIcon />{' '}Back</Button>\n      <Button variant=\"outlined\" onClick={download} startIcon={<GetAppIcon />}>Download Template JSON</Button>\n      <pre>\n        { formatted }\n      </pre>\n\n      <br />\n      <Button component={Link} to=\"/_/settings\" variant=\"outlined\" startIcon={<ArrowBackIcon />}>Back</Button>\n    </div>\n  );\n};\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\n\nimport { SettingsMain } from './SettingsMain';\nimport { Addresses } from './Addresses';\nimport { EditAddress } from './EditAddress';\nimport { Integrations } from './Integrations';\nimport { Tabs } from './Tabs';\nimport { JsonView } from './JsonView';\n\n\nexport const Settings = () => {\n\n  return (\n    <Switch>\n\n      <Route exact path={`/_/tabs`} component={Tabs} />\n      <Route exact path={`/_/integrations`} component={Integrations} />\n      <Route exact path={`/_/addresses/:network/:address`} component={EditAddress} />\n      <Route exact path={`/_/addresses`} component={Addresses} />\n\n      <Route path={`/_/json`} component={JsonView} />\n      <Route path={`/_/settings`} component={SettingsMain} />\n\n    </Switch>\n  );\n}\n","import React from 'react';\n\nimport { Switch, Route, Redirect } from 'react-router-dom';\n\nimport { useAppTemplate } from './contexts/AppTemplateContext';\n\nimport { Tab } from './components/Interface/Tab';\nimport { Settings } from './components/Settings/Settings';\n\nexport const SETTINGS_ROUTE = '/_';\n\nexport const Routes = () => {\n  const appTemplate = useAppTemplate();\n\n  // Default tab is first one for now\n  const defaultTab = appTemplate.tabs[Object.keys(appTemplate.tabs)[0]];\n\n  return (\n    <Switch>\n      { appTemplate.tabs && Object.keys(appTemplate.tabs).map((tabId, k) => (\n        <Route exact key={tabId} path={`/${appTemplate.tabs[tabId].slug}`} render={() => <Tab tab={appTemplate.tabs[tabId]} />} />\n      ))}\n\n      <Route path={SETTINGS_ROUTE} component={Settings} />\n\n      <Route path=\"/\" render={() => <Redirect to={`/${defaultTab.slug}`} /> } />\n    </Switch>\n  );\n}\n","import React, { useEffect } from 'react';\nimport {\n  Chip,\n} from '@material-ui/core';\nimport { makeStyles } from \"@material-ui/styles\";\nimport { useWeb3React } from '@web3-react/core'\nimport { SnackbarProvider, useSnackbar } from 'notistack';\nimport { EtherscanTxLink } from './lib/etherscan'\n\nimport { useTransactions, BlockNumberWatcher, TransactionStatusWatcher } from './contexts/Web3Context';\n\nimport { Identicon } from './components/Controls/Identicon';\n\nconst useStyles = makeStyles(theme => ({\n  chip: {\n    position: 'absolute',\n    top: theme.spacing(2),\n    right: theme.spacing(2),\n  },\n  identicon: {\n    marginLeft: 6,\n    marginTop: 4,\n  },\n  snacks: {\n    top: theme.spacing(8),\n  },\n}));\n\nexport const Web3Status = () => {\n  const classes = useStyles();\n  const { account } = useWeb3React();\n\n\tif (!account) {\n    return (\n      <div>\n        <Chip\n          className={classes.chip}\n          label=\"Connect web3 wallet\"\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div>\n\n      <BlockNumberWatcher />\n      <TransactionStatusWatcher />\n\n      <Chip\n        className={classes.chip}\n        label={`${account.substr(0,6)}...${account.substr(38, 4)}`}\n        avatar={<span className={classes.identicon}><Identicon address={account} /></span>}\n      />\n\n    <SnackbarProvider\n      anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\n      preventDuplicate={true}\n      className={classes.snacks}\n    >\n      <Web3TransactionList />\n    </SnackbarProvider>\n\n    </div>\n  );\n}\n\nconst Web3TransactionList = () => {\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n  const transactions = useTransactions();\n\n  useEffect(() => {\n    Object.keys(transactions).forEach(hash => {\n      const tx = transactions[hash];\n      const confirmed = !!tx.receipt;\n      if (confirmed) {\n        closeSnackbar(hash);\n        enqueueSnackbar(<EtherscanTxLink hash={hash} chainId={tx.chainId} prefix=\"Confirmed:\" />, {variant: 'success', persist: true, key: `${hash}-confirmed`});\n      } else {\n        enqueueSnackbar(<EtherscanTxLink hash={hash} chainId={tx.chainId} prefix=\"Pending:\" />, {variant: 'info', persist: true, key: hash});\n      }\n    });\n  }, [transactions]);\n\n  return null;\n};\n\n","import React, { useState, forwardRef } from 'react';\nimport { NavLink, Link, useLocation } from 'react-router-dom';\nimport {\n  useMediaQuery,\n  Button,\n  Collapse,\n  Container,\n  Divider,\n  Drawer,\n  Grid,\n  Hidden,\n  List,\n  ListItem,\n} from '@material-ui/core';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport { makeStyles, useTheme } from \"@material-ui/styles\";\nimport clsx from \"clsx\";\n\nimport { SETTINGS_ROUTE } from './Routes';\nimport { Web3Status } from './Web3Status';\nimport { useAppTemplate } from './contexts/AppTemplateContext';\n\n//import { Footer } from './Footer';\n\nimport { Emoji } from 'emoji-mart';\nimport 'emoji-mart/css/emoji-mart.css';\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    height: \"100%\",\n  },\n  drawer: {\n    [theme.breakpoints.up('sm')]: {\n      width: drawerWidth,\n      flexShrink: 0,\n    },\n  },\n  drawerPaper: {\n    width: drawerWidth,\n  },\n  content: {\n    height: \"100%\",\n    flexGrow: 1,\n    padding: theme.spacing(3),\n  },\n  navlist: {\n    backgroundColor: theme.palette.white,\n    //display: \"flex\",\n    flexDirection: \"column\",\n    height: \"100%\",\n    padding: theme.spacing(2)\n  },\n  divider: {\n    margin: theme.spacing(2, 0)\n  },\n  nav: {\n    marginBottom: theme.spacing(2)\n  },\n  item: {\n    display: \"flex\",\n    paddingTop: 0,\n    paddingBottom: 0,\n    marginTop: \"auto\",\n  },\n  settingsItem: {\n    color: theme.palette.text.disabled,\n    padding: \"10px 4px\",\n    justifyContent: \"flex-start\",\n    textTransform: \"none\",\n    letterSpacing: 0,\n    width: \"100%\",\n    fontWeight: theme.typography.fontWeightMedium\n  },\n  button: {\n    //color: colors.blueGrey[800],\n    padding: \"10px 8px\",\n    justifyContent: \"flex-start\",\n    textTransform: \"none\",\n    letterSpacing: 0,\n    width: \"100%\",\n    fontWeight: theme.typography.fontWeightMedium\n  },\n  icon: {\n    color: theme.palette.icon,\n    width: 24,\n    height: 24,\n    display: \"flex\",\n    alignItems: \"center\",\n    marginRight: theme.spacing(1)\n  },\n  active: {\n    color: theme.palette.primary.main,\n    fontWeight: theme.typography.fontWeightMedium,\n    \"& $icon\": {\n      color: theme.palette.primary.main\n    },\n  },\n}));\n\nconst NavLinkWithRef = forwardRef((props, ref) => (\n  <NavLink innerRef={ref} {...props} />\n));\n\nconst settingsSubNavs = [\n  {name: 'Tabs', route: 'tabs', icon: SettingsIcon},\n  {name: 'Integrations', route: 'integrations', icon: SettingsIcon},\n  {name: 'Address book', route: 'addresses', icon: SettingsIcon},\n];\n\n\n\nexport const Layout = ({ children }) => {\n  const theme = useTheme();\n  const classes = useStyles(theme);\n  const location = useLocation();\n  const { pathname } = location;\n  const isDesktop = useMediaQuery(theme.breakpoints.up(\"lg\"), {\n    defaultMatches: true\n  });\n\n  const appTemplate = useAppTemplate();\n\n  const [openSidebar, setOpenSidebar] = useState(false);\n\n  const toggleSidebar = () => {\n    setOpenSidebar(!openSidebar);\n  };\n\n  const shouldOpenSidebar = isDesktop ? true : openSidebar;\n\n  const renderSettingsSubNavs = () => settingsSubNavs.map(s =>\n    <ListItem className={classes.subitem} key={s.name}>\n      <Button\n        className={clsx(classes.button, (showSubSettings ? undefined : classes.settingsItem))}\n        component={Link}\n        to={`/_/${s.route}`}\n      >\n        <div className={classes.icon}></div>\n        { s.name }\n      </Button>\n    </ListItem>\n  );\n\n  const showSubSettings = pathname.startsWith(SETTINGS_ROUTE);\n\n  const container = window !== undefined ? () => window.document.body : undefined;\n\n  const drawer = <div>\n    <Grid container  style={{height: '100%'}}>\n      <Grid item xs={12} style={{marginBottom: 'auto'}}>\n\n        <List>\n          { appTemplate.tabs && Object.keys(appTemplate.tabs).map((tabId, k) => (\n            <ListItem className={classes.item} key={`/${appTemplate.tabs[tabId].slug}`} disableGutters>\n              <Button\n                activeClassName={classes.active}\n                className={classes.button}\n                component={NavLinkWithRef}\n                to={`/${appTemplate.tabs[tabId].slug}`}\n              >\n                <div className={classes.icon}>\n                  { appTemplate.tabs[tabId].icon ?\n                    <Emoji emoji={appTemplate.tabs[tabId].icon} size={24} set={'apple'} /> : undefined\n                  }\n                </div>\n                { appTemplate.tabs[tabId].name }\n              </Button>\n\n            </ListItem>\n          )) }\n        </List>\n\n      </Grid>\n\n      <Grid item xs={12}>\n        <List className={classes.list} style={{marginTop: 'auto'}}>\n\n          <Divider />\n          <ListItem className={clsx(classes.item, classes.settings, (showSubSettings ? undefined : classes.settingsItem))} disableGutters>\n            <Button\n              className={clsx(classes.button, (showSubSettings ? undefined : classes.settingsItem))}\n              component={Link}\n              to={'/_/settings'}\n            >\n              <div className={clsx(classes.icon, classes.settingsItem)}>\n                <SettingsIcon />\n              </div>\n              Settings\n            </Button>\n          </ListItem>\n\n          <Collapse in={showSubSettings}>\n            { renderSettingsSubNavs() }\n          </Collapse>\n\n        </List>\n      </Grid>\n    </Grid>\n  </div>;\n\n  return (\n    <div className={classes.root}>\n      <nav className={classes.drawer} aria-label=\"Navigation\">\n\n        { /* Mobile */ }\n        <Hidden smUp implementation=\"css\">\n          <Drawer\n            container={container}\n            variant=\"temporary\"\n            anchor={theme.direction === 'rtl' ? 'right' : 'left'}\n            open={openSidebar}\n            onClose={toggleSidebar}\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            ModalProps={{\n              keepMounted: true, // Better open performance on mobile.\n            }}\n          >\n            {drawer}\n          </Drawer>\n        </Hidden>\n\n        { /* Desktop */ }\n        <Hidden xsDown implementation=\"css\">\n          <Drawer\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            variant=\"permanent\"\n            open\n          >\n            {drawer}\n          </Drawer>\n        </Hidden>\n      </nav>\n      <main className={classes.content}>\n        <Web3Status />\n        { children }\n      </main>\n    </div>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport { useWeb3React } from '@web3-react/core'\n\nimport { injected, useWeb3ConnectExisting } from './lib/web3';\nimport { useActions } from './actions';\nimport { useAppTemplate } from './contexts/AppTemplateContext';\nimport { Spinner } from './components/Controls/Spinner';\nimport { ErrorMsg } from './components/Controls/ErrorMsg';\n\nimport exampleTemplate from './examples/default.json';\n\nexport const Loading = ({ children, storage }) => {\n  const appTemplate = useAppTemplate();\n  const [settingsLoaded, setSettingsLoaded] = useState(false);\n  const [loadingError, setLoadingError] = useState(false);\n  const { integrations } = appTemplate;\n  const { loadAppTemplate, connectIntegration, loadSettings } = useActions();\n  const { activate } = useWeb3React();\n  const triedWeb3Existing = useWeb3ConnectExisting();\n\n  // load user settings\n  useEffect(() => {\n    if (!settingsLoaded) {\n      loadSettings();\n      setSettingsLoaded(true);\n    }\n  }, [settingsLoaded]);\n\n  // Load saved app template from localstorage if exsits, otherwise load example template\n  useEffect(() => {\n    (async () => {\n      try {\n        const savedTemplate = await storage.load();\n        loadAppTemplate((savedTemplate || exampleTemplate), storage);\n      } catch (err) {\n        setLoadingError(err.toString());\n      }\n    })();\n  }, []);\n\n  // Connect integrations\n  useEffect(() => {\n    if (!appTemplate.__loaded) { return; }\n    const integrationKeys = Object.keys(integrations);\n    for (let x=0; x < integrationKeys.length; x++) {\n      const integration = integrations[integrationKeys[x]];\n      if (!integration.__connected) { connectIntegration(integration); }\n    }\n  }, [appTemplate.__loaded, integrations]);\n\n  // connect metamask if exists\n  // probably could check for a infura integration here and add it as well.\n  useEffect(() => {\n    if (triedWeb3Existing) {\n      activate(injected);\n    }\n  }, []);\n\n  if (loadingError) {\n    return <ErrorMsg message={loadingError} />;\n  }\n\n  if (!appTemplate.__loaded || (!triedWeb3Existing)) {\n    return <Spinner />;\n  }\n\n  const connectingStatuses = Object.keys(integrations).map(integrationKey => integrations[integrationKey].__connected);\n  if (connectingStatuses.includes(false)) {\n    return <Spinner />;\n  }\n\n  return (\n    <div>\n      { /* web3context.error ? <ErrorMsg message={web3context.error} /> : undefined */ }\n      { children }\n    </div>\n  );\n\n}\n","import React from 'react';\n\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { Router } from 'react-router-dom';\nimport { createBrowserHistory } from \"history\";\nimport { Web3Provider } from '@ethersproject/providers'\nimport { Web3ReactProvider } from '@web3-react/core'\nimport { ToastProvider } from 'react-toast-notifications'\n\nimport theme from './theme';\nimport { CustomToast } from './Notifications';\nimport { Layout } from './Layout';\nimport { Routes } from './Routes';\nimport { Loading } from './Loading';\n\nimport { Web3ContextProvider } from './contexts/Web3Context';\nimport { AppTemplateProvider } from './contexts/AppTemplateContext';\n\nconst history = createBrowserHistory();\n\nfunction getLibrary(provider) {\n  const library = new Web3Provider(provider);\n  library.pollingInterval = 12000;\n  return library;\n}\n\n\nexport default function App({ storage }) {\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <Router history={history}>\n        <Web3ReactProvider getLibrary={getLibrary}>\n          <ToastProvider components={{Toast: CustomToast}}>\n            <Web3ContextProvider>\n              <AppTemplateProvider storage={storage}>\n                <Loading storage={storage}>\n                  <Layout>\n                    <Routes />\n                  </Layout>\n                </Loading>\n              </AppTemplateProvider>\n            </Web3ContextProvider>\n          </ToastProvider>\n        </Web3ReactProvider>\n      </Router>\n    </ThemeProvider>\n  );\n}\n","import React from 'react';\nimport {\n  Button,\n  Checkbox,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Typography,\n} from '@material-ui/core';\nimport { useSettings } from '../../contexts/AppTemplateContext';\nimport { useActions } from '../../actions';\n\nexport const HttpStorageOptions = () => {\n  const settings = useSettings();\n\n  return <div>\n\n    <List>\n      <ListItem>\n        <ListItemText primary={`File served from local computer. Download template to save changes`} />\n      </ListItem>\n\n    </List>\n\n  </div>;\n};\n","import './wdyr';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nimport { HttpStorage, BrowserStorage }  from './lib/storage';\n\nlet storage;\n\nswitch (window.REACT_APP_ETHERFACE_STORAGE) {\n  case 'http':\n    storage = new HttpStorage(window.REACT_APP_ETHERFACE_TEMPLATE_URL);\n    break;\n\n  default:\n    storage = new BrowserStorage('etherface-file');\n}\n\nReactDOM.render(\n  <App storage={storage} />,\n  document.querySelector('#root'),\n);\n","import { HttpStorageOptions } from './HttpStorageOptions';\n\nexport default class {\n  constructor(httpLocation) {\n    this.type = 'http'\n    this.name = 'HTTP Source';\n    this.httpLocation = httpLocation;\n    this.canSave = false;\n    this.settingsComponent = HttpStorageOptions;\n  }\n\n  async load() {\n    console.log('File load here...');\n    const res = await fetch(this.httpLocation);\n    return (await res.json());\n  }\n\n  async save() {\n    console.error('save to http source not implemented');\n  }\n\n  async delete() {\n    console.error('Delete from http source not implemented');\n  }\n\n}\n","import React from 'react';\nimport {\n  Button,\n  Checkbox,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Typography,\n} from '@material-ui/core';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport SaveIcon from '@material-ui/icons/Save';\nimport { useHistory } from 'react-router-dom';\nimport { useToasts } from 'react-toast-notifications'\nimport { Confirm } from '../../components/Controls/Confirm';\nimport { useAppTemplate, useSettings, useStorage, serializeTemplate } from '../../contexts/AppTemplateContext';\nimport { useActions } from '../../actions';\n\nimport exampleTemplate from '../../examples/default.json';\n\nexport const LocalstorageOptions = () => {\n  const template = useAppTemplate();\n  const storage = useStorage();\n  const settings = useSettings();\n  const { loadAppTemplate, setSetting } = useActions();\n  const { addToast } = useToasts();\n  const  history = useHistory();\n\n  const toggleOption = (option) => {\n    setSetting(option, !settings[option]);\n  };\n\n  const deleteFromLocalstorage = () => {\n    storage.delete();\n\n    loadAppTemplate(exampleTemplate, storage);\n\n    addToast('Template deleted from browser localstorage', {apperance: 'success', autoDismiss: false});\n    history.push('/');\n  };\n\n  const saveToStorage = () => {\n    const exportedTemplate = serializeTemplate(template);\n    storage.save(exportedTemplate);\n    addToast('Template saved to localstorage', {apperance: 'success', autoDismiss: true, autoDismissTimeout: 3000});\n  }\n\n\n  return <div>\n\n    <List>\n      <ListItem button onClick={() => toggleOption('autosave')}>\n        <ListItemIcon>\n          <Checkbox\n            edge=\"start\"\n            checked={settings.autosave}\n            tabIndex={-1}\n            disableRipple\n            inputProps={{ 'aria-labelledby': 'checkbox-list-label-' }}\n          />\n        </ListItemIcon>\n        <ListItemText primary=\"Auto-save changes to browser storage\" />\n      </ListItem>\n\n      <ListItem button onClick={saveToStorage}>\n        <ListItemIcon>\n          <SaveIcon />\n        </ListItemIcon>\n        <ListItemText>Save template to localstorage</ListItemText>\n      </ListItem>\n\n      <Confirm\n        title=\"Delete template from Browser storage\"\n        description=\"Are you sure you want to delete the template from your browser's localstorage?\"\n        onConfirm={deleteFromLocalstorage}\n      >\n        <ListItem button>\n          <ListItemIcon>\n            <DeleteIcon />\n          </ListItemIcon>\n          <ListItemText>Delete from Localstorage</ListItemText>\n        </ListItem>\n      </Confirm>\n    </List>\n\n  </div>;\n};\n\n","import { LocalstorageOptions } from './LocalstorageOptions';\n\nexport default class {\n\n  constructor(localstoragePrefix) {\n    this.type = 'browser';\n    this.name = 'Browser file storage';\n    this.localstoragePrefix = localstoragePrefix;\n    this.settingsComponent = LocalstorageOptions;\n    this.canSave = true;\n  }\n\n  async load() {\n    const templateJSON = localStorage.getItem(this.localstoragePrefix);\n    return JSON.parse(templateJSON);\n  }\n\n  async save(appTemplate) {\n    localStorage.setItem(this.localstoragePrefix, JSON.stringify(appTemplate));\n  }\n\n  async delete() {\n    localStorage.removeItem(this.localstoragePrefix);\n  }\n\n};\n"],"sourceRoot":""}